https://www.coderdoc.ru/start/18_yii2/step_23_relation/23_1_one_many.php

## Связь один ко многим — метод hasMany()

1.  **Связь один ко многим, с помощью метода hasMany() (например, для одной категории может быть несколько товаров)**
    
    **Метод для связи с моделями**, обзательно должен начинаться с **префикса** get
    
    Например: getProducts()
    
    У **метода для связи с моделями** hasMany()
    
    -   — **1-м параметром** это **класс(название модели)**, с которым мы связываем данную **модель**
    -   — **2-м параметром массив полей**, по которым указываем связь:
        -   а) **ключом** будет **столбец текущей модели**
        -   б) **значением** будет **столбец модели, с которой связываем**
    
    ```
    hasMany(Product::class, ['category_id' => 'id'])
    ```
    
    ![Контроллеры](https://www.coderdoc.ru/start/img/content-image/387.jpg)
    
2.  **Создание объектов модели для связных моделей в контроллере**
    
    ![Контроллеры](https://www.coderdoc.ru/start/img/content-image/388.jpg)
    
    ![Контроллеры](https://www.coderdoc.ru/start/img/content-image/389.jpg)
    
3.  **Вывод связанных данных**
    
    Обращаемся по **названию метода связи**, т.е **метод связи** называется getProducts, значит обращаться нужно к products
    
    ![Контроллеры](https://www.coderdoc.ru/start/img/content-image/390.jpg)
    
4.  **Получение одной категории со свзными товарами, где id категории в GET-параметре**
    
    В **контроллере** создаем **метод для получения одной категории из аргументов метода**, значение которого будет браться из **GET-параметра**:
    
    ![Контроллеры](https://www.coderdoc.ru/start/img/content-image/391.jpg)
    
    Выводим **категорию**, обращаясь по **названию метода связи из модели**:
    
    ![Контроллеры](https://www.coderdoc.ru/start/img/content-image/392.jpg)
    
    Ссылка для примера:
    
    ```
    yii2.test/web/index.php?r=category/view&id=1
    ```
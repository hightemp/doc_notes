http://parallels.nsu.ru/~fat/unixsvr4-new/trunk/%D0%9B%D0%B5%D0%BA%D1%86%D0%B8%D1%8F%2010%20-%20%D0%A1%D1%80%D0%B5%D0%B4%D1%81%D1%82%D0%B2%D0%B0%20System%20V%20IPC.pdf

ЦЕЛИ РАЗДЕЛА 
• иметь представление об общих свойствах – семафоров – разделяемой памяти – очередей сообщений 
• использовать ключ для получения доступа к средствам IPC 
• получать информацию о средствах IPC и удалять их с использованием команд

СРЕДСТВА МЕЖПРОЦЕССНОГО ВЗАИМОДЕЙСТВИЯ 
• разделяемая память 
• семафоры 
• очереди сообщений

ОБЩИЕ СВОЙСТВА СРЕДСТВ IPC 
• Средства могут быть созданы за любое время до их использования 
• В момент создания для средства IPC устанавливаются собственность и права доступа, которые могут позднее быть изменены 
• Содержимое средства IPC может сохраняться после того, как все использовавшие его процессы завершились. 
• Средства должны удаляться явным образом, командой или соответствующим системным вызовом 
• Средства IPC теряются при перезагрузке системы.

get — основные сведения 
• создатель задает IPC_CREAT и права доступа в параметре flg 
• создатель может дополнительно задать IPC_EXCL 
• существуют права чтения (r) и записи (w) для хозяина, группы и других пользователей. 
• параметры настройки системы задают ограничения 
• после создания средства IPC, устанавливается взаимно однозначное соответствие между ненулевым ключом и id 
• IPC_PRIVATE предоставляет приватный ключ

ctl — основные сведения 
IPC_STAT - получает информацию о состоянии 
IPC_SET - изменяет хозяина или права доступа 
IPC_RMID - удаляет средство

КОМАНДЫ ipcs(1) И ipcrm(1) 
• состояние всех существующих в данный момент средств IPC - ipcs(1) 
• удаление средства IPC - ipcrm(1)

ОЧЕРЕДИ СООБЩЕНИЙ 
msgget - создать очередь или получить к ней доступ 
msgctl - определить состояние очереди; изменить хозяина или права доступа к ней; изменить максимальный размер очереди или удалить ее 
msgop - послать (msgsnd) или получить (msgrcv) сообщение

СЕМАФОРЫ 
• Разделяемое короткое беззнаковое целое значение 
• Используется для: 
– блокировки 
– управления доступом к ресурсам 
– подсчета 
– разделения небольшого беззнакового значения между процессами

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ 
GETVAL - значение семафора 
GETPID - идентификатор процесса, совершившего последнюю операцию над семафором 
GETNCNT - количество процессов, ожидающих увеличения значения семафора по сравнению с текущим значением 
GETZCNT - количество процессов, ожидающих нулевого значения семафора неуспех - -1 и errno установлена

Флаги 
• IPC_NOWAIT – неблокирующаяся операция 
• SEM_UNDO – отмена операции над семафором при завершении программы

РАЗДЕЛЯЕМАЯ ПАМЯТЬ 
• shmget - создать или получить доступ к сегменту разделяемой памяти 
• shmctl - определить состояние разделяемого сегмента; изменить хозяина/группу сегмента и права доступа; удалить сегмент 
• shmop - присоединить (shmat) разделяемый сегмент к области данных процесса, или отсоединить его (shmdt)


(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{316:function(s,a,t){"use strict";t.r(a);var e=t(14),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"я-хочу-сделать-свои-репозитории-docker-образов-как-это-сделать"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#я-хочу-сделать-свои-репозитории-docker-образов-как-это-сделать"}},[s._v("#")]),s._v(" я хочу сделать свой репозиторий docker образов как это сделать")]),s._v(" "),a("p",[s._v("Для создания своего репозитория Docker образов можно использовать Docker Registry. Это открытое программное обеспечение, которое позволяет создавать и хранить свои собственные Docker образы на локальном сервере или в облаке.")]),s._v(" "),a("p",[s._v("Вот как создать свой репозиторий Docker образов с помощью Docker Registry:")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("Установите Docker Registry на вашем сервере или в облаке. Вы можете использовать официальный образ Docker Registry из Docker Hub.")])]),s._v(" "),a("li",[a("p",[s._v("Запустите Docker Registry в контейнере Docker:")])])]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker run -d -p 5000:5000 --restart=always --name registry registry:2\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[a("p",[s._v("Создайте Docker образ, который вы хотите загрузить в свой репозиторий.")])]),s._v(" "),a("li",[a("p",[s._v("Пометьте свой Docker образ для загрузки в Docker Registry:")])])]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker tag myimage localhost:5000/myimage\n")])])]),a("p",[s._v("Здесь "),a("code",[s._v("myimage")]),s._v(" - это название вашего образа.")]),s._v(" "),a("ol",{attrs:{start:"5"}},[a("li",[s._v("Загрузите свой Docker образ в Docker Registry:")])]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker push localhost:5000/myimage\n")])])]),a("p",[s._v("После этого, ваш Docker образ будет загружен в Docker Registry и будет доступен для загрузки на другие компьютеры. Чтобы загрузить образ, нужно использовать команду "),a("code",[s._v("docker pull")]),s._v(".")]),s._v(" "),a("p",[s._v("Примечание: Если вы хотите создать закрытый репозиторий Docker, то вам нужно будет настроить аутентификацию и авторизацию для Docker Registry.")]),s._v(" "),a("h2",{attrs:{id:"как-клонировать-образы-из-списка-в-свои-docker-репозитории"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#как-клонировать-образы-из-списка-в-свои-docker-репозитории"}},[s._v("#")]),s._v(" как клонировать образы из списка в свой docker репозиторий")]),s._v(" "),a("p",[s._v("Чтобы скопировать (клонировать) Docker образы из списка в свой Docker Registry, необходимо выполнить следующие действия:")]),s._v(" "),a("ol",[a("li",[s._v("Запустить локальный Docker Registry:")])]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker run -d -p 5000:5000 --name registry registry:2\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("Загрузить Docker образ из списка:")])]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker pull repository_name/image_name:tag\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("Пометить загруженный Docker образ для загрузки в локальный Docker Registry:")])]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker tag repository_name/image_name:tag localhost:5000/image_name:tag\n")])])]),a("ol",{attrs:{start:"4"}},[a("li",[s._v("Загрузить Docker образ в локальный Docker Registry:")])]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker push localhost:5000/image_name:tag\n")])])]),a("ol",{attrs:{start:"5"}},[a("li",[s._v("Проверить, что Docker образ успешно загружен в локальный Docker Registry:")])]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("curl http://localhost:5000/v2/_catalog\n")])])]),a("p",[s._v("В ответе должен быть список доступных Docker образов в локальном Docker Registry.")]),s._v(" "),a("p",[s._v("Примечание: убедитесь, что у вас есть права на копирование Docker образов из указанного репозитория.")]),s._v(" "),a("h2",{attrs:{id:"напиши-скрипт-которыи-делает-это-беря-названия-образов-из-фаила-images-txt"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#напиши-скрипт-которыи-делает-это-беря-названия-образов-из-фаила-images-txt"}},[s._v("#")]),s._v(" напиши скрипт который делает это беря названия образов из файла images.txt")]),s._v(" "),a("p",[s._v("Вот пример скрипта на языке bash, который читает названия Docker образов из файла images.txt, клонирует их в локальный Docker Registry и удаляет их из локального хранилища:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Указываем путь к файлу со списком образов")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("IMAGES_FILE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"images.txt"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Указываем адрес локального Docker Registry")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LOCAL_REGISTRY")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"localhost:5000"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Проверяем, что Docker запущен и работает")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&>")]),s._v(" /dev/null\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Docker не установлен"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Проверяем, что локальный Docker Registry запущен и работает")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-q")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"registry"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Локальный Docker Registry не запущен"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Читаем названия Docker образов из файла и клонируем их в локальный Docker Registry")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("read")]),s._v(" image"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Клонирую образ '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$image")]),s._v(' в локальный Docker Registry"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$image")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" tag "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$image")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$LOCAL_REGISTRY")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$image")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" push "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$LOCAL_REGISTRY")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$image")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" rmi "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$image")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$IMAGES_FILE")]),s._v('"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Готово"')]),s._v("\n")])])]),a("p",[s._v("Примечание: убедитесь, что у вас есть права на копирование Docker образов из указанного репозитория. Также не забудьте изменить адрес локального Docker Registry и путь к файлу со списком образов, если они отличаются от указанных в скрипте.")])])}),[],!1,null,null,null);a.default=r.exports}}]);
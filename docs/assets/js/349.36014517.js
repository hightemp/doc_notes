(window.webpackJsonp=window.webpackJsonp||[]).push([[349],{621:function(t,n,_){"use strict";_.r(n);var r=_(14),s=Object(r.a)({},(function(){var t=this,n=t._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("p",[t._v("https://habr.com/ru/post/121254/")]),t._v(" "),n("p",[t._v("–û–¥–Ω–∞–∂–¥—ã, –≤ –æ–¥–Ω–æ–º –∏–∑ –ø—Ä–æ–µ–∫—Ç–æ–≤, –º–Ω–µ –ø–æ–Ω–∞–¥–æ–±–∏–ª–æ—Å—å –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–≥–∏–π –∏ –Ω–∞–¥–µ–∂–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –≤—Å–µ–º–∏ —Å–µ—Ç–µ–≤—ã–º–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏, —Ç–∞–±–ª–∏—Ü–∞–º–∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏, –∞ —Ç–∞–∫ –∂–µ –ø–æ–ª—É—á–∞—Ç—å –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ –∫–∞–∫–∏—Ö-–ª–∏–±–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö. –ë—ã–ª–æ –ø—Ä–∏–Ω—è—Ç–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ ‚Äî –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–µ-–¥–æ–±—Ä—ã–µ ioctl netdevice (SIOCGIFMETRIC, SIOCSIFNAME –∏ —Ç.–ø.) –∏–ª–∏ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —É—Ç–∏–ª–∏—Ç (ifconfig, route –∏ —Ç.–¥.), –∞ –Ω–∞–π—Ç–∏ –±–æ–ª–µ–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –∏ –±–æ–ª–ª–µ —É–¥–æ–±–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ. –û–Ω–æ –±—ã–ª–æ –Ω–∞–π–¥–µ–Ω–æ ‚Äî libnetlink. –≠—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∞—è –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ —Å —è–¥—Ä–æ–º, —Å –ø–æ–º–æ—â—å—é –º–µ—Ö–∞–Ω–∏–∑–º–∞¬†"),n("a",{attrs:{href:"http://en.wikipedia.org/wiki/Netlink",target:"_blank",rel:"noopener noreferrer"}},[t._v("netlink"),n("OutboundLink")],1),t._v(". –î–∞–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏–ª–∞ –¥–ª—è –º–æ–∏—Ö —Ü–µ–ª–µ–π, –ø–æ–∑–≤–æ–ª—è—è —Ä–µ—à–∏—Ç—å –æ–≥—Ä–æ–º–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞—á. –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —É –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –æ–∫–∞–∑–∞–ª—Å—è –Ω–µ –æ—Å–æ–±–æ —É–¥–æ–±–Ω—ã–π –∏ –¥–æ–≤–æ–ª—å–Ω–æ —Å–ª–æ–∂–Ω—ã–π API, —Ç—Ä–µ–±–æ–≤–∞–≤—à–∏–π —Å–æ–≤–µ—Ä—à–∞—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ –Ω–µ–ø–æ–Ω—è—Ç–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π. –û—Å–æ–±–æ–≥–æ –≤–µ—Å–µ–ª—å—è –¥–æ–±–∞–≤–ª—è–ª–æ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª–Ω–æ–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ –≤–æ–æ–±—â–µ –ª—é–±—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –Ω–∞ —ç—Ç—É —Ç–µ–º—É."),n("br"),t._v("\n–ü–æ–¥—É–º–∞–≤, —è —Ä–µ—à–∏–ª –∫–∞–∫ —Å–ª–µ–¥—É–µ—Ç —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –≤ netlink –∏ –Ω–∞–ø–∏—Å–∞—Ç—å —Å–≤–æ—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É. –í –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤–µ—Å—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π, —Å–µ—Ç–µ–≤—ã–º–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏, —Ç–∞–±–ª–∏—Ü–∞–º–∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏, —Ä–∞–∑—É–º–µ–µ—Ç—Å—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è IPv4 –∏ IPv6. –í –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–∫–æ—Ä–æ–º –≤—Ä–µ–º–µ–Ω–∏ –¥–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç–∏–∫ –±—É–¥–µ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –Ω–∞ —Å—É–¥ –æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ üòÉ –ê –ø–æ–∫–∞ —è –±—ã —Ö–æ—Ç–µ–ª –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏—Ö—Å—è —Å –ø—Ä–µ–∫—Ä–∞—Å–Ω—ã–º –º–∏—Ä–æ–º netlink, –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –ø—Ä–æ—Å—Ç–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∞ —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤.")]),t._v(" "),n("h5",{attrs:{id:"—á—Ç–æ-—Ç–∞–∫–æ–µ-netlink"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#—á—Ç–æ-—Ç–∞–∫–æ–µ-netlink"}},[t._v("#")]),t._v(" –ß—Ç–æ —Ç–∞–∫–æ–µ netlink?")]),t._v(" "),n("p",[t._v("–ò—Ç–∞–∫, netlink –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–π —Å–æ–±–æ–π —Å–ø–æ—Å–æ–± –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –º–µ–∂–¥—É —é–∑–µ—Ä—Å–ø–µ–π—Å–æ–º –∏ —è–¥—Ä–æ–º Linux. –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –æ–±—ã—á–Ω–æ–≥–æ —Å–æ–∫–µ—Ç–∞, —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –æ—Å–æ–±–æ–≥–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ ‚Äî AF_NETLINK."),n("br"),t._v("\nNetlink –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø–æ–¥—Å–∏—Å—Ç–µ–º —è–¥—Ä–∞ ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è, —Ñ–∏–ª—å—Ç—Ä —Å–µ—Ç–µ–≤—ã—Ö –ø–∞–∫–µ—Ç–æ–≤. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –º–æ–∂–Ω–æ –æ–±—â–∞—Ç—å—Å—è —Å–æ —Å–≤–æ–∏–º –º–æ–¥—É–ª–µ–º —è–¥—Ä–∞. –†–∞–∑—É–º–µ–µ—Ç—Å—è –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–º –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–∞–∫–æ–≥–æ —Å–ø–æ—Å–æ–±–∞ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏."),n("br"),t._v("\n–ö–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ netlink –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∑–∞–≥–æ–ª–æ–≤–æ–∫, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π nlmsghdr, –∞ —Ç–∞–∫ –∂–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –±–∞–π—Ç ‚Äî ¬´–ø–æ–ª–µ–∑–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏¬ª (playload). –î–∞–Ω–Ω–∞—è ¬´–Ω–∞–≥—Ä—É–∑–∫–∞¬ª –º–æ–∂–µ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—Ç—å —Å–æ–±–æ–π –∫–∞–∫—É—é –ª–∏–±–æ —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –ª–∏–±–æ –∂–µ –ø—Ä–æ—Å—Ç–æ RAW –¥–∞–Ω–Ω—ã–µ. –°–æ–æ–±—â–µ–Ω–∏–µ, –≤–æ –≤—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏, –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–∑–±–∏—Ç–æ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å—Ç–µ–π. –í —Ç–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö –∫–∞–∂–¥—ã–π —Å–ª–µ–¥—É—é—â–∏–π –ø–∞–∫–µ—Ç –ø–æ–º–µ—á–∞–µ—Ç—Å—è —Ñ–ª–∞–≥–æ–º NLM_F_MULTI, –∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ñ–ª–∞–≥–æ–º NLMSG_DONE. –î–ª—è —Ä–∞–∑–±–æ—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–º–µ–µ—Ç—Å—è —Ü–µ–ª—ã–π –Ω–∞–±–æ—Ä –º–∞–∫—Ä–æ—Å–æ–≤, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –≤ –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö netlink.h –∏ rtnetlink.h")]),t._v(" "),n("h6",{attrs:{id:"—Å–æ–∑–¥–∞–Ω–∏–µ-—Å–æ–∫–µ—Ç–∞-netlink"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#—Å–æ–∑–¥–∞–Ω–∏–µ-—Å–æ–∫–µ—Ç–∞-netlink"}},[t._v("#")]),t._v(" –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–∫–µ—Ç–∞ netlink.")]),t._v(" "),n("p",[t._v("–û–±—ä—è–≤–ª–µ–Ω–∏–µ netlink —Å–æ–∫–µ—Ç–∞ –≤—ã–≥–ª—è–¥–∏—Ç –≤–ø–æ–ª–Ω–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ:")]),t._v(" "),n("p",[n("code",[t._v("socket(AF_NETLINK, SOCK_RAW, NETLINK_ROUTE)")])]),t._v(" "),n("p",[t._v("–ì–¥–µ¬†"),n("strong",[t._v("AF_NETLINK")]),t._v("¬†‚Äî –ø—Ä–æ—Ç–æ–∫–æ–ª netlink"),n("br"),t._v(" "),n("strong",[t._v("SOCK_RAW")]),t._v("¬†‚Äî —Ç–∏–ø —Å–æ–∫–µ—Ç–∞"),n("br"),t._v(" "),n("strong",[t._v("NETLINK_ROUTE")]),t._v("¬†‚Äî —Å–µ–º–µ–π—Å—Ç–≤–æ netlink –ø—Ä–æ—Ç–æ–∫–æ–ª–∞.")]),t._v(" "),n("p",[t._v("–ü–æ—Å–ª–µ–¥–Ω–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–º, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, —á—Ç–æ –º—ã –∏–º–µ–Ω–Ω–æ —Ö–æ—Ç–∏–º –ø–æ–ª—É—á–∏—Ç—å –æ—Ç netlink."),n("br"),t._v("\n–ü—Ä–∏–≤–µ–¥—É —Ç–∞–±–ª–∏—Ü—É —Å–æ –Ω–∞–∏–±–æ–ª–µ–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ (–ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏):")]),t._v(" "),n("p",[n("strong",[t._v("NETLINK_ROUTE")]),t._v("¬†‚Äî –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö —Ç–∞–±–ª–∏—Ü—ã –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –∏ —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤."),n("br"),t._v("\n—Ç–∞–∫ –∂–µ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤—ã—à–µ–ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤."),n("br"),t._v(" "),n("strong",[t._v("NETLINK_USERSOCK")]),t._v("¬†‚Äî –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤."),n("br"),t._v(" "),n("strong",[t._v("NETLINK_FIREWALL")]),t._v("¬†‚Äî —Å–ª—É–∂–∏—Ç –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ IPv4 –ø–∞–∫–µ—Ç–æ–≤ –∏–∑ —Å–µ—Ç–µ–≤–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —É—Ä–æ–≤–µ–Ω—å"),n("br"),t._v(" "),n("strong",[t._v("NETLINK_INET_DIAG")]),t._v("¬†‚Äî –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ inet —Å–æ–∫–µ—Ç–æ–≤"),n("br"),t._v(" "),n("strong",[t._v("NETLINK_NFLOG")]),t._v("¬†‚Äî ULOG —Å–µ—Ç–µ–≤–æ–≥–æ/–ø–∞–∫–µ—Ç–Ω–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞"),n("br"),t._v(" "),n("strong",[t._v("NETLINK_SELINUX")]),t._v("¬†‚Äî –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç —Å–∏—Å—Ç–µ–º—ã Selinux"),n("br"),t._v(" "),n("strong",[t._v("NETLINK_NETFILTER")]),t._v("¬†‚Äî —Ä–∞–±–æ—Ç–∞ —Å –ø–æ–¥—Å–∏—Å—Ç–µ–º–æ–π —Å–µ—Ç–µ–≤–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞"),n("br"),t._v(" "),n("strong",[t._v("NETLINK_KOBJECT_UEVENT")]),t._v("¬†‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π —è–¥—Ä–∞")]),t._v(" "),n("p",[t._v("–î–∞–ª–µ–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Å–æ–∫–µ—Ç –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ send –∏ –ø—Ä–∏–µ–º–∞ —Å–æ–æ–±—â–µ–Ω–∏–π —Å –ø–æ–º–æ—â—å—é recvmsg.")]),t._v(" "),n("h6",{attrs:{id:"—Å–æ–æ–±—â–µ–Ω–∏–µ-netlink"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#—Å–æ–æ–±—â–µ–Ω–∏–µ-netlink"}},[t._v("#")]),t._v(" –°–æ–æ–±—â–µ–Ω–∏–µ netlink.")]),t._v(" "),n("p",[t._v("–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π nlmsghdr")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("struct nlmsghdr\n{\n\t__u32 nlmsg_len;\t// —Ä–∞–∑–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è, —Å —É—á–µ—Ç–æ–º –∑–∞–≥–æ–ª–æ–≤–∫–∞\n\t__u16 nlmsg_type; \t// —Ç–∏–ø —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è (–æ–± —ç—Ç–æ–º –Ω–∏–∂–µ)\n\t__u16 nlmsg_flags;\t// —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ñ–ª–∞–≥–∏ —Å–æ–æ–±—â–µ–Ω–∏—è\n\t__u32 nlmsg_seq; \t// –ø–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è\n\t__u32 nlmsg_pid; \t// –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ—Ü–µ—Å—Å–∞ (PID), –æ—Ç–æ—Å–ª–∞–≤—à–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–µ\n};\n")])])]),n("p",[t._v("–ü–æ–ª–µ nlmsg_type –º–æ–∂–µ—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –æ–¥–∏–Ω –∏–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö —Ç–∏–ø–æ —Å–æ–æ–±—â–µ–Ω–∏—è:"),n("br"),t._v(" "),n("strong",[t._v("NLMSG_NOOP")]),t._v("¬†‚Äî —Å–æ–æ–±—â–µ–Ω–∏—è —Ç–∞–∫–æ–≥–æ —Ç–∏–ø–∞ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è."),n("br"),t._v(" "),n("strong",[t._v("NLMSG_ERROR")]),t._v("¬†‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –æ—à–∏–±–∫–æ–π, –∏ –≤ —Å–µ–∫—Ü–∏–∏ –ø–æ–ª–µ–∑–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –±—É–¥–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ nlmsgerr (–æ –Ω–µ–π —á—É—Ç—å –Ω–∏–∂–µ)"),n("br"),t._v(" "),n("strong",[t._v("NLMSG_DONE")]),t._v("¬†‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —ç—Ç–∏–º —Ñ–ª–∞–≥–æ–º –¥–æ–ª–∂–Ω–æ –∑–∞–≤–µ—Ä—à–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ, —Ä–∞–∑–±–∏—Ç–æ–µ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å—Ç–µ–π")]),t._v(" "),n("p",[t._v("–°—Ç—Ä—É–∫—Ç—É—Ä–∞ nlmsgerr")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("struct nlmsgerr\n{\n\tint error; \t\t\t\t// –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ–¥–∞ –æ—à–∏–±–∫–∏\n\tstruct nlmsghdr msg; \t// –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏—è, —Å–≤—è–∑–∞–Ω–Ω–æ–≥–æ —Å –æ—à–∏–±–∫–æ–π\n};\n")])])]),n("p",[t._v("–°–æ–æ–±—â–µ–Ω–∏—è –º–æ–≥—É—Ç –±—ã—Ç—å –æ–¥–Ω–æ–≥–æ –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö (—Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –æ–±—ä–µ–¥–µ–Ω—è—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –∏–ª–∏ ) —Ç–∏–ø–æ–≤:")]),t._v(" "),n("p",[n("strong",[t._v("NLM_F_REQUEST")]),t._v("¬†‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Äî –∑–∞–ø—Ä–æ—Å —á–µ–≥–æ –ª–∏–±–æ"),n("br"),t._v(" "),n("strong",[t._v("NLM_F_MULTI")]),t._v("¬†‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ, —á–∞—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è —Ä–∞–∑–±–∏—Ç–æ–≥–æ –Ω–∞ —á–∞—Å—Ç–∏"),n("br"),t._v(" "),n("strong",[t._v("NLM_F_ACK")]),t._v("¬†‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Äî –∑–∞–ø—Ä–æ—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è"),n("br"),t._v(" "),n("strong",[t._v("NLM_F_ECHO")]),t._v("¬†‚Äî —ç—Ö–æ –∑–∞–ø—Ä–æ—Å. –æ–±—ã—á–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ‚Äî –∑–∞–ø—Ä–æ—Å—ã –∏–∑ —É—Ä–æ–≤–Ω—è —è–¥—Ä–∞ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —É—Ä–æ–≤–µ–Ω—å"),n("br"),t._v(" "),n("strong",[t._v("NLM_F_ROOT")]),t._v("¬†‚Äî –¥–∞–Ω–Ω—ã–π —Ç–∏–ø –∑–∞–ø—Ä–æ—Å–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–µ–∫—É—é —Ç–∞–±–ª–∏—Ü—É, –≤–Ω—É—Ç—Ä–∏ –Ω–µ–∫–æ–π —Å—É—â–Ω–æ—Å—Ç–∏"),n("br"),t._v(" "),n("strong",[t._v("NLM_F_MATCH")]),t._v("¬†‚Äî –∑–∞–ø—Ä–æ—Å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è"),n("br"),t._v(" "),n("strong",[t._v("NLM_F_ATOMIC")]),t._v("¬†‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞—Ç–æ–º–∞—Ä–Ω—ã–π —Å—Ä–µ–∑ –Ω–µ–∫–æ–π —Ç–∞–±–ª–∏—Ü—ã"),n("br"),t._v(" "),n("strong",[t._v("NLM_F_DUMP")]),t._v("¬†‚Äî –∞–Ω–∞–ª–æ–≥ NLM_F_ROOT|NLM_F_MATCH")]),t._v(" "),n("p",[t._v("–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–ª–∞–≥–∏:")]),t._v(" "),n("p",[n("strong",[t._v("NLM_F_REPLACE")]),t._v("¬†‚Äî –∑–∞–º–µ–Ω–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π –æ–±—ä–µ–∫—Ç"),n("br"),t._v(" "),n("strong",[t._v("NLM_F_EXCL")]),t._v("¬†‚Äî –Ω–µ –∑–∞–º–µ–Ω—è—Ç—å, –µ—Å–ª–∏ —Ç–∞–∫–æ–π –æ–±—ä–µ–∫—Ç —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"),n("br"),t._v(" "),n("strong",[t._v("NLM_F_CREATE")]),t._v("¬†‚Äî —Å–æ–∑–¥–∞—Ç—å –æ–±—ä–µ–∫—Ç, –µ—Å–ª–∏ –æ–Ω –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"),n("br"),t._v(" "),n("strong",[t._v("NLM_F_APPEND")]),t._v("¬†‚Äî –¥–æ–±–∞–≤–∏—Ç—å –æ–±—ä–µ–∫—Ç –≤ —Å–ø–∏—Å–æ–∫ –∫ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É")]),t._v(" "),n("p",[t._v("–î–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤ (–Ω–∞ —É—Ä–æ–≤–Ω–µ —è–¥—Ä–∞ –∏ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º —É—Ä–æ–≤–Ω–µ) —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –∞–¥—Ä–µ—Å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚Äî nladdr:")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("struct sockaddr_nl\n{\n\tsa_family_t nl_family; \t// —Å–µ–º–µ–π—Å—Ç–≤–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ - –≤—Å–µ–≥–¥–∞ AF_NETLINK\n\tunsigned short nl_pad; \t// –ø–æ–ª–µ –≤—Å–µ–≥–¥–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ –Ω—É–ª—è–º–∏\n\tpid_t nl_pid; \t\t\t// –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ—Ü–µ—Å—Å–∞\n\t__u32 nl_groups; \t\t// –º–∞—Å–∫–∞ –≥—Ä—É–ø–ø –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π/–æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–π\n};\n")])])]),n("p",[t._v("nl_pid ‚Äî —ç—Ç–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å —Å–æ–∫–µ—Ç–∞. –î–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤ —è–¥—Ä–µ –æ–Ω –≤—Å–µ–≥–¥–∞ —Ä–∞–≤–µ–Ω –Ω—É–ª—é. –î–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º —É—Ä–æ–≤–Ω–µ –æ–Ω —Ä–∞–≤–µ–Ω –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—É –ø—Ä–æ—Ü–µ—Å—Å–∞, –≤–ª–∞–¥–µ—é—â–µ–≥–æ —Å–æ–∫–µ—Ç–æ–º. –ö–∞–∂–¥—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º, –ø–æ—ç—Ç–æ–º—É —Ç—É—Ç –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞—Ç–æ–ª–∫–Ω—É—Ç—Å—è –Ω–∞ –ø—Ä–æ–±–ª–µ–º—É, –∫–æ–≥–¥–∞ –ø–æ–ø—ã—Ç–∞–µ—Ç–µ—Å—å —Å–æ–∑–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ netlink —Å–æ–∫–µ—Ç–æ–≤ –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏: –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —Å–æ–∫–µ—Ç–∞ –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –æ—à–∏–±–∫–∞ ¬´Operation not permitted¬ª. –î–ª—è –æ–±—Ö–æ–¥–∞ –¥–∞–Ω–Ω–æ–≥–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Å–ª–µ–¥—É—é—Ç nl_pid –ø—Ä–∏—Å–≤–∞–∏–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –¥–∞–Ω–Ω–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è:"),n("br"),t._v(" "),n("code",[t._v("pthread_self() << 16 | getpid();")]),n("br"),t._v("\n–ü—Ä–∏—Å–≤–∞–∏–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ —Å–ª–µ–¥—É–µ—Ç –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω bind() –¥–ª—è —Å–æ–∫–µ—Ç–∞."),n("br"),t._v("\n–¢–∞–∫ –∂–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—É –º–æ–∂–Ω–æ –ø—Ä–∏—Å–≤–æ–∏—Ç—å –Ω—É–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –±—É–¥–µ—Ç –∑–∞–Ω–∏–º–∞—Ç—å—Å—è —è–¥—Ä–æ, –Ω–æ –ø–µ—Ä–≤–æ–º—É —Å–æ–∫–µ—Ç—É —Å–æ–∑–¥–∞–Ω–Ω–æ–º—É –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –ø—Ä–∏—Å–≤–∞–∏–≤–∞—Ç—å—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.")]),t._v(" "),n("p",[n("strong",[t._v("nl_groups")]),t._v("¬†‚Äî —ç—Ç–æ –±–∏—Ç–æ–≤–∞—è –º–∞—Å–∫–∞, –∫–∞–∂–¥—ã–π –±–∏—Ç –∫–æ—Ç–æ—Ä–æ–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–æ–º–µ—Ä –≥—Ä—É–ø–ø—ã netlink. –ü—Ä–∏ –≤—ã–∑–æ–≤–µ bind() –¥–ª—è —Å–æ–∫–µ—Ç–∞ netlink —Å–ª–µ–¥—É–µ—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –±–∏—Ç–æ–≤—É—é –º–∞—Å–∫—É –≥—Ä—É–ø–ø—ã, –∫–æ—Ç–æ—Ä—É—é –∂–µ–ª–∞–µ—Ç –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –≤ –¥–∞–Ω–Ω–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ. –†–∞–∑–ª–∏—á–Ω—ã–µ –≥—Ä—É–ø–ø—ã –º–æ–≥—É—Ç –±—ã—Ç—å –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã —Å –ø–æ–º–æ—â—å—é –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –∏–ª–∏."),n("br"),t._v("\n–û—Å–Ω–æ–≤–Ω—ã–µ –≥—Ä—É–ø–ø—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω–æ–º —Ñ–∞–π–ª–µ netlink."),n("br"),t._v("\n–ü—Ä–∏–º–µ—Ä –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∏–∑ –Ω–∏—Ö:")]),t._v(" "),n("p",[n("strong",[t._v("RTMGRP_LINK")]),t._v("¬†‚Äî —ç—Ç–∞ –≥—Ä—É–ø–ø–∞ –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –≤ —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–¥–∞–ª–∏–ª—Å—è, –¥–æ–±–∞–≤–∏–ª—Å—è, –æ–ø—É—Å—Ç–∏–ª—Å—è, –ø–æ–¥–Ω—è–ª—Å—è)"),n("br"),t._v(" "),n("strong",[t._v("RTMGRP_IPV4_IFADDR")]),t._v("¬†‚Äî —ç—Ç–∞ –≥—Ä—É–ø–ø–∞ –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –≤ IPv4 –∞–¥—Ä–µ—Å–∞—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ (–∞–¥—Ä–µ—Å –±—ã–ª –¥–æ–±–∞–≤–ª–µ–Ω –∏–ª–∏ —É–¥–∞–ª–µ–Ω)"),n("br"),t._v(" "),n("strong",[t._v("RTMGRP_IPV6_IFADDR")]),t._v("¬†‚Äî —ç—Ç–∞ –≥—Ä—É–ø–ø–∞ –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –≤ IPv6 –∞–¥—Ä–µ—Å–∞—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ (–∞–¥—Ä–µ—Å –±—ã–ª –¥–æ–±–∞–≤–ª–µ–Ω –∏–ª–∏ —É–¥–∞–ª–µ–Ω)"),n("br"),t._v(" "),n("strong",[t._v("RTMGRP_IPV4_ROUTE")]),t._v("¬†‚Äî —ç—Ç–∞ –≥—Ä—É–ø–ø–∞ –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –≤ —Ç–∞–±–ª–∏—Ü–µ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –¥–ª—è IPv4 –∞–¥—Ä–µ—Å–æ–≤"),n("br"),t._v(" "),n("strong",[t._v("RTMGRP_IPV6_ROUTE")]),t._v("¬†‚Äî —ç—Ç–∞ –≥—Ä—É–ø–ø–∞ –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –≤ —Ç–∞–±–ª–∏—Ü–µ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –¥–ª—è IPv6 –∞–¥—Ä–µ—Å–æ–≤")]),t._v(" "),n("p",[t._v("–ü–æ—Å–ª–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∑–∞–≥–æ–ª–æ–≤–∫–∞ nlmsghdr –≤—Å–µ–≥–¥–∞ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –±–ª–æ–∫ –¥–∞–Ω–Ω—ã—Ö. –î–æ—Å—Ç—É–ø –∫ –Ω–µ–º—É –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Å –ø–æ–º–æ—â—å—é –º–∞–∫—Ä–æ—Å–æ–≤, –æ –∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥–µ—Ç —Ä–∞—Å—Å–∫–∞–∑–∞–Ω–æ –¥–∞–ª–µ–µ.")]),t._v(" "),n("h5",{attrs:{id:"–º–∞–∫—Ä–æ—Å—ã-netlink"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#–º–∞–∫—Ä–æ—Å—ã-netlink"}},[t._v("#")]),t._v(" –ú–∞–∫—Ä–æ—Å—ã netlink")]),t._v(" "),n("p",[t._v("–ù–∞–∏–±–æ–ª–µ–µ –ø–æ–ª–µ–∑–Ω—ã–º–∏, –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ, –º–∞–∫—Ä–æ—Å–∞–º–∏ —è–≤–ª—è—é—Ç—Å—è:"),n("br"),t._v(" "),n("strong",[t._v("NLMSG_ALIGN")]),t._v("¬†‚Äî –û–∫—Ä—É–≥–ª—è–µ—Ç —Ä–∞–∑–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è netlink –¥–æ –±–ª–∏–∂–∞–π—à–µ–≥–æ –±–æ–ª—å—à–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è, –≤—ã—Ä–æ–≤–Ω–µ–Ω–Ω–æ–≥–æ –ø–æ –≥—Ä–∞–Ω–∏—Ü–µ."),n("br"),t._v(" "),n("strong",[t._v("NLMSG_LENGTH")]),t._v("¬†‚Äî –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ —Ä–∞–∑–º–µ—Ä –ø–æ–ª—è –¥–∞–Ω–Ω—ã—Ö (payload) –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—ã—Ä–æ–≤–Ω–µ–Ω–Ω–æ–µ –ø–æ –≥—Ä–∞–Ω–∏—Ü–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤ –ø–æ–ª–µ nlmsg_len –∑–∞–≥–æ–ª–æ–≤–∫–∞ nlmsghdr."),n("br"),t._v(" "),n("strong",[t._v("NLMSG_SPACE")]),t._v("¬†‚Äî –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–∞–∑–º–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–π–º—É—Ç –¥–∞–Ω–Ω—ã–µ —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–ª–∏–Ω—ã –≤ –ø–∞–∫–µ—Ç–µ netlink."),n("br"),t._v(" "),n("strong",[t._v("NLMSG_DATA")]),t._v("¬†‚Äî –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –¥–∞–Ω–Ω—ã–µ, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–º –∑–∞–≥–æ–ª–æ–≤–∫–æ–º nlmsghdr."),n("br"),t._v(" "),n("strong",[t._v("NLMSG_NEXT")]),t._v("¬†‚Äî –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª–µ–¥—É—é—â—É—é —á–∞—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è, —Å–æ—Å—Ç–æ—è—â–µ–≥–æ –∏–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —á–∞—Å—Ç–µ–π. –ú–∞–∫—Ä–æ—Å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ nlmsghdr –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏, —Å–æ—Å—Ç–æ—è—â–µ–º –∏–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —á–∞—Å—Ç–µ–π. –í—ã–∑—ã–≤–∞—é—â–µ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –≤ —Ç–µ–∫—É—â–µ–º –∑–∞–≥–æ–ª–æ–≤–∫–µ nlmsghdr —Ñ–ª–∞–≥–∞¬†"),n("strong",[t._v("NLMSG_DONE")]),t._v("¬†‚Äì —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ NULL –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è. –í—Ç–æ—Ä–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä –∑–∞–¥–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –æ—Å—Ç–∞–≤—à–µ–π—Å—è —á–∞—Å—Ç–∏ –±—É—Ñ–µ—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏—è. –ú–∞–∫—Ä–æ—Å —É–º–µ–Ω—å—à–∞–µ—Ç —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞ —Ä–∞–∑–º–µ—Ä –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è."),n("br"),t._v(" "),n("strong",[t._v("NLMSG_OK")]),t._v("¬†‚Äî –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ true –µ—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –±—ã–ª–æ —É—Å–µ—á–µ–Ω–æ –∏ –µ–≥–æ —Ä–∞–∑–±–æ—Ä–∫–∞ –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ."),n("br"),t._v(" "),n("strong",[t._v("NLMSG_PAYLOAD")]),t._v("¬†‚Äî –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö (payload), —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º nlmsghdr.")]),t._v(" "),n("h3",{attrs:{id:"–æ—Ç-—Ç–µ–æ—Ä–∏–∏-–∫-–ø—Ä–∞–∫—Ç–∏–∫–µ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#–æ—Ç-—Ç–µ–æ—Ä–∏–∏-–∫-–ø—Ä–∞–∫—Ç–∏–∫–µ"}},[t._v("#")]),t._v(" –û—Ç —Ç–µ–æ—Ä–∏–∏ –∫ –ø—Ä–∞–∫—Ç–∏–∫–µ.")]),t._v(" "),n("p",[t._v("–ù—É —á—Ç–æ –∂–µ. –î—É–º–∞—é, —á—Ç–æ —è —É–∂–µ —É—Å–ø–µ–ª –Ω–∞–¥–æ–µ—Å—Ç—å —Å–æ —Å–∫—É—á–Ω–æ–π —Ç–µ–æ—Ä–∏–µ–π üòÉ –ú–æ–∂–µ—Ç –±—ã—Ç—å —á—Ç–æ-—Ç–æ –ø–æ–∫–∞–∑–∞–ª–æ—Å—å –∑–∞–ø—É—Ç–∞–Ω–Ω—ã–º –∏–ª–∏ –Ω–µ –ø–æ–Ω—è—Ç–Ω—ã–º ‚Äî –ø–æ—Å—Ç–∞—Ä–∞—é—Å—å —Ä–∞–∑–∂–µ–≤–∞—Ç—å –≤—Å–µ –≤ –Ω–∞–≥–ª—è–¥–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö, —Ç–∞–º –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –Ω–µ—Ç –Ω–∏—á–µ–≥–æ —Å–ª–æ–∂–Ω–æ–≥–æ."),n("br"),t._v("\n–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–æ –æ–±–µ—â–∞–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –≤ —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö –∏ —Ç–∞–±–ª–∏—Ü–µ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏."),n("br"),t._v("\n–í –ø—Ä–∏–º–µ—Ä–µ –≤–≤–µ–¥–µ–Ω —Ü–µ–ª—ã–π —Ä—è–¥ –Ω–æ–≤—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä:")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("struct iovec\n{\n\tvoid *iov_base;     \t// –±—É—Ñ–µ—Ä –¥–∞–Ω–Ω—ã—Ö\n\t__kernel_size_t iov_len;  // —Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö\n};\n")])])]),n("p",[t._v("–≠—Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–ª—É–∂–∏—Ç —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º –ø–æ–ª–µ–∑–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö —á–µ—Ä–µ–∑ —Å–æ–∫–µ—Ç—ã netlink. –ü–æ–ª—é iov_base –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –±–∞–π—Ç–æ–≤—ã–π –º–∞—Å—Å–∏–≤. –ò–º–µ–Ω–Ω–æ –≤ —ç—Ç–æ—Ç –±–∞–π—Ç–æ–≤—ã–π –º–∞—Å—Å–∏–≤ –±—É–¥—É—Ç –∑–∞–ø–∏—Å–∞–Ω—ã –¥–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è.")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("struct msghdr {\n    void   *msg_name;   // –∞–¥—Ä–µ—Å –∫–ª–∏–µ–Ω—Ç–∞ (–∏–º—è —Å–æ–∫–µ—Ç–∞)\n    int     \tmsg_namelen;    // –¥–ª–∏–Ω–∞ –∞–¥—Ä–µ—Å–∞\n    struct iovec *msg_iov;    // —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –±–ª–æ–∫ –¥–∞–Ω–Ω—ã—Ö\n    __kernel_size_t msg_iovlen; // –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–ª–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö\n    void    *msg_control;  // –º–∞–≥–∏—á–µ—Å–∫–æ–µ —á–∏—Å–ª–æ –¥–ª—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞, –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –¥–∞–Ω–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö\n    __kernel_size_t msg_controllen; // –¥–ª–∏–Ω–∞ –ø—Ä–µ–¥–∏–¥—É—â–µ–≥–æ –ø–æ–ª—è –¥–∞–Ω–Ω—ã—Ö\n    unsigned  msg_flags;\t// —Ñ–ª–∞–≥–∏ —Å–æ–æ–±—â–µ–Ω–∏—è\n};\n")])])]),n("p",[t._v("–≠—Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Å–æ–∫–µ—Ç. –û–Ω–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤ —Å–µ–±–µ —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –±–ª–æ–∫ –ø–æ–ª–µ–∑–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö –±–ª–æ–∫–æ–≤, –∞ —Ç–∞–∫ –∂–µ —Ä—è–¥ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ–ª–∞–≥–æ–≤ –∏ –ø–æ–ª–µ–π, –ø—Ä–∏—à–µ–¥—à–∏—Ö, –ø–æ –±–æ–ª—å—à–µ–π —á–∞—Å—Ç–∏, —Å –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã BSD.")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("struct ifinfomsg\n{\n    unsigned char  ifi_family;  // —Å–µ–º–µ–π—Å—Ç–≤–æ (AF_UNSPEC)\n    unsigned short ifi_type;    // —Ç–∏–ø —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞\n    int            ifi_index;   // –∏–Ω–¥–µ–∫—Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞\n    unsigned int   ifi_flags;   // —Ñ–ª–∞–≥–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞\n    unsigned int   ifi_change;  // –º–∞—Å–∫–∞ —Å–º–µ–Ω—ã, –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –±—É–¥—É—â–µ–º –∏ –≤—Å–µ–≥–¥–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ä–∞–≤–Ω–æ 0xFFFFFFFF\n};\n")])])]),n("p",[t._v("–≠—Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ç–µ–≤–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –µ–≥–æ —Å–µ–º–µ–π—Å—Ç–≤–∞, —Ç–∏–ø–∞, –∏–Ω–¥–µ–∫—Å–∞ –∏ —Ñ–ª–∞–≥–æ–≤.")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("struct ifaddrmsg\n{\n    unsigned char  ifa_family;    // –¢–∏–ø –∞–¥—Ä–µ—Å–∞ (AF_INET –∏–ª–∏ AF_INET6)\n    unsigned char  ifa_prefixlen; // –î–ª–∏–Ω–∞ –ø—Ä–µ—Ñ–∏–∫—Å–∞ –∞–¥—Ä–µ—Å–∞ (–¥–ª–∏–Ω–∞ —Å–µ—Ç–µ–≤–æ–π –º–∞—Å–∫–∏)\n    unsigned char  ifa_flags;     // –§–ª–∞–≥–∏ –∞–¥—Ä–µ—Å–∞\n    unsigned char  ifa_scope;     // –û–±–ª–∞—Å—Ç—å –∞–¥—Ä–µ—Å–∞\n    int            ifa_index;     // –ò–Ω–¥–µ–∫—Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, —Ä–∞–≤–µ–Ω –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–º—É –ø–æ–ª—é –≤ ifinfomsg\n};\n")])])]),n("p",[t._v("–≠—Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–ª—É–∂–∏—Ç –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ç–µ–≤–æ–≥–æ –∞–¥—Ä–µ—Å–∞, –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–≥–æ –Ω–∞ —Å–µ—Ç–µ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("struct rtattr\n{\n    unsigned short rta_len;     // –î–ª–∏–Ω–∞ –æ–ø—Ü–∏–∏\n    unsigned short rta_type;    // –¢–∏–ø –æ–ø—Ü–∏–∏\n    /* –¥–∞–Ω–Ω—ã–µ */ \n}\n")])])]),n("p",[t._v("–≠—Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–ª—É–∂–∏—Ç –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–∞–∫–æ–≥–æ –ª–∏–±–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∏–ª–∏ –∞–¥—Ä–µ—Å–∞.")]),t._v(" "),n("h5",{attrs:{id:"–∏—Å—Ö–æ–¥–Ω—ã–∏-–∫–æ–¥-–º–æ–Ω–∏—Ç–æ—Ä"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#–∏—Å—Ö–æ–¥–Ω—ã–∏-–∫–æ–¥-–º–æ–Ω–∏—Ç–æ—Ä"}},[t._v("#")]),t._v(" –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥, –º–æ–Ω–∏—Ç–æ—Ä")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('#include <errno.h>\n#include <stdio.h>\n#include <memory.h>\n#include <net/if.h>\n#include <arpa/inet.h>\n#include <sys/socket.h>\n#include <linux/rtnetlink.h>\n\n// –Ω–µ–±–æ–ª—å—à–∞—è –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è —Å –ø–æ–º–æ—â—å—é –º–∞–∫—Ä–∞—Å–æ–≤ netlink —Ä–∞–∑–±–∏—Ä–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ \n// –ø–æ–º–µ—â–∞–µ—Ç –±–ª–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –º–∞—Å—Å–∏–≤ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ rtattr\nvoid parseRtattr(struct rtattr *tb[], int max, struct rtattr *rta, int len)\n{\n\tmemset(tb, 0, sizeof(struct rtattr *) * (max + 1));\n\n\twhile (RTA_OK(rta, len)) {\t// –ø–æ–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –∑–∞–∫–æ–Ω—á–∏–ª–æ—Å—å\n\t\tif (rta->rta_type <= max) {\n\t\t\ttb[rta->rta_type] = rta;\t//—á–∏—Ç–∞–µ–º –∞—Ç—Ä–∏–±—É—Ç\n\t\t}\n\t\trta = RTA_NEXT(rta,len);\t// –ø–æ–ª—É—á–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–π –∞—Ç—Ä–∏–±—É—Ç\n\t}\n}\n\nint main()\n{\n\tint fd = socket(AF_NETLINK, SOCK_RAW, NETLINK_ROUTE);\t// —Å–æ–∑–¥–∞–µ–º –Ω—É–∂–Ω—ã–π —Å–æ–∫–µ—Ç\n\n\tif (fd < 0) {\n\t\tprintf("–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è netlink —Å–æ–∫–µ—Ç–∞: %s", (char*)strerror(errno));\n\t\treturn 1;\n\t}\n\n\tstruct sockaddr_nl\tlocal;\t// –ª–æ–∫–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å\n\tchar buf[8192];\t\t\t\t// –±—É—Ñ–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è\n\tstruct iovec iov;\t\t\t// —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏—è\n\tiov.iov_base = buf;\t\t\t// —É–∫–∞–∑—ã–≤–∞–µ–º buf –≤ –∫–∞—á–µ—Å—Ç–≤–µ –±—É—Ñ–µ—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è iov\n\tiov.iov_len = sizeof(buf);\t// —É–∫–∞–∑—ã–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–∞\n\n\tmemset(&local, 0, sizeof(local));\t// –æ—á–∏—â–∞–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É\n\n\tlocal.nl_family = AF_NETLINK;\t\t// —É–∫–∞–∑—ã–≤–∞–µ–º —Å–µ–º–µ–π—Å—Ç–≤–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞\n\tlocal.nl_groups = \tRTMGRP_LINK | RTMGRP_IPV4_IFADDR | RTMGRP_IPV4_ROUTE;\t// —É–∫–∞–∑—ã–≤–∞–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –≥—Ä—É–ø–ø—ã\n\tlocal.nl_pid = getpid();\t//–≤ –∫–∞—á–µ—Å—Ç–≤–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ —É–∫–∞–∑—ã–≤–∞–µ–º –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è\n\n\t// —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏—è netlink - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –≤—Å–µ –ø–æ–ª—è\n\tstruct msghdr msg;\t\n\t{\n\t\tmsg.msg_name = &local;\t\t\t\t\t// –∑–∞–¥–∞–µ–º –∏–º—è - —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∞–¥—Ä–µ—Å–∞\n\t\tmsg.msg_namelen = sizeof(local);\t\t// —É–∫–∞–∑—ã–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä\n\t\tmsg.msg_iov = &iov;\t\t\t\t\t\t// —É–∫–∞–∑—ã–≤–∞–µ–º –≤–µ–∫—Ç–æ—Ä –¥–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è\n\t\tmsg.msg_iovlen = 1;\t\t\t\t\t\t// –∑–∞–¥–∞–µ–º –¥–ª–∏–Ω—É –≤–µ–∫—Ç–æ—Ä–∞\n\t}\t\n\n\tif (bind(fd, (struct sockaddr*)&local, sizeof(local)) < 0) {\t\t// —Å–≤—è–∑—ã–≤–∞–µ–º—Å—è —Å —Å–æ–∫–µ—Ç–æ–º\n\t\tprintf("–û—à–∏–±–∫–∞ —Å–≤—è–∑—ã–≤–∞–Ω–∏—è —Å netlink —Å–æ–∫–µ—Ç–æ–º: %s", (char*)strerror(errno));\n\t\tclose(fd);\n\t\treturn 1;\n\t}\t\n\n\t// —á–∏—Ç–∞–µ–º –∏ —Ä–∞–∑–±–∏—Ä–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ —Å–æ–∫–µ—Ç–∞\n\twhile (1) {\n\t\tssize_t status = recvmsg(fd, &msg, MSG_DONTWAIT);\t// –ø–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞ bind() –º—ã –º–æ–∂–µ–º –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –≥—Ä—É–ø–ø\n\n\t\t//\t–Ω–µ–±–æ–ª—å—à–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏\n\t\tif (status < 0) {\n\t\t\tif (errno == EINTR || errno == EAGAIN)\n\t\t\t{\n\t\t\t\tusleep(250000);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tprintf("–û—à–∏–±–∫–∞ –ø—Ä–∏–µ–º–∞ —Å–æ–æ–±—â–µ–Ω–∏—è netlink: %s", (char*)strerror(errno));\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (msg.msg_namelen != sizeof(local)) {\t//–ø—Ä–æ–≤—Ä—è–µ–º –¥–ª–∏–Ω—É –∞–¥—Ä–µ—Å–∞, –º–∞–ª–æ –ª–∏ :)\n\t\t\tprintf("–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –¥–ª–∏–Ω–∞ –∞–¥—Ä–µ—Å–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è");\n\t\t\tcontinue;\n\t\t}\n\n\t\t// —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ —Ä–∞–∑–±–æ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è\n\t\tstruct nlmsghdr *h; // —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏—è\n\n\t\tfor (h = (struct nlmsghdr*)buf; status >= (ssize_t)sizeof(*h); ) {\t// –¥–ª—è –≤—Å–µ—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π\n\t\t\tint len = h->nlmsg_len;\t\t// –¥–ª–∏–Ω–∞ –≤—Å–µ–≥–æ –±–ª–æ–∫–∞\n\t\t\tint l = len - sizeof(*h);\t// –¥–ª–∏–Ω–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è\n\t\t\tchar *ifName;\t\t\t\t// –∏–º—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è\n\n\t\t\tif ((l < 0) || (len > status)) {\n\t\t\t\tprintf("–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –¥–ª–∏–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è: %i", len);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// —Å–º–æ—Ç—Ä–∏–º —Ç–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è\n\t\t\tif ((h->nlmsg_type == RTM_NEWROUTE) || (h->nlmsg_type == RTM_DELROUTE)) {\t// –µ—Å–ª–∏ —ç—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–æ—É—Ç–æ–≤ - –ø–µ—á–∞—Ç–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ\n\t\t\t\tprintf("–ü—Ä–æ–∏–∑–æ—à–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ç–∞–±–ª–∏—Ü–µ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏\\n");\t\n\t\t\t} else {\t// –≤ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö –Ω–∞—á–∏–Ω–∞–µ–º –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è\n\t\t\t\tchar *ifUpp;\t\t// —Å–æ—Å—Ç–æ—è–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞\n\t\t\t\tchar *ifRunn;\t\t// —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è\n\t\t\t\tstruct ifinfomsg *ifi;  // —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—É, —Å–æ–¥–µ—Ä–∂–∞—â—é—é –¥–∞–Ω–Ω—ã–µ –æ —Å–µ—Ç–µ–≤–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏\n\t\t\t\tstruct rtattr *tb[IFLA_MAX + 1];\t// –º–∞—Å—Å–∏–≤ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, IFLA_MAX –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –≤ rtnetlink.h\n\n\t\t\t\tifi\t= (struct ifinfomsg*) NLMSG_DATA(h);\t// –ø–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–µ—Ç–µ–≤–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏ –≤ –∫–æ—Ä–æ–º –ø—Ä–æ–∏–∑–æ—à–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è\n\n\t\t\t\tparseRtattr(tb, IFLA_MAX, IFLA_RTA(ifi), h->nlmsg_len);\t// –ø–æ–ª—É—á–∞–µ–º –∞—Ç—Ä–∏–±—É—Ç—ã —Å–µ—Ç–µ–≤–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è\n\t\t\t\t\n\t\t\t\tif (tb[IFLA_IFNAME]) {\t// –ø—Ä–æ–≤–µ—Ä—è–µ–º –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –∞—Ç—Ä–∏–±—É—Ç–∞, —Ö—Ä–∞–Ω—è—â–µ–≥–æ –∏–º—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è\n\t\t\t\t\tifName = (char*)RTA_DATA(tb[IFLA_IFNAME]); //–ø–æ–ª—É—á–∞–µ–º –∏–º—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è\n\t\t\t\t}\n\n\t\t\t\tif (ifi->ifi_flags & IFF_UP) { // –ø–æ–ª—É—á–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ñ–ª–∞–≥–∞ UP –¥–ª—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è\n\t\t\t\t\tifUpp = (char*)"UP";\n\t\t\t\t} else {\n\t\t\t\t\tifUpp = (char*)"DOWN";\n\t\t\t\t}\n\n\t\t\t\tif (ifi->ifi_flags & IFF_RUNNING) { // –ø–æ–ª—É—á–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ñ–ª–∞–≥–∞ RUNNING –¥–ª—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è\n\t\t\t\t\tifRunn = (char*)"RUNNING";\n\t\t\t\t} else {\n\t\t\t\t\tifRunn = (char*)"NOT RUNNING";\n\t\t\t\t}\n\n\t\t\t\tchar ifAddress[256];\t// —Å–µ—Ç–µ–≤–æ–π –∞–¥—Ä–µ—Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞\n\t\t\t\tstruct ifaddrmsg *ifa; // —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–æ–¥–µ—Ä–∂–∞—â—É—é –¥–∞–Ω–Ω—ã–µ –æ —Å–µ—Ç–µ–≤–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ\n\t\t\t\tstruct rtattr *tba[IFA_MAX+1];\t// –º–∞—Å—Å–∏–≤ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –∞–¥—Ä–µ—Å–∞\n\n\t\t\t\tifa = (struct ifaddrmsg*)NLMSG_DATA(h);\t// –ø–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è\n\n\t\t\t\tparseRtattr(tba, IFA_MAX, IFA_RTA(ifa), h->nlmsg_len);\t// –ø–æ–ª—É—á–∞–µ–º –∞—Ç—Ä–∏–±—É—Ç—ã —Å–µ—Ç–µ–≤–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è\n\n\t\t\t\tif (tba[IFA_LOCAL]) {  // –ø—Ä–æ–≤–µ—Ä—è–µ–º –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å —É–∫–∞–∑–∞—Ç–µ–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∞–¥—Ä–µ—Å–∞\n\t\t\t\t\tinet_ntop(AF_INET, RTA_DATA(tba[IFA_LOCAL]), ifAddress, sizeof(ifAddress));\t// –ø–æ–ª—É—á–∞–µ–º IP –∞–¥—Ä–µ—Å\n\t\t\t\t}\n\n\t\t\t\tswitch (h->nlmsg_type) {\t//—á—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ\n\t\t\t\t\tcase RTM_DELADDR:\n\t\t\t\t\t\tprintf("–ë—ã–ª —É–¥–∞–ª–µ–Ω –∞–¥—Ä–µ—Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ %s\\n", ifName);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase RTM_DELLINK:\n\t\t\t\t\t\tprintf("–ë—ã–ª —É–¥–∞–ª–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å %s\\n", ifName);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase RTM_NEWLINK:\n\t\t\t\t\t\tprintf("–ù–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å %s, —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ %s %s\\n", ifName, ifUpp, ifRunn);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase RTM_NEWADDR:\n\t\t\t\t\t\tprintf("–ë—ã–ª –¥–æ–±–∞–≤–ª–µ–Ω –∞–¥—Ä–µ—Å –¥–ª—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ %s: %s\\n", ifName, ifAddress);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tstatus -= NLMSG_ALIGN(len);\t// –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–µ–º—Å—è –ø–æ –¥–ª–∏–Ω–µ —Å–æ–æ–±—â–µ–Ω–∏—è (–µ—Å–ª–∏ —ç—Ç–æ–≥–æ –Ω–µ —Å–¥–µ–ª–∞—Ç—å - –±—É–¥–µ—Ç –æ—á–µ–Ω—å –ø–ª–æ—Ö–æ, –º–æ–∂–µ—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å :))\n\n\t\t\th = (struct nlmsghdr*)((char*)h + NLMSG_ALIGN(len));\t//–ø–æ–ª—É—á–∞–µ–º —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ\n\t\t}\n\n\t\tusleep(250000);\t// –Ω–µ–º–Ω–æ–∂–∫–æ —Å–ø–∏–º, —á—Ç–æ –±—ã –Ω–µ –æ—á–µ–Ω—å –≥—Ä—É–∑–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä\n\t}\n\n\tclose(fd);\t// –∑–∞–∫—Ä—ã–≤–∞–µ–º –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä —Å–æ–∫–µ—Ç–∞\n\n\treturn 0;\n}\n')])])]),n("p",[t._v("–ö–æ–º–ø–∏–ª—è—Ü–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã:"),n("br"),t._v(" "),n("strong",[n("code",[t._v("gcc monitor.c -o monitor")])])]),t._v(" "),n("p",[t._v("–ò —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã:"),n("br"),t._v(" "),n("img",{attrs:{src:"http://habrastorage.org/r/w1560/storage/2c9f5070/71cea516/515d4925/340045ea.png",alt:""}})]),t._v(" "),n("p",[t._v("–ü–æ—è—Å–Ω–µ–Ω–∏—è –∫ –∫–æ–¥—É."),n("br"),t._v("\n–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã –º—ã —Å–æ–∑–¥–∞–µ–º netlink —Å–æ–∫–µ—Ç –∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º —É—Å–ø–µ—à–Ω–æ—Å—Ç—å –µ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è. –î–∞–ª–µ–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∞–¥—Ä–µ—Å–∞. –¢—É—Ç –º—ã —É–∫–∞–∑—ã–≤–∞–µ–º –≥—Ä—É–ø–ø—ã —Å–æ–æ–±—â–µ–Ω–∏–π, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ —Ö–æ—Ç–∏–º –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è: RTMGRP_LINK, RTMGRP_IPV4_IFADDR, RTMGRP_IPV4_ROUTE."),n("br"),t._v("\n–¢–∞–∫ –∂–µ –æ–±—ä—è–≤–ª—è–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–æ–æ–±—â–µ–Ω–∏—è –∏ —Å–≤—è–∑—ã–≤–∞–µ–º —Å –Ω–µ–π –æ–¥–∏–Ω –±–ª–æ–∫ –¥–∞–Ω–Ω—ã—Ö."),n("br"),t._v("\n–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ —Å —Å–æ–∫–µ—Ç–æ–º, —Å –ø–æ–º–æ—â—å—é bind(). –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –º—ã —Å—Ç–∞–Ω–æ–≤–∏–º—Å—è –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–º–∏ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –≥—Ä—É–ø–ø. –ú–æ–∂–Ω–æ –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ —Å–æ–∫–µ—Ç."),n("br"),t._v("\n–î–∞–ª–µ–µ —Å–ª–µ–¥—É–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª –ø—Ä–∏–µ–º–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ —Å–æ–∫–µ—Ç–∞. –¢.–∫. –ø—Ä–∏–Ω–∏–º–∞–µ–º—ã–π –±–ª–æ–∫ –¥–∞–Ω–Ω—ã—Ö –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∏ –∞—Å—Å–æ—Ü–∏–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å –Ω–∏–º–∏ –¥–∞–Ω–Ω—ã—Ö ‚Äî –Ω–∞—á–∏–Ω–∞–µ–º –ø–µ—Ä–µ–±–∏—Ä–∞—Ç—å, —Å –ø–æ–º–æ—â—å—é netlink –º–∞–∫—Ä–æ—Å–æ–≤ –≤—Å–µ –ø—Ä–∏–Ω—è—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ."),n("br"),t._v("\n–ö–∞–∂–¥–æ–µ –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–æ –ø–æ —É–∫–∞–∑–∞—Ç–µ–ª—é struct nlmsghdr *h."),n("br"),t._v("\n–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —Ä–∞–∑–±–∏—Ä–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ. –°–º–æ—Ç—Ä–∏–º –Ω–∞ –ø–æ–ª–µ nlmsg_type –∏ –≤—ã—è—Å–Ω—è–µ–º, —á—Ç–æ –∂–µ –∑–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –∫ –Ω–∞–º –ø—Ä–∏–µ—Ö–∞–ª–æ. –ï—Å–ª–∏ –æ–Ω–æ —Å–≤—è–∑–∞–Ω–æ —Å —Ç–∞–±–ª–∏—Ü–µ–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ ‚Äî –ø–µ—á–∞—Ç–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –∏–¥–µ–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é. –ê –µ—Å–ª–∏ –Ω–µ—Ç ‚Äî –Ω–∞—á–∏–Ω–∞–µ–º –¥–µ—Ç–∞–ª—å–Ω–æ —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è."),n("br"),t._v("\n–û–±—ä—è–≤–ª—è—é—Ç—Å—è –º–∞—Å—Å–∏–≤—ã –æ–ø—Ü–∏–π rtattr, –∫—É–¥–∞ –±—É–¥—É—Ç —Å–∫–ª–∞–¥—ã–≤–∞—Ç—å—Å—è –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ. –ó–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ —ç—Ç–∏—Ö –¥–∞–Ω–Ω—ã—Ö –æ—Ç–≤–µ—á–∞–µ—Ç –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è parseRtattr. –û–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–∞–∫—Ä–æ—Å—ã netlink –∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç —É–∫–∞–∑–∞–Ω–Ω—ã–π –º–∞—Å—Å–∏–≤ –≤—Å–µ–º–∏ –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏ –∏–∑ –±–ª–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä—ã ifinfomsg –∏–ª–∏ ifaddrmsg."),n("br"),t._v("\n–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –º—ã –ø–æ–ª—É—á–∏–ª–∏ –º–∞—Å—Å–∏–≤—ã, –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏ ‚Äî –º–æ–∂–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å —Å —ç—Ç–∏–º –∑–Ω–∞—á–µ–Ω–∏—è–º–∏, –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Ö, –ø–µ—á–∞—Ç–∞—Ç—å."),n("br"),t._v("\n–î–æ—Å—Ç—É–ø –∫ –∫–∞–∂–¥–æ–º—É –∞—Ç—Ä–∏–±—É—Ç—É –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –ø–æ –µ–≥–æ –∏–Ω–¥–µ–∫—Å—É. –í—Å–µ –∏–Ω–¥–µ–∫—Å—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö netlink –∏ –ø—Ä–æ–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã."),n("br"),t._v("\n–í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–ª–µ–¥—É—é—â–∏–µ –∏–Ω–¥–µ–∫—Å—ã:"),n("br"),t._v("\nIFLA_IFNAME ‚Äî –∏–Ω–¥–µ–∫—Å –∞—Ç—Ä–∏–±—É—Ç–∞ —Å –∏–º–µ–Ω–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞."),n("br"),t._v("\nIFA_LOCAL ‚Äî –∏–Ω–¥–µ–∫—Å –∞—Ç—Ä–∏–±—É—Ç–∞ —Å –ª–æ–∫–∞–ª—å–Ω—ã–º IP –∞–¥—Ä–µ—Å–æ–º."),n("br"),t._v("\n–ü–æ—Å–ª–µ –≤—Å–µ–≥–æ —ç—Ç–æ–≥–æ –º—ã –æ–±–ª–∞–¥–∞–µ–º –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ç–æ–º, —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –∏ –º–æ–∂–µ–º –ø–µ—á–∞—Ç–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –Ω–∞ —ç–∫—Ä–∞–Ω.")]),t._v(" "),n("p",[t._v("–í–æ—Ç –∏ –≤—Å–µ. –û—á–µ–Ω—å –Ω–∞–¥–µ—é—Å—å, —á—Ç–æ –¥–∞–Ω–Ω—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª –±—É–¥–µ—Ç –ø–æ–ª–µ–∑–µ–Ω –∫–æ–º—É-—Ç–æ."),n("br"),t._v("\n–ï—Å–ª–∏ –±—É–¥–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∂–µ–ª–∞—é—â–∏—Ö (–±–æ–ª—å—à–µ –æ–¥–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞:) ) ‚Äî –º–æ–≥—É –Ω–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –∏ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –º–æ–¥—É–ª–µ–º —è–¥—Ä–∞ –∏–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é —Ä–∞–±–æ—Ç—ã —Å IPv6.")]),t._v(" "),n("p",[t._v("–ü—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ —Å—Ç–∞—Ç—å–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–æ—Å—å:"),n("br"),t._v("\n1.¬†"),n("a",{attrs:{href:"http://tools.ietf.org/html/rfc3549",target:"_blank",rel:"noopener noreferrer"}},[t._v("tools.ietf.org/html/rfc3549"),n("OutboundLink")],1),n("br"),t._v("\n2.¬†"),n("a",{attrs:{href:"http://www.linuxjournal.com/article/7356",target:"_blank",rel:"noopener noreferrer"}},[t._v("www.linuxjournal.com/article/7356"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–Ω–∏–º–∞–Ω–∏–µ.")])])}),[],!1,null,null,null);n.default=s.exports}}]);
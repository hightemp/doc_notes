(window.webpackJsonp=window.webpackJsonp||[]).push([[283],{553:function(e,r,t){"use strict";t.r(r);var n=t(14),_=Object(n.a)({},(function(){var e=this,r=e._self._c;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("p",[e._v("https://jenyay.net/Programming/Cxfreeze")]),e._v(" "),r("h1",{attrs:{id:"создание-запускаемых-фаилов-из-скриптов-на-языке-python-с-помощью-cx-freeze"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#создание-запускаемых-фаилов-из-скриптов-на-языке-python-с-помощью-cx-freeze"}},[e._v("#")]),e._v(" Создание запускаемых файлов из скриптов на языке Python с помощью cx_Freeze")]),e._v(" "),r("p",[r("img",{attrs:{src:"https://jenyay.net/uploads/Programming/Cxfreeze/cx_freeze_cover_site.png",alt:""}})]),e._v(" "),r("h3",{attrs:{id:"содержание"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#содержание"}},[e._v("#")]),e._v(" Содержание")]),e._v(" "),r("ol",[r("li",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze#intro",target:"_blank",rel:"noopener noreferrer"}},[e._v("Введение"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze#install",target:"_blank",rel:"noopener noreferrer"}},[e._v("Установка"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze#example_01",target:"_blank",rel:"noopener noreferrer"}},[e._v("Первый пример"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze#msvc",target:"_blank",rel:"noopener noreferrer"}},[e._v("Добавление файлов Microsoft Visual C++ Redistributable"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze#clean",target:"_blank",rel:"noopener noreferrer"}},[e._v("Избавляемся от лишних модулей"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze#renames",target:"_blank",rel:"noopener noreferrer"}},[e._v("Наводим красоту в сборке"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze#add",target:"_blank",rel:"noopener noreferrer"}},[e._v("Добавление модулей в сборку"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze#several",target:"_blank",rel:"noopener noreferrer"}},[e._v("Сборка нескольких запускаемых файлов"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze#add_files",target:"_blank",rel:"noopener noreferrer"}},[e._v("Добавление дополнительных файлов в сборку"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze#gui",target:"_blank",rel:"noopener noreferrer"}},[e._v("Создание приложений с графическим интерфейсом"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze#icon",target:"_blank",rel:"noopener noreferrer"}},[e._v("Установка иконки приложения"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze#msi",target:"_blank",rel:"noopener noreferrer"}},[e._v("Создание инсталятора MSI"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze#cxfreeze_quickstart",target:"_blank",rel:"noopener noreferrer"}},[e._v("Скрипт cxfreeze-quickstart для создания файла setup.py"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze#outro",target:"_blank",rel:"noopener noreferrer"}},[e._v("Заключение"),r("OutboundLink")],1)])]),e._v(" "),r("h3",{attrs:{id:"_1-введение"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-введение"}},[e._v("#")]),e._v(" 1. Введение")]),e._v(" "),r("p",[e._v("Python - отличный язык программирования для широкого круга задач, начиная от автоматизации рутинных действий до создания web- или настольных приложений с графическим интерфейсом. Но Python - интерпретируемый язык, а это значит, что если вы хотите распространять ваше приложение, то у пользователя должен быть установлен интерпретатор, на вход которого он должен подать исходные коды вашей программы. Если вы разрабатываете приложение под Linux или основная масса пользователей вашей программы - айтишники (программисты, админы и им сочувствующие), то требование установить интерпретатор Python скорее всего их не испугает. А вот заставлять устанавливать Python, а, возможно, еще и дополнительные библиотеки обычных пользователей - сомнительная идея.")]),e._v(" "),r("p",[e._v('Однако, Python хорош еще тем, что ядро интерпретатора достаточно компактное, оно умещается в единственную dll-ку размером 3.5 МБ + дополнительные модули. Это позволяет сделать такой хак: скопируем в отдельную папку файл PythonXX.dll (где XX - номер версии интерпретатора Python) и также скомпилированные файлы *.pyc, созданные из исходных файлов вашего приложения и используемых модулей, а затем рядом с этими файлами создадим запускаемый файл .exe, который будет подменять и перенаправлять вызовы интерпретатора в скопированную dll-ку (это очень грубое представление работы создаваемого файла .exe, но для простоты оставим так). Набор этих файлов можно передавать конечному пользователю, он запустит запускаемый файл и даже не будет догадываться, что "под капотом" работает интерпретатор Python.')]),e._v(" "),r("p",[e._v("Именно это и делает библиотека "),r("a",{attrs:{href:"https://anthony-tuininga.github.io/cx_Freeze/",target:"_blank",rel:"noopener noreferrer"}},[e._v("cx_Freeze"),r("OutboundLink")],1),e._v(", причем такой прием эта библиотека умеет применять для Windows, Linux и Mac OS. Эта статья будет посвящена использованию данной библиотеки. На простейших примерах мы рассмотрим основы работы с этой библиотекой cx_Freeze и различные сценарии ее использования.")]),e._v(" "),r("p",[e._v("Все примеры в этой статье тестировались на Python 3.6 и cx_Freeze 5.0.2. cx_Freeze пока еще умеет работать с Python 2.7, но судя по коммитам на "),r("a",{attrs:{href:"https://github.com/anthony-tuininga/cx_Freeze",target:"_blank",rel:"noopener noreferrer"}},[e._v("github"),r("OutboundLink")],1),e._v(", следующая версия cx_Freeze 6 будет работать только с Python 3.5 и выше.")]),e._v(" "),r("h3",{attrs:{id:"_2-установка"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-установка"}},[e._v("#")]),e._v(" 2. Установка")]),e._v(" "),r("p",[e._v("Устанавливается cx_Freeze стандартно через pip. Если вы хотите установить cx_Freeze глобально для всех пользователей системы, то нужно выполнить в консоли команду")]),e._v(" "),r("p",[e._v("pip install cx_freeze")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=1",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("Разумеется, для этого у вас должны быть права администратора, и консоль должна быть запущена от администратора.")]),e._v(" "),r("p",[e._v("Или вы можете установить cx_Freeze только для вашего пользователя, тогда админские права не понадобятся:")]),e._v(" "),r("p",[e._v("pip install cx_freeze --user")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=2",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("В реальном проекте идеологически более верно установить cx_Freeze внутри virtualenv, но в этом случае могут быть некоторые проблемы ("),r("a",{attrs:{href:"https://github.com/anthony-tuininga/cx_Freeze/issues/275",target:"_blank",rel:"noopener noreferrer"}},[e._v("например"),r("OutboundLink")],1),e._v(").")]),e._v(" "),r("h3",{attrs:{id:"_3-первыи-пример"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-первыи-пример"}},[e._v("#")]),e._v(" 3. Первый пример")]),e._v(" "),r("p",[e._v("Теперь, когда cx_Freeze установлен, можно приступать к изучению возможностей этой библиотеки. Все примеры из статьи вы можете найти на "),r("a",{attrs:{href:"https://github.com/Jenyay/cx_freeze_examples",target:"_blank",rel:"noopener noreferrer"}},[e._v("github"),r("OutboundLink")],1),e._v(". Примеры последовательно пронумерованы в том порядке, как они описаны в статье. Приложение, которое мы будем упаковывать в запускаемые файлы, будет называться "),r("em",[e._v("example.py")]),e._v(".")]),e._v(" "),r("p",[e._v("Для начала создадим простейший python-скрипт с именем "),r("em",[e._v("example.py")]),e._v(", который не импортирует никакие модули ("),r("a",{attrs:{href:"https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2001",target:"_blank",rel:"noopener noreferrer"}},[e._v("Example 01"),r("OutboundLink")],1),e._v(" на github):")]),e._v(" "),r("h1",{attrs:{id:"example-py"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#example-py"}},[e._v("#")]),e._v(" example.py")]),e._v(" "),r("h1",{attrs:{id:"coding-utf-8"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#coding-utf-8"}},[e._v("#")]),e._v(" coding: utf-8")]),e._v(" "),r("p",[e._v("if "),r("strong",[e._v("name")]),e._v(" == '"),r("strong",[e._v("main")]),e._v("':"),r("br"),e._v("\n    print('Hello world!')")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=3",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("Скорее всего нет смысла описывать, что делает данный скрипт. 😃 Желающие убедиться, что скрипт работает, могут выполнить команду:")]),e._v(" "),r("p",[e._v("python example.py")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=4",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("Если у вас установлено несколько версий Python, то под Windows можно воспользоваться утилитой "),r("em",[e._v("py")]),e._v(" и явно указать номер версии интерпретатора:")]),e._v(" "),r("p",[e._v("py -3.6 example.py")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=5",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("или")]),e._v(" "),r("p",[e._v("py -3 example.py")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=6",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("Давайте упакуем наш очень полезный скрипт в запускаемый файл, который можно будет передать пользователю. Для этого создадим файл "),r("em",[e._v("setup.py")]),e._v(" со следующим содержимым:")]),e._v(" "),r("h1",{attrs:{id:"coding-utf-8-2"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#coding-utf-8-2"}},[e._v("#")]),e._v(" coding: utf-8")]),e._v(" "),r("p",[e._v("from cx_Freeze import setup, Executable")]),e._v(" "),r("p",[e._v("executables = [Executable('example.py')]")]),e._v(" "),r("p",[e._v("setup(name='hello_world',"),r("br"),e._v("\n      version='0.0.1',"),r("br"),e._v("\n      description='My Hello World App!',"),r("br"),e._v("\n      executables=executables)")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=7",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("Имя скрипта для сборки может быть произвольным, но обычно принято называть его "),r("em",[e._v("setup.py")]),e._v(", и мы будем придерживаться этого правила. Те, кто создавал Python-пакеты с помощью утилит "),r("a",{attrs:{href:"https://docs.python.org/2/library/distutils.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("distutils"),r("OutboundLink")],1),e._v(" или "),r("a",{attrs:{href:"https://pypi.python.org/pypi/setuptools",target:"_blank",rel:"noopener noreferrer"}},[e._v("setuptools"),r("OutboundLink")],1),e._v(", увидят в работе с cx_Freeze что-то знакомое.")]),e._v(" "),r("p",[e._v("Итак, в файле "),r("em",[e._v("setup.py")]),e._v(" мы импортируем из модуля cx_Freeze функцию "),r("em",[e._v("setup")]),e._v(" и класс "),r("em",[e._v("Executable")]),e._v(". Самое главное здесь - это функция "),r("em",[e._v("setup")]),e._v(", в нее передаются все параметры, которые описывают сборку. В параметрах функции "),r("em",[e._v("setup")]),e._v(" мы указываем имя приложения (параметр "),r("em",[e._v("name")]),e._v("), номер версии (параметр "),r("em",[e._v("version")]),e._v("), краткое описание приложения (параметр "),r("em",[e._v("description")]),e._v("), а также параметр "),r("em",[e._v("executables")]),e._v(", который должен быть "),r("strong",[e._v("списком")]),e._v(" экземпляров класса "),r("em",[e._v("Executable")]),e._v(". Почему тут должен быть именно список, и не достаточно одного экземпляра класса "),r("em",[e._v("Executable")]),e._v(" будет описано чуть позже в разделе "),r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze#several",target:"_blank",rel:"noopener noreferrer"}},[e._v("Сборка нескольких запускаемых файлов"),r("OutboundLink")],1),e._v(".")]),e._v(" "),r("p",[e._v("Конструктор класса "),r("em",[e._v("Executable")]),e._v(" может принимать достаточно большое количество параметров. Обязательным параметром является только имя запускаемого python-файла. Если ваша программа состоит из большого количества скриптов, то указывать нужно на тот файл, который запускал бы пользователь, если бы он запускал приложение из исходников. Полностью конструктор класса "),r("em",[e._v("Executable")]),e._v(" выглядит следующим образом (класс описан в файле "),r("a",{attrs:{href:"https://github.com/anthony-tuininga/cx_Freeze/blob/master/cx_Freeze/freezer.py",target:"_blank",rel:"noopener noreferrer"}},[e._v("freezer.py"),r("OutboundLink")],1),e._v(" исходников cx_Freeze):")]),e._v(" "),r("p",[e._v("class Executable(object):"),r("br"),e._v("\n    def "),r("strong",[e._v("init")]),e._v("(self, script, initScript = None, base = None,"),r("br"),e._v("\n            targetName = None, icon = None, shortcutName = None,"),r("br"),e._v("\n            shortcutDir = None, copyright = None, trademarks = None):")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=8",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("Некоторыми из этих параметров мы еще воспользуемся, а некоторые останутся за рамками статьи, назначение многих из них понятно из названия переменных.")]),e._v(" "),r("p",[e._v("Чтобы создать запускаемый файл, запустим консоль и перейдем в папку, где лежит файл "),r("em",[e._v("setup.py")]),e._v(". Затем нужно выполнить команду")]),e._v(" "),r("p",[e._v("python setup.py build")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=9",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("На экран будет выведено достаточно много теста:")]),e._v(" "),r("p",[e._v("running build\nrunning build_exe\ncopying C:\\Users\\jenyay\\AppData\\Roaming\\Python\\Python36\\site-packages\\cx_Freeze\\bases\\Console.exe -> build\\exe.win32-3.6\\example_01.exe\ncopying C:\\Program Files (x86)\\Python36-32\\python36.dll -> build\\exe.win32-3.6\\python36.dll\n*** WARNING *** unable to create version resource\ninstall pywin32 extensions first\nwriting zip file build\\exe.win32-3.6\\python36.zip")]),e._v(" "),r("p",[e._v("Name                      File")]),e._v(" "),r("hr"),e._v(" "),r("p",[e._v("m BUILD_CONSTANTS\nm "),r("strong",[e._v("future")]),e._v("                C:\\Program Files (x86)\\Python36-32\\lib_"),r("em",[e._v("future")]),e._v("_.py\nm "),r("strong",[e._v("startup")]),e._v("               C:\\Users\\jenyay\\AppData\\Roaming\\Python\\Python36\\site-packages\\cx_Freeze\\initscripts_"),r("em",[e._v("startup")]),e._v("_.py\nm _ast")]),e._v(" "),r("p",[e._v("...")]),e._v(" "),r("p",[e._v("m xml.parsers.expat         C:\\Program Files (x86)\\Python36-32\\lib\\xml\\parsers\\expat.py\nm zipfile                   C:\\Program Files (x86)\\Python36-32\\lib\\zipfile.py\nm zipimport\nm zlib")]),e._v(" "),r("p",[e._v("Missing modules:\n? "),r("strong",[e._v("main")]),e._v(" imported from bdb, pdb\n? _dummy_threading imported from dummy_threading\n? _frozen_importlib imported from importlib, importlib.abc\n? _frozen_importlib_external imported from importlib, importlib._bootstrap, importlib.abc\n? _posixsubprocess imported from subprocess\n? _winreg imported from platform\n? grp imported from shutil, tarfile\n? java.lang imported from platform\n? org.python.core imported from copy, pickle\n? os.path imported from os, pkgutil, py_compile, tracemalloc, unittest, unittest.util\n? posix imported from os\n? pwd imported from http.server, posixpath, shutil, tarfile, webbrowser\n? termios imported from tty\n? vms_lib imported from platform\nThis is not necessarily a problem - the modules may not be needed on this platform.")]),e._v(" "),r("p",[e._v("copying C:\\Program Files (x86)\\Python36-32\\DLLs_bz2.pyd -> build\\exe.win32-3.6_bz2.pyd\ncopying C:\\Program Files (x86)\\Python36-32\\DLLs_hashlib.pyd -> build\\exe.win32-3.6_hashlib.pyd\ncopying C:\\Program Files (x86)\\Python36-32\\DLLs_lzma.pyd -> build\\exe.win32-3.6_lzma.pyd\ncopying C:\\Program Files (x86)\\Python36-32\\DLLs_socket.pyd -> build\\exe.win32-3.6_socket.pyd\ncopying C:\\Program Files (x86)\\Python36-32\\DLLs_ssl.pyd -> build\\exe.win32-3.6_ssl.pyd\ncopying C:\\Program Files (x86)\\Python36-32\\DLLs\\pyexpat.pyd -> build\\exe.win32-3.6\\pyexpat.pyd\ncopying C:\\Program Files (x86)\\Python36-32\\DLLs\\select.pyd -> build\\exe.win32-3.6\\select.pyd\ncopying C:\\Program Files (x86)\\Python36-32\\DLLs\\unicodedata.pyd -> build\\exe.win32-3.6\\unicodedata.pyd")]),e._v(" "),r("p",[e._v("В довольно большом логе работы можно увидеть, какие модули Python попали в сборку, а каких по мнению cx_Freeze не хватает. Чаще всего на этот вывод можно не обращать внимания, если нет каких-либо ошибок.")]),e._v(" "),r("p",[e._v("После запуска скрипта сборки, если все прошло успешно (если нет сообщений об ошибках), рядом с файлами "),r("em",[e._v("example.py")]),e._v(" и "),r("em",[e._v("setup.py")]),e._v(" должна появиться папка "),r("em",[e._v("build")]),e._v(", а в ней папка, имя которой зависит от версии Python. Например, если сборка запускалась с помощью 32-битной версии интерпретатора Python 3.6, то будет создана папка "),r("em",[e._v("exe.win32-3.6")]),e._v(", а в ней огромное количество файлов и папок.")]),e._v(" "),r("p",[r("img",{attrs:{src:"https://jenyay.net/uploads/Programming/Cxfreeze/example_01.png",alt:""}})]),e._v(" "),r("p",[e._v("Среди файлов можно увидеть файл "),r("em",[e._v("example.exe")]),e._v(' - файл, который будут запускать пользователи. Попробуйте его запустить - откроется консольное окно, в котором промелькнет фраза "Hello world!"')]),e._v(" "),r("p",[e._v("Рядом с запускаемым файлом расположился файл с ядром интерпретатора Python - "),r("em",[e._v("python36.dll")]),e._v(", а также файл "),r("em",[e._v("python36.zip")]),e._v(" - архив, в котором хранятся модули Python, скомпилированные в файлы *.pyc. Также в корне находятся динамические загружаемые библиотеки *.pyd и папки с пакетами, которые не попали в файл "),r("em",[e._v("python36.zip")]),e._v(". Если открыть этот архив, то можно увидеть, что он содержит файлы *.pyc.")]),e._v(" "),r("p",[r("img",{attrs:{src:"https://jenyay.net/uploads/Programming/Cxfreeze/example_01_zip.png",alt:""}})]),e._v(" "),r("p",[e._v("По умолчанию cx_Freeze в архив помещает одиночные модули, а пакеты помещает в корень папки сборки. В данный момент в сборку попало очень много лишних модулей, который на самом деле не используются в программе. Например, среди модулей можно увидеть unittest, logging, xml, urllib и другие, которые явно не используются в нашей простой программе. Скоро мы научимся удалять лишние модули из сборки и вручную добавлять необходимые.")]),e._v(" "),r("h3",{attrs:{id:"_4-добавление-фаилов-microsoft-visual-c-redistributable"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4-добавление-фаилов-microsoft-visual-c-redistributable"}},[e._v("#")]),e._v(" 4. Добавление файлов Microsoft Visual C++ Redistributable")]),e._v(" "),r("p",[e._v("Интерпретатор Python компилируется под Windows с помощью Microsoft Visual C++, поэтому для того, чтобы пользователи могли запускать собранное вами приложение, у них должен установлен Microsoft Visual C++ Redistributable Package, который они должны скачать с сайта Microsoft. Это не очень удобно. Ситуация усугубляется тем, что разные версии Python компилируются с помощью разных версий компилятора.")]),e._v(" "),r("p",[e._v("Чтобы решить эту проблему вы можете поставлять с вашим дистрибутивом необходимые файлы *.dll. Например, для Python 3.6 достаточно скопировать файл "),r("em",[e._v("vcruntime140.dll")]),e._v(" из папки с установленным Python. Для того, чтобы не делать эту вручную, cx_Freeze может делать это за вас, для этого надо добавить новый для нас параметр в функцию "),r("em",[e._v("setup")]),e._v(" скрипта сборки "),r("em",[e._v("setup.py")]),e._v(". Исправленный скрипт сборки теперь будет выглядеть следующим образом ("),r("a",{attrs:{href:"https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2002",target:"_blank",rel:"noopener noreferrer"}},[e._v("Example 02"),r("OutboundLink")],1),e._v("):")]),e._v(" "),r("h1",{attrs:{id:"coding-utf-8-3"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#coding-utf-8-3"}},[e._v("#")]),e._v(" coding: utf-8")]),e._v(" "),r("p",[e._v("from cx_Freeze import setup, Executable")]),e._v(" "),r("p",[e._v("executables = [Executable('example.py')]")]),e._v(" "),r("p",[e._v("options = {"),r("br"),e._v("\n    'build_exe': {"),r("br"),e._v("\n        'include_msvcr': True,"),r("br"),e._v("\n    }"),r("br"),e._v("\n}")]),e._v(" "),r("p",[e._v("setup(name='hello_world',"),r("br"),e._v("\n      version='0.0.2',"),r("br"),e._v("\n      description='My Hello World App!',"),r("br"),e._v("\n      executables=executables,"),r("br"),e._v("\n      options=options)")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=10",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("В функцию "),r("em",[e._v("setup")]),e._v(" был добавлен новый параметр "),r("em",[e._v("options")]),e._v(", который должен быть словарем. Этот словарь содержит вложенные словари, описывающие особенности сборки для разных операционных систем и типов сборки (cx_Freeze кроме запускаемых файлов может создавать инсталяторы). Все возможные параметры можно найти "),r("a",{attrs:{href:"http://cx-freeze.readthedocs.io/en/latest/distutils.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("в документации"),r("OutboundLink")],1),e._v(", некоторые из этих параметров мы еще будем использовать в дальнейшем.")]),e._v(" "),r("p",[e._v("Пока мы добавили единственный параметр в словарь "),r("em",[e._v("build_exe")]),e._v(" - 'include_msvcr': True. Этот параметр говорит cx_Freeze, что нужно скопировать необходимые файлы *.dll из Microsoft Visual C++ Redistributable.")]),e._v(" "),r("p",[e._v("Но в последних версиях cx_Freeze есть некоторые непонятные моменты, связанные с этим параметром. По идее после запуска нового скрипта сборки с помощью команды")]),e._v(" "),r("p",[e._v("python setup.py build")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=11",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("должна создаться та же самая сборка, что и в предыдущем примере, но только в папке с программой должен появиться файл "),r("em",[e._v("vcruntime140.dll")]),e._v(" (для Python 3.6). Во время написания этой статьи (напомню, что для тестирования примеров использовался cx_Freeze 5.0.2) этот файл не копировался. На github есть несколько обсуждений ("),r("a",{attrs:{href:"https://github.com/anthony-tuininga/cx_Freeze/issues/275",target:"_blank",rel:"noopener noreferrer"}},[e._v("#275"),r("OutboundLink")],1),e._v("), где говорится, что этот файл не копируется при использовании virtualenv. Я пробовал запускать эти примеры и без virtualenv, файл "),r("em",[e._v("vcruntime140.dll")]),e._v(" все равно не копировался. В одном из следующих примеров, когда мы будем собирать скрипт, создающий графический интерфейс с помощью библиотеки wxPython, этот файл появится. С чем связано такое поведение - пока загадка. Но при создании своих сборок имейте это в виду, может быть нужно будет копировать файлы Microsoft Visual C++ Redistributable вручную. В дальнейших примерах для общности везде будет добавлен параметр "),r("em",[e._v("include_msvcr")]),e._v(".")]),e._v(" "),r("h3",{attrs:{id:"_5-избавляемся-от-лишних-модулеи"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_5-избавляемся-от-лишних-модулеи"}},[e._v("#")]),e._v(" 5. Избавляемся от лишних модулей")]),e._v(" "),r("p",[e._v("Как мы видим, несмотря на то, что наш исходный скрипт Hello World явно не импортирует никакие модули, в сборку попало достаточно много файлов *.pyc и *.pyd. Некоторые из них нам явно не нужны (например, unittest, logging и другие). Полный размер сборки сейчас составляет 9.05 МБ, что для простого Hello World кажется излишним, хотя при современных размерах жестких дисков скорее всего не будет проблемой.")]),e._v(" "),r("p",[e._v("cx_Freeze позволяет указать, какие модули не надо включать в создаваемую сборку. Сразу скажу, что этой возможностью надо пользоваться осторожно, особенно для больших программах. Python - язык с динамической типизацией и заранее нельзя сказать, какие модули понадобятся, а какие нет. Тут нужно все тестировать. Некоторые модули исключить не удастся, и cx_Freeze во время сборки напишет ошибку, другие модули можно не включить в сборку, но на самом деле они окажутся нужными (например, они могут использоваться другими модулями, которые вы используете), и в этом случае вы получите ошибку во время выполнения программы. Это особенно неприятно для больших программ. Таким образом вы можете исключить модуль, который используется в редком случае, и из-за этого не сразу обнаружить ошибку. Поэтому лучше убирать из сборки только те модули, в которых вы 100% уверены, что они не используются (модуль unittest обычно таким является).")]),e._v(" "),r("p",[e._v("Чтобы исключить какие-либо модули из сборки, в словарь параметров "),r("em",[e._v("build_exe")]),e._v(" нужно добавить ключ "),r("em",[e._v("excludes")]),e._v(", значением которого должен быть список строк с именами модулей, которые нужно исключить. Давайте для начала исключим модули, которые нам явно не нужны. Добавим параметр "),r("em",[e._v("excludes")]),e._v(" с небольшим списком модулей ("),r("a",{attrs:{href:"https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2003",target:"_blank",rel:"noopener noreferrer"}},[e._v("Example 03"),r("OutboundLink")],1),e._v("):")]),e._v(" "),r("h1",{attrs:{id:"coding-utf-8-4"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#coding-utf-8-4"}},[e._v("#")]),e._v(" coding: utf-8")]),e._v(" "),r("p",[e._v("from cx_Freeze import setup, Executable")]),e._v(" "),r("p",[e._v("executables = [Executable('example.py')]")]),e._v(" "),r("p",[e._v("excludes = ['unicodedata', 'logging', 'unittest', 'email', 'html', 'http', 'urllib',"),r("br"),e._v("\n            'xml', 'bz2']")]),e._v(" "),r("p",[e._v("options = {"),r("br"),e._v("\n    'build_exe': {"),r("br"),e._v("\n        'include_msvcr': True,"),r("br"),e._v("\n        'excludes': excludes,"),r("br"),e._v("\n    }"),r("br"),e._v("\n}")]),e._v(" "),r("p",[e._v("setup(name='hello_world',"),r("br"),e._v("\n      version='0.0.3',"),r("br"),e._v("\n      description='My Hello World App!',"),r("br"),e._v("\n      executables=executables,"),r("br"),e._v("\n      options=options)")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=12",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("После сборки заходим в папку _build\\exe.win32-3.6_ или аналогичную ей и видим, что количество файлов и папок заметно уменьшилось:")]),e._v(" "),r("p",[r("img",{attrs:{src:"https://jenyay.net/uploads/Programming/Cxfreeze/example_03.png",alt:""}})]),e._v(" "),r("p",[e._v("В архиве "),r("em",[e._v("python36.zip")]),e._v(" количество файлов тоже немного уменьшилось:")]),e._v(" "),r("p",[r("img",{attrs:{src:"https://jenyay.net/uploads/Programming/Cxfreeze/example_03_zip.png",alt:""}})]),e._v(" "),r("p",[e._v("Общий размер сборки теперь составляет 5.93 МБ - размер уже уменьшился на треть. Обязательно надо убедиться, что программа работает.")]),e._v(" "),r("p",[e._v("В реальном проекте, возможно, стоит на этом остановиться и не рисковать сломать программу, удаляя более мелкие модули. Но поскольку у нас очень простая программа, мы можем пойти дальше и путем перебора попробовать удалить как можно больше ненужных модулей. Через несколько (десятков?) итераций удаления и восстановления модулей получился следующий скрипт сборки ("),r("a",{attrs:{href:"https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2004",target:"_blank",rel:"noopener noreferrer"}},[e._v("Example 04"),r("OutboundLink")],1),e._v("):")]),e._v(" "),r("h1",{attrs:{id:"coding-utf-8-5"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#coding-utf-8-5"}},[e._v("#")]),e._v(" coding: utf-8")]),e._v(" "),r("p",[e._v("from cx_Freeze import setup, Executable")]),e._v(" "),r("p",[e._v("executables = [Executable('example.py')]")]),e._v(" "),r("p",[e._v("excludes = ['unicodedata', 'logging', 'unittest', 'email', 'html', 'http', 'urllib',"),r("br"),e._v("\n            'xml', 'pydoc', 'doctest', 'argparse', 'datetime', 'zipfile',"),r("br"),e._v("\n            'subprocess', 'pickle', 'threading', 'locale', 'calendar', 'functools',"),r("br"),e._v("\n            'weakref', 'tokenize', 'base64', 'gettext', 'heapq', 're', 'operator',"),r("br"),e._v("\n            'bz2', 'fnmatch', 'getopt', 'reprlib', 'string', 'stringprep',"),r("br"),e._v("\n            'contextlib', 'quopri', 'copy', 'imp', 'keyword', 'linecache']")]),e._v(" "),r("p",[e._v("options = {"),r("br"),e._v("\n    'build_exe': {"),r("br"),e._v("\n        'include_msvcr': True,"),r("br"),e._v("\n        'excludes': excludes,"),r("br"),e._v("\n    }"),r("br"),e._v("\n}")]),e._v(" "),r("p",[e._v("setup(name='hello_world',"),r("br"),e._v("\n      version='0.0.4',"),r("br"),e._v("\n      description='My Hello World App!',"),r("br"),e._v("\n      executables=executables,"),r("br"),e._v("\n      options=options)")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=13",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("После его запуска с помощью команды "),r("em",[e._v("python setup.py build")]),e._v(" сборка будет выглядеть следующим образом:")]),e._v(" "),r("p",[r("img",{attrs:{src:"https://jenyay.net/uploads/Programming/Cxfreeze/example_04.png",alt:""}})]),e._v(" "),r("p",[e._v("А в архиве "),r("em",[e._v("python36.zip")]),e._v(" остались лишь следующие модули:")]),e._v(" "),r("p",[r("img",{attrs:{src:"https://jenyay.net/uploads/Programming/Cxfreeze/example_04_zip.png",alt:""}})]),e._v(" "),r("p",[e._v("В архиве осталось всего 19 файлов из 100 первоначальных. Теперь сборка занимает 3.7 МБ. По-моему, неплохо. Но это еще не все.")]),e._v(" "),r("p",[e._v("Мы видим, что часть модулей находится в архиве "),r("em",[e._v("python36.zip")]),e._v(" , а часть в отдельных папках в папке сборки. Это может быть неприятно из эстетических соображений, если вы не хотите видеть лишние служебные файлы и папки в сборке. На этот случай у cx_Freeze есть еще один параметр, который указывает, какие модули он должен обязательно помещать в архив. Но имейте в виду, что распаковка архива при работе программы тоже будет занимать время, поэтому запуск программы с заархивированными модулями будет медленнее. Насколько медленнее - надо измерять, возможно, скорость будет не заметна для пользователей (скорее всего так и будет).")]),e._v(" "),r("p",[e._v("Чтобы указать, какие модули нужно обязательно поместить в архив, используется элемент с именем "),r("em",[e._v("zip_include_packages")]),e._v(" словаря параметров "),r("em",[e._v("build_exe")]),e._v(" . Этот элемент словаря должен содержать "),r("strong",[e._v("список строк")]),e._v(" с именами модулей (пакетов), которые нужно поместить в архив. В нашем случае скрипт сборки преобразуется к следующему виду ("),r("a",{attrs:{href:"https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2005",target:"_blank",rel:"noopener noreferrer"}},[e._v("Example 05"),r("OutboundLink")],1),e._v("):")]),e._v(" "),r("h1",{attrs:{id:"coding-utf-8-6"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#coding-utf-8-6"}},[e._v("#")]),e._v(" coding: utf-8")]),e._v(" "),r("p",[e._v("from cx_Freeze import setup, Executable")]),e._v(" "),r("p",[e._v("executables = [Executable('example.py')]")]),e._v(" "),r("p",[e._v("excludes = ['unicodedata', 'logging', 'unittest', 'email', 'html', 'http', 'urllib',"),r("br"),e._v("\n            'xml', 'pydoc', 'doctest', 'argparse', 'datetime', 'zipfile',"),r("br"),e._v("\n            'subprocess', 'pickle', 'threading', 'locale', 'calendar', 'functools',"),r("br"),e._v("\n            'weakref', 'tokenize', 'base64', 'gettext', 'heapq', 're', 'operator',"),r("br"),e._v("\n            'bz2', 'fnmatch', 'getopt', 'reprlib', 'string', 'stringprep',"),r("br"),e._v("\n            'contextlib', 'quopri', 'copy', 'imp', 'keyword', 'linecache']")]),e._v(" "),r("p",[e._v("zip_include_packages = ['collections', 'encodings', 'importlib']")]),e._v(" "),r("p",[e._v("options = {"),r("br"),e._v("\n    'build_exe': {"),r("br"),e._v("\n        'include_msvcr': True,"),r("br"),e._v("\n        'excludes': excludes,"),r("br"),e._v("\n        'zip_include_packages': zip_include_packages,"),r("br"),e._v("\n    }"),r("br"),e._v("\n}")]),e._v(" "),r("p",[e._v("setup(name='hello_world',"),r("br"),e._v("\n      version='0.0.5',"),r("br"),e._v("\n      description='My Hello World App!',"),r("br"),e._v("\n      executables=executables,"),r("br"),e._v("\n      options=options)")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=14",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("Запускаем сборку и смотрим на ее результат:")]),e._v(" "),r("p",[r("img",{attrs:{src:"https://jenyay.net/uploads/Programming/Cxfreeze/example_05.png",alt:""}})]),e._v(" "),r("p",[e._v("Осталось всего лишь три файла!")]),e._v(" "),r("p",[e._v("Указанные в скрипте сборки модули переместились в файл "),r("em",[e._v("python36.zip")]),e._v(":")]),e._v(" "),r("p",[r("img",{attrs:{src:"https://jenyay.net/uploads/Programming/Cxfreeze/example_05_zip.png",alt:""}})]),e._v(" "),r("p",[e._v("Теперь сборка занимает всего лишь 3.45 МБ - по сравнению с исходными 9 МБ размер сократился почти в 3 раза. Еще раз напомню, что в сборку еще не были включены файлы из Microsoft Visual C++ Redistributable, которые почему-то не были помещены автоматически библиотекой cx_Freeze. Ну и, конечно, в этом примере было применено очень агрессивное исключение модулей, которые могут использоваться во многих других модулях. Обычно этого делать не стоит, чтобы не получить неожиданную ошибку. К тому же многие файлы *.pyc занимают всего лишь десятки кБ, из-за которых нет смысла рисковать.")]),e._v(" "),r("h3",{attrs:{id:"_6-наводим-красоту-в-сборке"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_6-наводим-красоту-в-сборке"}},[e._v("#")]),e._v(" 6. Наводим красоту в сборке")]),e._v(" "),r("p",[e._v("Мы создали запускаемую сборку нашей программы. По умолчанию она помещается в папку с именем вроде _build\\exe.win32-3.6_ , имя которой зависит от версии Python, для которой происходила сборка. Во многих случаях можно на этом остановиться, но в больших проектах создание такой сборки - это лишь один промежуточный этап автоматического создания дистрибутива. После этого полученную сборку, возможно, нужно будет отправить на сервер для тестирования, может быть нужно будет запустить локальные тесты или создать из сборки инсталятор. Поэтому может оказаться, что такое имя папки неудобно или нужно сохранить сборку на другом диске. Все это, конечно, можно сделать сторонними скриптами, но cx_Freeze позволяет настраивать, куда будет помещена полученная сборка.")]),e._v(" "),r("p",[e._v("Давайте изменим файл "),r("em",[e._v("setup.py")]),e._v(", таким образом, чтобы создаваемая сборка помещалась, например, в папку "),r("em",[e._v("build_windows")]),e._v(" рядом со скриптами. Для этого снова нужно добавить новый параметр в словарь "),r("em",[e._v("build_exe")]),e._v(". Этот параметр тоже должен называться "),r("em",[e._v("build_exe")]),e._v(" и хранить строку с папкой, куда должна помещаться сборка ("),r("a",{attrs:{href:"https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2006",target:"_blank",rel:"noopener noreferrer"}},[e._v("Example 06"),r("OutboundLink")],1),e._v("):")]),e._v(" "),r("h1",{attrs:{id:"coding-utf-8-7"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#coding-utf-8-7"}},[e._v("#")]),e._v(" coding: utf-8")]),e._v(" "),r("p",[e._v("from cx_Freeze import setup, Executable")]),e._v(" "),r("p",[e._v("executables = [Executable('example.py')]")]),e._v(" "),r("p",[e._v("excludes = ['unicodedata', 'logging', 'unittest', 'email', 'html', 'http', 'urllib',"),r("br"),e._v("\n            'xml', 'pydoc', 'doctest', 'argparse', 'datetime', 'zipfile',"),r("br"),e._v("\n            'subprocess', 'pickle', 'threading', 'locale', 'calendar', 'functools',"),r("br"),e._v("\n            'weakref', 'tokenize', 'base64', 'gettext', 'heapq', 're', 'operator',"),r("br"),e._v("\n            'bz2', 'fnmatch', 'getopt', 'reprlib', 'string', 'stringprep',"),r("br"),e._v("\n            'contextlib', 'quopri', 'copy', 'imp', 'keyword', 'linecache']")]),e._v(" "),r("p",[e._v("zip_include_packages = ['collections', 'encodings', 'importlib']")]),e._v(" "),r("p",[e._v("options = {"),r("br"),e._v("\n    'build_exe': {"),r("br"),e._v("\n        'include_msvcr': True,"),r("br"),e._v("\n        'excludes': excludes,"),r("br"),e._v("\n        'zip_include_packages': zip_include_packages,"),r("br"),e._v("\n        'build_exe': 'build_windows',"),r("br"),e._v("\n    }"),r("br"),e._v("\n}")]),e._v(" "),r("p",[e._v("setup(name='hello_world',"),r("br"),e._v("\n      version='0.0.6',"),r("br"),e._v("\n      description='My Hello World App!',"),r("br"),e._v("\n      executables=executables,"),r("br"),e._v("\n      options=options)")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=15",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("Теперь после создания сборки рядом с файлами "),r("em",[e._v("example.py")]),e._v(" и "),r("em",[e._v("setup.py")]),e._v(" появится папка "),r("em",[e._v("build_windows")]),e._v(", где будет находиться созданная сборка, ничем не отличающаяся от предыдущего примера.")]),e._v(" "),r("p",[r("img",{attrs:{src:"https://jenyay.net/uploads/Programming/Cxfreeze/example_06.png",alt:""}})]),e._v(" "),r("p",[e._v("По умолчанию cx_Freeze создает запускаемый файл, имя которого (без расширения) совпадает с именем запускаемого скрипта. То есть в нашем случае - "),r("em",[e._v("example.exe")]),e._v(", поскольку наш запускаемый сприпт называется "),r("em",[e._v("example.py")]),e._v(". Часто нужно дать запускаемому файлу другое имя. Сделать это тоже очень просто, достаточно добавить еще один параметр, но на этот раз в конструктор класса "),r("em",[e._v("Executable")]),e._v(". Имя нужного нам параметра - "),r("em",[e._v("targetName")]),e._v(". Это должна быть строка, которая содержит имя создаваемого запускаемого файла. Поэтому, если мы хотим, чтобы cx_Freeze создал запускаемый файл "),r("em",[e._v("hello_world.exe")]),e._v(", то предыдущий файл "),r("em",[e._v("setup.py")]),e._v(" нужно изменить следующим образом ("),r("a",{attrs:{href:"https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2007",target:"_blank",rel:"noopener noreferrer"}},[e._v("Example 07"),r("OutboundLink")],1),e._v("):")]),e._v(" "),r("h1",{attrs:{id:"coding-utf-8-8"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#coding-utf-8-8"}},[e._v("#")]),e._v(" coding: utf-8")]),e._v(" "),r("p",[e._v("from cx_Freeze import setup, Executable")]),e._v(" "),r("p",[e._v("executables = [Executable('example.py', targetName='hello_world.exe')]")]),e._v(" "),r("p",[e._v("excludes = ['unicodedata', 'logging', 'unittest', 'email', 'html', 'http', 'urllib',"),r("br"),e._v("\n            'xml', 'pydoc', 'doctest', 'argparse', 'datetime', 'zipfile',"),r("br"),e._v("\n            'subprocess', 'pickle', 'threading', 'locale', 'calendar', 'functools',"),r("br"),e._v("\n            'weakref', 'tokenize', 'base64', 'gettext', 'heapq', 're', 'operator',"),r("br"),e._v("\n            'bz2', 'fnmatch', 'getopt', 'reprlib', 'string', 'stringprep',"),r("br"),e._v("\n            'contextlib', 'quopri', 'copy', 'imp', 'keyword', 'linecache']")]),e._v(" "),r("p",[e._v("zip_include_packages = ['collections', 'encodings', 'importlib']")]),e._v(" "),r("p",[e._v("options = {"),r("br"),e._v("\n    'build_exe': {"),r("br"),e._v("\n        'include_msvcr': True,"),r("br"),e._v("\n        'excludes': excludes,"),r("br"),e._v("\n        'zip_include_packages': zip_include_packages,"),r("br"),e._v("\n        'build_exe': 'build_windows',"),r("br"),e._v("\n    }"),r("br"),e._v("\n}")]),e._v(" "),r("p",[e._v("setup(name='hello_world',"),r("br"),e._v("\n      version='0.0.7',"),r("br"),e._v("\n      description='My Hello World App!',"),r("br"),e._v("\n      executables=executables,"),r("br"),e._v("\n      options=options)")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=16",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("Запускаем сборку и видим, что в папке "),r("em",[e._v("build_windows")]),e._v(" вместо "),r("em",[e._v("example.exe")]),e._v(" появился файл "),r("em",[e._v("hello_world.exe")]),e._v(":")]),e._v(" "),r("p",[r("img",{attrs:{src:"https://jenyay.net/uploads/Programming/Cxfreeze/example_07.png",alt:""}})]),e._v(" "),r("h3",{attrs:{id:"_7-добавление-модулеи-в-сборку"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_7-добавление-модулеи-в-сборку"}},[e._v("#")]),e._v(" 7. Добавление модулей в сборку")]),e._v(" "),r("p",[e._v("До сих пор мы только исключали лишние модули из создаваемой сборки с помощью параметра "),r("em",[e._v("excludes")]),e._v(" словаря "),r("em",[e._v("build_exe")]),e._v(". Однако, импорт модулей в Python может происходить не только с помощью оператора "),r("em",[e._v("import")]),e._v(", но и динамически по имени модуля с помощью функции '"),r("em",[e._v("import")]),e._v("', а может быть импорт будет осуществляться с использованием сложной логики, когда cx_Freeze не сможет понять, что нужно добавить какой-то модуль в сборку.")]),e._v(" "),r("p",[e._v("Давайте изменим наш пример таким образом, чтобы он импортировал модуль "),r("em",[e._v("json")]),e._v(" таким образом, что cx_Freeze об этом не узнает ("),r("a",{attrs:{href:"https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2008",target:"_blank",rel:"noopener noreferrer"}},[e._v("Example 08"),r("OutboundLink")],1),e._v("):")]),e._v(" "),r("h1",{attrs:{id:"coding-utf-8-9"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#coding-utf-8-9"}},[e._v("#")]),e._v(" coding: utf-8")]),e._v(" "),r("p",[e._v("if "),r("strong",[e._v("name")]),e._v(" == '"),r("strong",[e._v("main")]),e._v("':"),r("br"),e._v("\n    module = "),r("strong",[e._v("import")]),e._v("('json')"),r("br"),e._v("\n    print('Hello world!')")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=17",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("Скрипт сборки "),r("em",[e._v("setup.py")]),e._v(" пока останется неизменным. Запустим сборку с помощью команды "),r("em",[e._v("python setup.py build")]),e._v(", ошибок при этом не возникнет, будет создана сборка в папке "),r("em",[e._v("build_windows")]),e._v(".")]),e._v(" "),r("p",[e._v("Однако если теперь мы запустим созданный файл "),r("em",[e._v("hello_world.exe")]),e._v(", то в консоль будет выведено информация об исключении:")]),e._v(" "),r("blockquote",[r("p",[e._v("hello_world.exe")])]),e._v(" "),r("p",[e._v("Traceback (most recent call last):"),r("br"),e._v('\n  File "C:...\\Python36\\site-packages\\cx_Freeze\\initscripts_'),r("em",[e._v("startup")]),e._v('_.py", line 14, in run'),r("br"),e._v("\n    module.run()"),r("br"),e._v('\n  File "C:...\\Python36\\site-packages\\cx_Freeze\\initscripts\\Console.py", line 26, in run'),r("br"),e._v("\n    exec(code, m."),r("strong",[e._v("dict")]),e._v(")"),r("br"),e._v('\n  File "example.py", line 5, in '),r("module",[r("br"),e._v("\nModuleNotFoundError: No module named 'json'")])],1),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=18",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("На указанные пути обращать внимания не будем. Для нас сейчас главное, что мы получили ошибку времени исполнения. Надо ее исправлять, а именно нужно добавить модуль "),r("em",[e._v("json")]),e._v(" в сборку.")]),e._v(" "),r("p",[e._v("Если для исключения модулей из сборку предназначен параметр "),r("em",[e._v("excludes")]),e._v(", до для включения модуля в сборке используется параметр "),r("em",[e._v("includes")]),e._v(", который тоже должен содержать список модулей, которые нужно добавить в сборку. Параметр "),r("em",[e._v("includes")]),e._v(" так же должен входить в словарь "),r("em",[e._v("build_exe")]),e._v(". Добавим модуль "),r("em",[e._v("json")]),e._v(" в этот список ("),r("a",{attrs:{href:"https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2008-1",target:"_blank",rel:"noopener noreferrer"}},[e._v("Example 08-1"),r("OutboundLink")],1),e._v("):")]),e._v(" "),r("h1",{attrs:{id:"coding-utf-8-10"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#coding-utf-8-10"}},[e._v("#")]),e._v(" coding: utf-8")]),e._v(" "),r("p",[e._v("from cx_Freeze import setup, Executable")]),e._v(" "),r("p",[e._v("executables = [Executable('example.py', targetName='hello_world.exe')]")]),e._v(" "),r("p",[e._v("excludes = ['unicodedata', 'logging', 'unittest', 'email', 'html', 'http', 'urllib',"),r("br"),e._v("\n            'xml', 'pydoc', 'doctest', 'argparse', 'datetime', 'zipfile',"),r("br"),e._v("\n            'subprocess', 'pickle', 'threading', 'locale', 'calendar', 'functools',"),r("br"),e._v("\n            'weakref', 'tokenize', 'base64', 'gettext', 'heapq', 're', 'operator',"),r("br"),e._v("\n            'bz2', 'fnmatch', 'getopt', 'reprlib', 'string', 'stringprep',"),r("br"),e._v("\n            'contextlib', 'quopri', 'copy', 'imp', 'keyword', 'linecache']")]),e._v(" "),r("p",[e._v("includes = ['json']")]),e._v(" "),r("p",[e._v("zip_include_packages = ['collections', 'encodings', 'importlib']")]),e._v(" "),r("p",[e._v("options = {"),r("br"),e._v("\n    'build_exe': {"),r("br"),e._v("\n        'include_msvcr': True,"),r("br"),e._v("\n        'excludes': excludes,"),r("br"),e._v("\n        'includes': includes,"),r("br"),e._v("\n        'zip_include_packages': zip_include_packages,"),r("br"),e._v("\n        'build_exe': 'build_windows',"),r("br"),e._v("\n    }"),r("br"),e._v("\n}")]),e._v(" "),r("p",[e._v("setup(name='hello_world',"),r("br"),e._v("\n      version='0.0.8',"),r("br"),e._v("\n      description='My Hello World App!',"),r("br"),e._v("\n      executables=executables,"),r("br"),e._v("\n      options=options)")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=19",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("Создаем сборку, заходим в папку "),r("em",[e._v("build_windows")]),e._v(" и видим, что в ней появилась папка с именем "),r("em",[e._v("json")]),e._v(":")]),e._v(" "),r("p",[r("img",{attrs:{src:"https://jenyay.net/uploads/Programming/Cxfreeze/example_08.png",alt:""}})]),e._v(" "),r("p",[e._v("Но не спешим радоваться. При попытке запустить "),r("em",[e._v("hello_world.exe")]),e._v(" мы получим новую ошибку:")]),e._v(" "),r("blockquote",[r("p",[e._v("hello_world.exe"),r("br"),e._v("\nTraceback (most recent call last):"),r("br"),e._v('\n  File "C:...\\Python36\\site-packages\\cx_Freeze\\initscripts_'),r("em",[e._v("startup")]),e._v('_.py", line 14, in run'),r("br"),e._v("\n    module.run()"),r("br"),e._v('\n  File "C:...\\Python36\\site-packages\\cx_Freeze\\initscripts\\Console.py", line 26, in run'),r("br"),e._v("\n    exec(code, m."),r("strong",[e._v("dict")]),e._v(")"),r("br"),e._v('\n  File "example.py", line 5, in '),r("module",[r("br"),e._v('\n  File "C:\\Program Files (x86)\\Python36-32\\lib\\json_'),r("em",[e._v("init")]),e._v('_.py", line 106, in '),r("module",[r("br"),e._v("\n    from .decoder import JSONDecoder, JSONDecodeError"),r("br"),e._v('\n  File "C:\\Program Files (x86)\\Python36-32\\lib\\json\\decoder.py", line 3, in '),r("module",[r("br"),e._v("\n    import re"),r("br"),e._v("\nModuleNotFoundError: No module named 're'")])],1)],1)],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=20",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("Теперь не хватает модуля для работы с регулярными выражениями "),r("em",[e._v("re")]),e._v(". Если мы посмотрим внимательнее на наш предыдущий файл "),r("em",[e._v("setup.py")]),e._v(", то увидим, что этот модуль мы исключили из сборки с помощью параметра "),r("em",[e._v("excludes")]),e._v(", а этот модуль, оказывается, используется в модуле "),r("em",[e._v("json")]),e._v(". Если мы исключим модуль "),r("em",[e._v("re")]),e._v(" из списка "),r("em",[e._v("excludes")]),e._v(", то это тоже не решит проблему, окажется, что еще нужны другие модули, которые вы выкинули из сборки. Я же предупреждал, что не надо увлекаться удалением модулей. Постепенно удаляя имена модулей из списка "),r("em",[e._v("excludes")]),e._v(" можно добиться работоспособной сборки. Новый файл "),r("em",[e._v("setup.py")]),e._v(" теперь выглядит следующим образом ("),r("a",{attrs:{href:"https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2008-2",target:"_blank",rel:"noopener noreferrer"}},[e._v("Example 08-2"),r("OutboundLink")],1),e._v("):")]),e._v(" "),r("h1",{attrs:{id:"coding-utf-8-11"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#coding-utf-8-11"}},[e._v("#")]),e._v(" coding: utf-8")]),e._v(" "),r("p",[e._v("from cx_Freeze import setup, Executable")]),e._v(" "),r("p",[e._v("executables = [Executable('example.py', targetName='hello_world.exe')]")]),e._v(" "),r("p",[e._v("excludes = ['unicodedata', 'logging', 'unittest', 'email', 'html', 'http', 'urllib',"),r("br"),e._v("\n            'xml', 'pydoc', 'doctest', 'argparse', 'datetime', 'zipfile',"),r("br"),e._v("\n            'subprocess', 'pickle', 'threading', 'locale', 'calendar',"),r("br"),e._v("\n            'tokenize', 'base64', 'gettext',"),r("br"),e._v("\n            'bz2', 'fnmatch', 'getopt', 'string', 'stringprep',"),r("br"),e._v("\n            'contextlib', 'quopri', 'copy', 'imp', 'linecache']")]),e._v(" "),r("p",[e._v("includes = ['json']")]),e._v(" "),r("p",[e._v("zip_include_packages = ['collections', 'encodings', 'importlib']")]),e._v(" "),r("p",[e._v("options = {"),r("br"),e._v("\n    'build_exe': {"),r("br"),e._v("\n        'include_msvcr': True,"),r("br"),e._v("\n        'excludes': excludes,"),r("br"),e._v("\n        'includes': includes,"),r("br"),e._v("\n        'zip_include_packages': zip_include_packages,"),r("br"),e._v("\n        'build_exe': 'build_windows',"),r("br"),e._v("\n    }"),r("br"),e._v("\n}")]),e._v(" "),r("p",[e._v("setup(name='hello_world',"),r("br"),e._v("\n      version='0.0.8',"),r("br"),e._v("\n      description='My Hello World App!',"),r("br"),e._v("\n      executables=executables,"),r("br"),e._v("\n      options=options)")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=21",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("Из списка "),r("em",[e._v("excludes")]),e._v(" были убраны следующие модули: "),r("em",[e._v("re")]),e._v(", "),r("em",[e._v("functools")]),e._v(", "),r("em",[e._v("operator")]),e._v(", "),r("em",[e._v("keyword")]),e._v(", "),r("em",[e._v("heapq")]),e._v(", "),r("em",[e._v("reprlib")]),e._v(", "),r("em",[e._v("weakref")]),e._v(".")]),e._v(" "),r("p",[e._v("Создаем сборку и получаем теперь уже работоспособное приложение. Если мы зайдем в папку "),r("em",[e._v("build_windows")]),e._v(", то увидим, что внешне ничего не изменилось, в ней из перечисленных модулей значится только папка "),r("em",[e._v("json")]),e._v(", остальные модули были помещены в архив "),r("em",[e._v("python36.zip")]),e._v(":")]),e._v(" "),r("p",[r("img",{attrs:{src:"https://jenyay.net/uploads/Programming/Cxfreeze/example_08-2_zip.png",alt:""}})]),e._v(" "),r("p",[e._v("И для аккуратности сделаем так, чтобы модуль "),r("em",[e._v("json")]),e._v(" тоже был помещен в архив "),r("em",[e._v("python36.zip")]),e._v(", добавим строку 'json' в параметр "),r("em",[e._v("zip_include_packages")]),e._v(" ("),r("a",{attrs:{href:"https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2008-3",target:"_blank",rel:"noopener noreferrer"}},[e._v("Example 08-3"),r("OutboundLink")],1),e._v("):")]),e._v(" "),r("h1",{attrs:{id:"coding-utf-8-12"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#coding-utf-8-12"}},[e._v("#")]),e._v(" coding: utf-8")]),e._v(" "),r("p",[e._v("from cx_Freeze import setup, Executable")]),e._v(" "),r("p",[e._v("executables = [Executable('example.py', targetName='hello_world.exe')]")]),e._v(" "),r("p",[e._v("excludes = ['unicodedata', 'logging', 'unittest', 'email', 'html', 'http', 'urllib',"),r("br"),e._v("\n            'xml', 'pydoc', 'doctest', 'argparse', 'datetime', 'zipfile',"),r("br"),e._v("\n            'subprocess', 'pickle', 'threading', 'locale', 'calendar',"),r("br"),e._v("\n            'tokenize', 'base64', 'gettext',"),r("br"),e._v("\n            'bz2', 'fnmatch', 'getopt', 'string', 'stringprep',"),r("br"),e._v("\n            'contextlib', 'quopri', 'copy', 'imp', 'linecache']")]),e._v(" "),r("p",[e._v("includes = ['json']")]),e._v(" "),r("p",[e._v("zip_include_packages = ['collections', 'encodings', 'importlib', 'json']")]),e._v(" "),r("p",[e._v("options = {"),r("br"),e._v("\n    'build_exe': {"),r("br"),e._v("\n        'include_msvcr': True,"),r("br"),e._v("\n        'excludes': excludes,"),r("br"),e._v("\n        'includes': includes,"),r("br"),e._v("\n        'zip_include_packages': zip_include_packages,"),r("br"),e._v("\n        'build_exe': 'build_windows',"),r("br"),e._v("\n    }"),r("br"),e._v("\n}")]),e._v(" "),r("p",[e._v("setup(name='hello_world',"),r("br"),e._v("\n      version='0.0.8',"),r("br"),e._v("\n      description='My Hello World App!',"),r("br"),e._v("\n      executables=executables,"),r("br"),e._v("\n      options=options)")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=22",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("Теперь сборка выглядит аккуратно и состоит всего из трех файлов:")]),e._v(" "),r("p",[r("img",{attrs:{src:"https://jenyay.net/uploads/Programming/Cxfreeze/example_08-3.png",alt:""}})]),e._v(" "),r("p",[e._v("А в архиве "),r("em",[e._v("python36.zip")]),e._v(" появился модуль "),r("em",[e._v("json")]),e._v(":")]),e._v(" "),r("p",[r("img",{attrs:{src:"https://jenyay.net/uploads/Programming/Cxfreeze/example_08-3_zip.png",alt:""}})]),e._v(" "),r("h3",{attrs:{id:"_8-сборка-нескольких-запускаемых-фаилов"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_8-сборка-нескольких-запускаемых-фаилов"}},[e._v("#")]),e._v(" 8. Сборка нескольких запускаемых файлов")]),e._v(" "),r("p",[e._v("Давайте вернемся к вопросу о том, зачем в качестве параметра "),r("em",[e._v("executables")]),e._v(" функции "),r("em",[e._v("setup")]),e._v(" должен быть передан "),r("strong",[e._v("список")]),e._v(" экземпляров класса "),r("em",[e._v("Executable")]),e._v(", а не единственный экземпляр класса. Это полезно в тех случаях, когда ваше приложение состоит из нескольких запускаемых файлов. Например, это может быть основная программа и дополнительная программа для обновления основной программы, или может быть ваше приложение - это набор небольших утилит, написанных на Python. В этом случае для каждой такой программы надо делать отдельную сборку, но как быть с архивом модулей ("),r("em",[e._v("python36.zip")]),e._v(" или аналогичного), ведь у каждой программы будет свой список импортируемых модулей? Именно поэтому cx_Freeze позволяет указывать список создаваемых запускаемых файлов, а в архив модулей будут помещены все необходимые модули для всех приложений.")]),e._v(" "),r("p",[e._v("Сделаем два простых скрипта в одной папке ("),r("a",{attrs:{href:"https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2009",target:"_blank",rel:"noopener noreferrer"}},[e._v("Example 09"),r("OutboundLink")],1),e._v(").")]),e._v(" "),r("p",[e._v("hello_01.py:")]),e._v(" "),r("h1",{attrs:{id:"coding-utf-8-13"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#coding-utf-8-13"}},[e._v("#")]),e._v(" coding: utf-8")]),e._v(" "),r("p",[e._v("import json")]),e._v(" "),r("p",[e._v("if "),r("strong",[e._v("name")]),e._v(" == '"),r("strong",[e._v("main")]),e._v("':"),r("br"),e._v("\n    print('Hello world 01!')")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=23",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("hello_02.py:")]),e._v(" "),r("h1",{attrs:{id:"coding-utf-8-14"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#coding-utf-8-14"}},[e._v("#")]),e._v(" coding: utf-8")]),e._v(" "),r("p",[e._v("if "),r("strong",[e._v("name")]),e._v(" == '"),r("strong",[e._v("main")]),e._v("':"),r("br"),e._v("\n    print('Hello world 02!')")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=24",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("Скрипт "),r("em",[e._v("hello_01.py")]),e._v(" явно импортирует модуль "),r("em",[e._v("json")]),e._v(", поэтому в файле "),r("em",[e._v("setup.py")]),e._v(" мы не будем использовать параметр "),r("em",[e._v("includes")]),e._v(" - cx_Freeze сам найдет все необходимые модули. Для скрипта "),r("em",[e._v("hello_02.py")]),e._v(" модуль "),r("em",[e._v("json")]),e._v(" не требуется. Для каждого из этих модулей мы должны создать свой экземпляр класса "),r("em",[e._v("Executable")]),e._v(" в "),r("em",[e._v("setup.py")]),e._v(", а остальное нам уже знакомо:")]),e._v(" "),r("h1",{attrs:{id:"coding-utf-8-15"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#coding-utf-8-15"}},[e._v("#")]),e._v(" coding: utf-8")]),e._v(" "),r("p",[e._v("from cx_Freeze import setup, Executable")]),e._v(" "),r("p",[e._v("executables = [Executable('hello_01.py', targetName='hello_world_01.exe'),"),r("br"),e._v("\n               Executable('hello_02.py', targetName='hello_world_02.exe'),"),r("br"),e._v("\n               ]")]),e._v(" "),r("p",[e._v("excludes = ['unicodedata', 'logging', 'unittest', 'email', 'html', 'http', 'urllib',"),r("br"),e._v("\n            'xml', 'pydoc', 'doctest', 'argparse', 'datetime', 'zipfile',"),r("br"),e._v("\n            'subprocess', 'pickle', 'threading', 'locale', 'calendar',"),r("br"),e._v("\n            'tokenize', 'base64', 'gettext',"),r("br"),e._v("\n            'bz2', 'fnmatch', 'getopt', 'string', 'stringprep',"),r("br"),e._v("\n            'contextlib', 'quopri', 'copy', 'imp', 'linecache']")]),e._v(" "),r("p",[e._v("zip_include_packages = ['collections', 'encodings', 'importlib', 'json']")]),e._v(" "),r("p",[e._v("options = {"),r("br"),e._v("\n    'build_exe': {"),r("br"),e._v("\n        'include_msvcr': True,"),r("br"),e._v("\n        'excludes': excludes,"),r("br"),e._v("\n        'zip_include_packages': zip_include_packages,"),r("br"),e._v("\n        'build_exe': 'build_windows',"),r("br"),e._v("\n    }"),r("br"),e._v("\n}")]),e._v(" "),r("p",[e._v("setup(name='hello_world',"),r("br"),e._v("\n      version='0.0.9',"),r("br"),e._v("\n      description='My Hello World App!',"),r("br"),e._v("\n      executables=executables,"),r("br"),e._v("\n      options=options)")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=25",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("Запускаем сборку и видим, что в папке "),r("em",[e._v("build_windows")]),e._v(" появились файлы "),r("em",[e._v("hello_world_01.exe")]),e._v(" и "),r("em",[e._v("hello_world_02.exe")]),e._v(":")]),e._v(" "),r("p",[r("img",{attrs:{src:"https://jenyay.net/uploads/Programming/Cxfreeze/example_09.png",alt:""}})]),e._v(" "),r("p",[e._v("А в архиве "),r("em",[e._v("python36.zip")]),e._v(" имеется модуль "),r("em",[e._v("json")]),e._v(", который нужен только для "),r("em",[e._v("hello_world_01.exe")]),e._v(":")]),e._v(" "),r("p",[r("img",{attrs:{src:"https://jenyay.net/uploads/Programming/Cxfreeze/example_09_zip.png",alt:""}})]),e._v(" "),r("h3",{attrs:{id:"_9-добавление-дополнительных-фаилов-в-сборку"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_9-добавление-дополнительных-фаилов-в-сборку"}},[e._v("#")]),e._v(" 9. Добавление дополнительных файлов в сборку")]),e._v(" "),r("p",[e._v("До сих пор у нас приложение состояло только из скриптов Python, но часто к скриптам должны прилагаться какие-нибудь файлы с данными. Давайте дополним один из предыдущих примеров, сделаем так, чтобы в отдельной папке с именем "),r("em",[e._v("data")]),e._v(" хранился файл "),r("em",[e._v("data.json")]),e._v(" с данными в формате JSON о том, кого программа должна приветствовать ("),r("a",{attrs:{href:"https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2010",target:"_blank",rel:"noopener noreferrer"}},[e._v("Example 10"),r("OutboundLink")],1),e._v("):")]),e._v(" "),r("p",[e._v("{"),r("br"),e._v('\n        "first_name": "John",'),r("br"),e._v('\n        "last_name": "Zoidberg"'),r("br"),e._v("\n}")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=26",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("Т.е. общая структура файлов будет такой:")]),e._v(" "),r("p",[e._v("."),r("br"),e._v("\n│--example.py"),r("br"),e._v("\n│--setup.py"),r("br"),e._v("\n│"),r("br"),e._v("\n└───data"),r("br"),e._v("\n        data.json")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=27",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("Скрипт "),r("em",[e._v("example.py")]),e._v(" теперь выглядит так:")]),e._v(" "),r("h1",{attrs:{id:"coding-utf-8-16"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#coding-utf-8-16"}},[e._v("#")]),e._v(" coding: utf-8")]),e._v(" "),r("p",[e._v("import json")]),e._v(" "),r("p",[e._v("if "),r("strong",[e._v("name")]),e._v(" == '"),r("strong",[e._v("main")]),e._v("':"),r("br"),e._v("\n    fname = 'data/data.json'"),r("br"),e._v("\n    with open(fname) as fp:"),r("br"),e._v("\n        obj = json.load(fp)")]),e._v(" "),r("p",[e._v("print('Hello {} {}!'.format(obj['first_name'], obj['last_name']))")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=28",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("Если мы воспользуемся одним из предыдущих скриптов "),r("em",[e._v("setup.py")]),e._v(" и запустим полученный файл .exe, то мы получим ошибку из-за того, что папка "),r("em",[e._v("data")]),e._v(" не будет скопирована в папку со сборкой. На этот случай у cx_Freeze есть еще один параметр "),r("em",[e._v("include_files")]),e._v(", который тоже должен входить в словарь "),r("em",[e._v("build_exe")]),e._v(" и содержать либо список, в который могут входить либо строковые элементы с именами файлов или папок, которые нужно добавить к сборке, либо кортежи, показывающие, как исходные файлы должны быть переименованы (об этом мы поговорим чуть позже).")]),e._v(" "),r("p",[e._v("Пока сделаем, чтобы папка "),r("em",[e._v("data")]),e._v(" была добавлена к сборке.")]),e._v(" "),r("h1",{attrs:{id:"coding-utf-8-17"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#coding-utf-8-17"}},[e._v("#")]),e._v(" coding: utf-8")]),e._v(" "),r("p",[e._v("from cx_Freeze import setup, Executable")]),e._v(" "),r("p",[e._v("executables = [Executable('example.py', targetName='hello_world.exe')]")]),e._v(" "),r("p",[e._v("excludes = ['unicodedata', 'logging', 'unittest', 'email', 'html', 'http', 'urllib',"),r("br"),e._v("\n            'xml', 'pydoc', 'doctest', 'argparse', 'datetime', 'zipfile',"),r("br"),e._v("\n            'subprocess', 'pickle', 'threading', 'locale', 'calendar',"),r("br"),e._v("\n            'tokenize', 'base64', 'gettext',"),r("br"),e._v("\n            'bz2', 'fnmatch', 'getopt', 'string', 'stringprep',"),r("br"),e._v("\n            'contextlib', 'quopri', 'copy', 'imp', 'linecache']")]),e._v(" "),r("p",[e._v("zip_include_packages = ['collections', 'encodings', 'importlib', 'json']")]),e._v(" "),r("p",[e._v("include_files = ['data']")]),e._v(" "),r("p",[e._v("options = {"),r("br"),e._v("\n    'build_exe': {"),r("br"),e._v("\n        'include_msvcr': True,"),r("br"),e._v("\n        'excludes': excludes,"),r("br"),e._v("\n        'zip_include_packages': zip_include_packages,"),r("br"),e._v("\n        'build_exe': 'build_windows',"),r("br"),e._v("\n        'include_files': include_files,"),r("br"),e._v("\n    }"),r("br"),e._v("\n}")]),e._v(" "),r("p",[e._v("setup(name='hello_world',"),r("br"),e._v("\n      version='0.0.10',"),r("br"),e._v("\n      description='My Hello World App!',"),r("br"),e._v("\n      executables=executables,"),r("br"),e._v("\n      options=options)")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=29",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("После удачной сборки папка "),r("em",[e._v("build_windows")]),e._v(" будет выглядеть следующим образом:")]),e._v(" "),r("p",[r("img",{attrs:{src:"https://jenyay.net/uploads/Programming/Cxfreeze/example_10.png",alt:""}})]),e._v(" "),r("p",[e._v("И приложение "),r("em",[e._v("hello_world.exe")]),e._v(" при запуске поприветствует доктора Зойдберга (пока не залез в Википедию, не знал, что его зовут Джон).")]),e._v(" "),r("p",[e._v("Давайте немного усложним задачу. Пусть исходники у нас включают в себя файлы "),r("em",[e._v("readme.txt")]),e._v(" и "),r("em",[e._v("documentation.txt")]),e._v(", которые не используются в скрипте (он останется прежним), но эти файлы хотелось бы добавить в сборку, при этом файл "),r("em",[e._v("documentation.txt")]),e._v(" нужно поместить в отдельную папку "),r("em",[e._v("doc")]),e._v(" и переименовать в "),r("em",[e._v("doc.txt")]),e._v(" ("),r("a",{attrs:{href:"https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2011",target:"_blank",rel:"noopener noreferrer"}},[e._v("Example 11"),r("OutboundLink")],1),e._v(").")]),e._v(" "),r("p",[r("img",{attrs:{src:"https://jenyay.net/uploads/Programming/Cxfreeze/example_11_src.png",alt:""}})]),e._v(" "),r("p",[e._v("Для этого воспользуемся тем, что в список "),r("em",[e._v("include_files")]),e._v(" можно включать не только строки, но и кортежи из двух элементов. Первый элемент кортежа должен быть строкой с именем исходного файла, а второй элемент - именем этого файла в папке сборки, при этом исходный файл можно помещать в поддиректории.")]),e._v(" "),r("p",[e._v("Наш новый файл "),r("em",[e._v("setup.py")]),e._v(" теерь выглядит так:")]),e._v(" "),r("h1",{attrs:{id:"coding-utf-8-18"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#coding-utf-8-18"}},[e._v("#")]),e._v(" coding: utf-8")]),e._v(" "),r("p",[e._v("from cx_Freeze import setup, Executable")]),e._v(" "),r("p",[e._v("executables = [Executable('example.py', targetName='hello_world.exe')]")]),e._v(" "),r("p",[e._v("excludes = ['unicodedata', 'logging', 'unittest', 'email', 'html', 'http', 'urllib',"),r("br"),e._v("\n            'xml', 'pydoc', 'doctest', 'argparse', 'datetime', 'zipfile',"),r("br"),e._v("\n            'subprocess', 'pickle', 'threading', 'locale', 'calendar',"),r("br"),e._v("\n            'tokenize', 'base64', 'gettext',"),r("br"),e._v("\n            'bz2', 'fnmatch', 'getopt', 'string', 'stringprep',"),r("br"),e._v("\n            'contextlib', 'quopri', 'copy', 'imp', 'linecache']")]),e._v(" "),r("p",[e._v("includes = ['json']")]),e._v(" "),r("p",[e._v("zip_include_packages = ['collections', 'encodings', 'importlib', 'json']")]),e._v(" "),r("p",[e._v("include_files = ['data',"),r("br"),e._v("\n                 'readme.txt',"),r("br"),e._v("\n                 ('documentation.txt', 'doc/doc.txt'),"),r("br"),e._v("\n                 ]")]),e._v(" "),r("p",[e._v("options = {"),r("br"),e._v("\n    'build_exe': {"),r("br"),e._v("\n        'include_msvcr': True,"),r("br"),e._v("\n        'excludes': excludes,"),r("br"),e._v("\n        'includes': includes,"),r("br"),e._v("\n        'zip_include_packages': zip_include_packages,"),r("br"),e._v("\n        'build_exe': 'build_windows',"),r("br"),e._v("\n        'include_files': include_files,"),r("br"),e._v("\n    }"),r("br"),e._v("\n}")]),e._v(" "),r("p",[e._v("setup(name='hello_world',"),r("br"),e._v("\n      version='0.0.11',"),r("br"),e._v("\n      description='My Hello World App!',"),r("br"),e._v("\n      executables=executables,"),r("br"),e._v("\n      options=options)")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=30",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("Запускаем сборку и убеждаемся, что новые файлы были скопированы в папку сборки:")]),e._v(" "),r("p",[r("img",{attrs:{src:"https://jenyay.net/uploads/Programming/Cxfreeze/example_11.png",alt:""}})]),e._v(" "),r("p",[r("img",{attrs:{src:"https://jenyay.net/uploads/Programming/Cxfreeze/example_11-2.png",alt:""}})]),e._v(" "),r("p",[e._v("Это очень полезная возможность при создании сборок.")]),e._v(" "),r("h3",{attrs:{id:"_10-создание-приложении-с-графическим-интерфеисом"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_10-создание-приложении-с-графическим-интерфеисом"}},[e._v("#")]),e._v(" 10. Создание приложений с графическим интерфейсом")]),e._v(" "),r("p",[e._v("До сих пор мы создавали запускаемые файлы для консольных приложений, но если вы разрабатываете программу для обычных пользователей, то им нужен графический интерфейс (GUI). Для создания графического интерфейса на Python существует много библиотек, которые в основном являются оболочками над библиотеками, написанными на C или C++. Наиболее известные из них - Tkinter (входит в стандартную библиотеку Python), PyQt, PySide, wxPython и др. В этой статье для примера рассмотрим использование библиотеки "),r("a",{attrs:{href:"https://wxpython.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("wxPython"),r("OutboundLink")],1),e._v(", которая является оболочкой поверх библиотеки "),r("a",{attrs:{href:"https://www.wxwidgets.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("wxWidgets"),r("OutboundLink")],1),e._v(". В примерах будет использоваться wxPython 4.0, которая на момент написания статьи имеет статус пока еще альфа-версии, зато в отличие от предыдущих версий может устанавливаться из PyPi с помощью pip.")]),e._v(" "),r("p",[e._v("Устанавливается wxPython 4.0 обычным способом:")]),e._v(" "),r("p",[e._v("pip install wxpython")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=31",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("или, если вы хотите установить wxPython только для своего пользователя (в этом случае не требуются права администратора):")]),e._v(" "),r("p",[e._v("pip install wxpython --user")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=32",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v('Сделаем простейшее приложение, которое создает пустое окно с заголовком "Hello wxPython". Поскольку данная статья не является учебником по wxPython, то не будем подробно останавливаться на использовании этой библиотеки, хотя я думаю, что код такого простого приложения достаточно понятен ('),r("a",{attrs:{href:"https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2012",target:"_blank",rel:"noopener noreferrer"}},[e._v("Example 12"),r("OutboundLink")],1),e._v(").")]),e._v(" "),r("h1",{attrs:{id:"example-py-2"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#example-py-2"}},[e._v("#")]),e._v(" example.py")]),e._v(" "),r("h1",{attrs:{id:"coding-utf-8-19"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#coding-utf-8-19"}},[e._v("#")]),e._v(" coding: utf-8")]),e._v(" "),r("p",[e._v("import wx")]),e._v(" "),r("p",[e._v("class MyApp(wx.App):"),r("br"),e._v("\n    def OnInit(self):"),r("br"),e._v('\n        self.mainWnd = wx.Frame(None, -1, "")'),r("br"),e._v("\n        self.SetTopWindow(self.mainWnd)"),r("br"),e._v("\n        self.mainWnd.SetTitle('Hello wxPython')"),r("br"),e._v("\n        self.mainWnd.Show()"),r("br"),e._v("\n        return True")]),e._v(" "),r("p",[e._v("if "),r("strong",[e._v("name")]),e._v(' == "'),r("strong",[e._v("main")]),e._v('":'),r("br"),e._v("\n    app = MyApp(False)"),r("br"),e._v("\n    app.MainLoop()")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=33",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("Создадим скрипт сборки "),r("em",[e._v("setup.py")]),e._v(", в котором пока тоже нет ничего необычного:")]),e._v(" "),r("h1",{attrs:{id:"coding-utf-8-20"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#coding-utf-8-20"}},[e._v("#")]),e._v(" coding: utf-8")]),e._v(" "),r("p",[e._v("from cx_Freeze import setup, Executable")]),e._v(" "),r("p",[e._v("executables = [Executable('example.py', targetName='hello_wx.exe')]")]),e._v(" "),r("p",[e._v("excludes = ['logging', 'unittest', 'email', 'html', 'http', 'urllib', 'xml',"),r("br"),e._v("\n            'unicodedata', 'bz2', 'select']")]),e._v(" "),r("p",[e._v("zip_include_packages = ['collections', 'encodings', 'importlib', 'wx']")]),e._v(" "),r("p",[e._v("options = {"),r("br"),e._v("\n    'build_exe': {"),r("br"),e._v("\n        'include_msvcr': True,"),r("br"),e._v("\n        'excludes': excludes,"),r("br"),e._v("\n        'zip_include_packages': zip_include_packages,"),r("br"),e._v("\n        'build_exe': 'build_windows',"),r("br"),e._v("\n    }"),r("br"),e._v("\n}")]),e._v(" "),r("p",[e._v("setup(name='hello_world',"),r("br"),e._v("\n      version='0.0.12',"),r("br"),e._v("\n      description='My Hello World App!',"),r("br"),e._v("\n      executables=executables,"),r("br"),e._v("\n      options=options)")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=34",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("Единственное отличие от предыдущих примеров заключается в том, что в список исключаемых модулей (параметр "),r("em",[e._v("excludes")]),e._v(" в "),r("em",[e._v("build_exe")]),e._v(") включены только некоторые модули, которые нам явно не нужны, а модуль "),r("em",[e._v("wx")]),e._v(" добавлен в список "),r("em",[e._v("zip_include_packages")]),e._v(", чтобы файлы *pyc из библиотеки wxPython попали в архив "),r("em",[e._v("python36.zip")]),e._v(".")]),e._v(" "),r("p",[e._v("Запускаем сборку с помощью команды")]),e._v(" "),r("p",[e._v("python setup.py build")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=35",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("Теперь содержимое папки "),r("em",[e._v("build_windows")]),e._v(" выглядит следующим образом:")]),e._v(" "),r("p",[r("img",{attrs:{src:"https://jenyay.net/uploads/Programming/Cxfreeze/example_12.png",alt:""}})]),e._v(" "),r("p",[e._v("Появились новые файлы *.dll и *.pyd, относящиеся в wxPython. С ними ничего не поделаешь, их трогать нельзя. Обратите внимание, что появились файлы "),r("em",[e._v("MSVCP140.dll")]),e._v(" и "),r("em",[e._v("VCRUNTIME140.dll")]),e._v(", относящиеся к Microsoft Visual C++ Redistributable. Если мы посмотрим на лог работы cx_Freeze, то увидим, что эти файлы были скопированы не из папки, где находится запускаемый файл интерпретатора Python, а из папки библиотеки wxPython:")]),e._v(" "),r("p",[e._v("Copying data from package pydoc_data..."),r("br"),e._v("\ncopying C:\\Program Files (x86)\\Python36-32\\DLLs_hashlib.pyd -> build_windows_hashlib.pyd"),r("br"),e._v("\ncopying C:\\Program Files (x86)\\Python36-32\\DLLs_lzma.pyd -> build_windows_lzma.pyd"),r("br"),e._v("\ncopying C:\\Program Files (x86)\\Python36-32\\DLLs_socket.pyd -> build_windows_socket.pyd"),r("br"),e._v("\ncopying C:\\Users\\jenyay\\AppData\\Roaming\\Python\\Python36\\site-packages\\wx_core.cp36-win32.pyd -> build_windows\\wx._core.pyd"),r("br"),e._v("\ncopying C:\\Users\\jenyay\\AppData\\Roaming\\Python\\Python36\\site-packages\\wx\\wxbase30u_vc140.dll -> build_windows\\wxbase30u_vc140.dll"),r("br"),e._v(" "),r("strong",[e._v("copying C:\\Users\\jenyay\\AppData\\Roaming\\Python\\Python36\\site-packages\\wx\\MSVCP140.dll -> build_windows\\MSVCP140.dll")]),r("br"),e._v(" "),r("strong",[e._v("copying C:\\Users\\jenyay\\AppData\\Roaming\\Python\\Python36\\site-packages\\wx\\VCRUNTIME140.dll -> build_windows\\VCRUNTIME140.dll")]),r("br"),e._v("\ncopying C:\\Users\\jenyay\\AppData\\Roaming\\Python\\Python36\\site-packages\\wx\\wxbase30u_net_vc140.dll -> build_windows\\wxbase30u_net_vc140.dll"),r("br"),e._v("\ncopying C:\\Users\\jenyay\\AppData\\Roaming\\Python\\Python36\\site-packages\\wx\\wxmsw30u_core_vc140.dll -> build_windows\\wxmsw30u_core_vc140.dll"),r("br"),e._v("\ncopying C:\\Users\\jenyay\\AppData\\Roaming\\Python\\Python36\\site-packages\\wx\\siplib.cp36-win32.pyd -> build_windows\\wx.siplib.pyd")]),e._v(" "),r("p",[e._v("Поэтому появление этих файлов не связано с параметром "),r("em",[e._v("include_msvcr")]),e._v(", который мы всегда устанавливаем в "),r("em",[e._v("True")]),e._v(". Если мы уберем этот параметр или присвоим ему значение "),r("em",[e._v("False")]),e._v(", файлы "),r("em",[e._v("MSVCP140.dll")]),e._v(" и "),r("em",[e._v("VCRUNTIME140.dll")]),e._v(" не пропадут из сборки. Это еще раз доказывает, что появлению этих файлов мы обязаны библиотеки wxPython, а не cx_Freeze.")]),e._v(" "),r("p",[e._v("Если заглянуть в архив "),r("em",[e._v("python36.zip")]),e._v(", то внутри мы увидим следующие файлы:")]),e._v(" "),r("p",[r("img",{attrs:{src:"https://jenyay.net/uploads/Programming/Cxfreeze/example_12_zip.png",alt:""}})]),e._v(" "),r("p",[e._v("Здесь может быть достаточно трудно понять, какие модули нужны, а какие лишние, поэтому лучше все оставить как есть.")]),e._v(" "),r("p",[e._v("Если мы теперь запустим созданный файл "),r("em",[e._v("hello_wx.exe")]),e._v(", то увидим одну особенность - появилось графическое окно, но кроме него на заднем фоне открылось также консольное окно.")]),e._v(" "),r("p",[r("img",{attrs:{src:"https://jenyay.net/uploads/Programming/Cxfreeze/example_12_wnd.png",alt:""}})]),e._v(" "),r("p",[e._v("В этом нет ничего удивительного, ведь для запуска скриптов используется интерпретатор Python "),r("em",[e._v("python.exe")]),e._v(", который является консольным приложением. Но понятно, что обычному пользователю программу в таком виде отдавать нельзя, консольное окно нужно убрать.")]),e._v(" "),r("p",[e._v("Для этого в cx_Freeze предусмотрен специальный параметр конструктора класса "),r("em",[e._v("Executable")]),e._v(", который называется "),r("em",[e._v("base")]),e._v('. До сих пор мы не использовали этот параметр, что равносильно использованию значения "Console", что означает, что мы создаем консольное приложение. Другие возможные значения параметра '),r("em",[e._v("base")]),e._v(' это "Win32GUI" и "Win32Service".')]),e._v(" "),r("p",[e._v("Для того, чтобы избавиться от фонового консольного окна, достаточно в конструктор класса "),r("em",[e._v("Executable")]),e._v(" передать параметр "),r("em",[e._v('base="Win32GUI"')]),e._v(". Сделаем это (("),r("a",{attrs:{href:"https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2012-1",target:"_blank",rel:"noopener noreferrer"}},[e._v("Example 12-1"),r("OutboundLink")],1),e._v(")):")]),e._v(" "),r("h1",{attrs:{id:"coding-utf-8-21"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#coding-utf-8-21"}},[e._v("#")]),e._v(" coding: utf-8")]),e._v(" "),r("p",[e._v("from cx_Freeze import setup, Executable")]),e._v(" "),r("p",[e._v("executables = [Executable('example.py',"),r("br"),e._v("\n                          targetName='hello_wx.exe',"),r("br"),e._v("\n                          base='Win32GUI')]")]),e._v(" "),r("p",[e._v("excludes = ['logging', 'unittest', 'email', 'html', 'http', 'urllib', 'xml',"),r("br"),e._v("\n            'unicodedata', 'bz2', 'select']")]),e._v(" "),r("p",[e._v("zip_include_packages = ['collections', 'encodings', 'importlib', 'wx']")]),e._v(" "),r("p",[e._v("options = {"),r("br"),e._v("\n    'build_exe': {"),r("br"),e._v("\n        'include_msvcr': True,"),r("br"),e._v("\n        'excludes': excludes,"),r("br"),e._v("\n        'zip_include_packages': zip_include_packages,"),r("br"),e._v("\n        'build_exe': 'build_windows',"),r("br"),e._v("\n    }"),r("br"),e._v("\n}")]),e._v(" "),r("p",[e._v("setup(name='hello_world',"),r("br"),e._v("\n      version='0.0.12',"),r("br"),e._v("\n      description='My Hello World App!',"),r("br"),e._v("\n      executables=executables,"),r("br"),e._v("\n      options=options)")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=36",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("Если теперь выполнить сборку и запустить приложение "),r("em",[e._v("hello_wx.exe")]),e._v(", то появится графическое окно без фонового консольного окна:")]),e._v(" "),r("p",[r("img",{attrs:{src:"https://jenyay.net/uploads/Programming/Cxfreeze/example_12-1_wnd.png",alt:""}})]),e._v(" "),r("p",[e._v("Как видите, никаких проблем с созданием графических приложений с использованием библиотеки wxPython нет.")]),e._v(" "),r("h3",{attrs:{id:"_11-установка-иконки-приложения"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_11-установка-иконки-приложения"}},[e._v("#")]),e._v(" 11. Установка иконки приложения")]),e._v(" "),r("p",[e._v("Библиотека cx_Freeze позволяет устанавливать иконку для создаваемых запускаемых файлов. До сих пор мы не устанавливали иконку, поэтому в Windows использовалась картинка по умолчанию для запускаемых файлов:")]),e._v(" "),r("p",[r("img",{attrs:{src:"https://jenyay.net/uploads/Programming/Cxfreeze/example_12-1_icon.png",alt:""}})]),e._v(" "),r("p",[e._v("Чтобы поменять иконку запускаемого файла, достаточно в конструктор класса "),r("em",[e._v("Executable")]),e._v(" передать параметр "),r("em",[e._v("icon")]),e._v(", который должен содержать строку с именем файла иконки. К нашему следующему примеру ("),r("a",{attrs:{href:"https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2013",target:"_blank",rel:"noopener noreferrer"}},[e._v("Example 13"),r("OutboundLink")],1),e._v(") прилагается высокохудожественная иконка, которая будет установлена для файла "),r("em",[e._v("hello_wx.exe")]),e._v(". Чтобы ее установить, добавим в конструктор класса "),r("em",[e._v("Executable")]),e._v(" параметр "),r("em",[e._v("icon")]),e._v(", который принимает строку с именем иконки для приложения:")]),e._v(" "),r("h1",{attrs:{id:"coding-utf-8-22"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#coding-utf-8-22"}},[e._v("#")]),e._v(" coding: utf-8")]),e._v(" "),r("p",[e._v("from cx_Freeze import setup, Executable")]),e._v(" "),r("p",[e._v("executables = [Executable('example.py',"),r("br"),e._v("\n                          targetName='hello_wx.exe',"),r("br"),e._v("\n                          base='Win32GUI',"),r("br"),e._v("\n                          icon='example.ico')]")]),e._v(" "),r("p",[e._v("excludes = ['logging', 'unittest', 'email', 'html', 'http', 'urllib', 'xml',"),r("br"),e._v("\n            'unicodedata', 'bz2', 'select']")]),e._v(" "),r("p",[e._v("zip_include_packages = ['collections', 'encodings', 'importlib', 'wx']")]),e._v(" "),r("p",[e._v("options = {"),r("br"),e._v("\n    'build_exe': {"),r("br"),e._v("\n        'include_msvcr': True,"),r("br"),e._v("\n        'excludes': excludes,"),r("br"),e._v("\n        'zip_include_packages': zip_include_packages,"),r("br"),e._v("\n        'build_exe': 'build_windows',"),r("br"),e._v("\n    }"),r("br"),e._v("\n}")]),e._v(" "),r("p",[e._v("setup(name='hello_world',"),r("br"),e._v("\n      version='0.0.13',"),r("br"),e._v("\n      description='My Hello World App!',"),r("br"),e._v("\n      executables=executables,"),r("br"),e._v("\n      options=options)")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=37",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("В результате сборки запускаемый файл в проводнике Windows будет выглядеть следующим образом:")]),e._v(" "),r("p",[r("img",{attrs:{src:"https://jenyay.net/uploads/Programming/Cxfreeze/example_13.png",alt:""}})]),e._v(" "),r("h3",{attrs:{id:"_12-создание-инсталятора-msi"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_12-создание-инсталятора-msi"}},[e._v("#")]),e._v(" 12. Создание инсталятора MSI")]),e._v(" "),r("p",[e._v("Кроме создания запускаемых файлов cx_Freeze позволяет создавать то, что под Windows называется инсталятором, а под Linux - пакетами. Под Windows cx_Freeze умеет создавать инсталятор в формате MSI, под Linux - пакеты в формате RPM, а под Mac OS X - пакеты .app и .dmg. В этой статье мы рассмотрим только создание инсталятора под Windows.")]),e._v(" "),r("p",[e._v("Давайте сделаем инсталятор на основе предыдущего примера. Единственное, что нам нужно будет сделать - убрать из словаря "),r("em",[e._v("build_exe")]),e._v(" параметр "),r("em",[e._v("build_exe")]),e._v(", изменяющий папку для сборки. Как это ни странно, но если он установлен, то создатель инсталятора все равно ищет созданные файлы в папке, подразумеваемой по умолчанию. Возможно, это ошибка в cx_Freeze.")]),e._v(" "),r("p",[e._v("Новый скрипт для создания инсталятора ничем не примечателен по сравнению со скриптом для создания запускаемого файла ("),r("a",{attrs:{href:"https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2014",target:"_blank",rel:"noopener noreferrer"}},[e._v("Example 14"),r("OutboundLink")],1),e._v("):")]),e._v(" "),r("h1",{attrs:{id:"coding-utf-8-23"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#coding-utf-8-23"}},[e._v("#")]),e._v(" coding: utf-8")]),e._v(" "),r("p",[e._v("from cx_Freeze import setup, Executable")]),e._v(" "),r("p",[e._v("executables = [Executable('example.py',"),r("br"),e._v("\n                          targetName='hello_wx.exe',"),r("br"),e._v("\n                          base='Win32GUI',"),r("br"),e._v("\n                          icon='example.ico')]")]),e._v(" "),r("p",[e._v("excludes = ['logging', 'unittest', 'email', 'html', 'http', 'urllib', 'xml',"),r("br"),e._v("\n            'unicodedata', 'bz2', 'select']")]),e._v(" "),r("p",[e._v("zip_include_packages = ['collections', 'encodings', 'importlib', 'wx']")]),e._v(" "),r("p",[e._v("options = {"),r("br"),e._v("\n    'build_exe': {"),r("br"),e._v("\n        'include_msvcr': True,"),r("br"),e._v("\n        'excludes': excludes,"),r("br"),e._v("\n        'zip_include_packages': zip_include_packages,"),r("br"),e._v("\n    }"),r("br"),e._v("\n}")]),e._v(" "),r("p",[e._v("setup(name='hello_world',"),r("br"),e._v("\n      version='0.0.14',"),r("br"),e._v("\n      description='My Hello World App!',"),r("br"),e._v("\n      executables=executables,"),r("br"),e._v("\n      options=options)")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=38",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("Для того, чтобы создать инсталятор под Windows, вместо команды "),r("em",[e._v("build")]),e._v(" мы должны использовать команду "),r("em",[e._v("bdist_msi")]),e._v(":")]),e._v(" "),r("p",[e._v("python setup.py bdist_msi")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=39",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("strong",[e._v("Внимание!")]),e._v(" Для того, чтобы инсталятор успешно создался, путь до скрипта сборки "),r("em",[e._v("setup.py")]),e._v(" не должен содержать русские или другие не латинские буквы, иначе вы получите исключение:")]),e._v(" "),r("p",[e._v("Traceback (most recent call last):")]),e._v(" "),r("p",[e._v('File "setup.py", line 27, in '),r("module",[e._v('\noptions=options)\nFile "C:\\Users\\jenyay\\AppData\\Roaming\\Python\\Python36\\site-packages\\cx_Freeze\\dist.py", line 349, in setup\ndistutils.core.setup(**attrs)\nFile "C:\\Program Files (x86)\\Python36-32\\lib\\distutils\\core.py", line 148, in setup\ndist.run_commands()\nFile "C:\\Program Files (x86)\\Python36-32\\lib\\distutils\\dist.py", line 955, in run_commands\nself.run_command(cmd)\nFile "C:\\Program Files (x86)\\Python36-32\\lib\\distutils\\dist.py", line 974, in run_command\ncmd_obj.run()\nFile "C:\\Users\\jenyay\\AppData\\Roaming\\Python\\Python36\\site-packages\\cx_Freeze\\windist.py", line 392, in run\nself.add_files()\nFile "C:\\Users\\jenyay\\AppData\\Roaming\\Python\\Python36\\site-packages\\cx_Freeze\\windist.py", line 133, in add_files\ncab.commit(db)\nFile "C:\\Program Files (x86)\\Python36-32\\lib\\msilib_'),r("em",[e._v("init")]),e._v('_.py", line 217, in commit\nFCICreate(filename, self.files)')])],1),e._v(" "),r("p",[e._v("ValueError: FCI error 1")]),e._v(" "),r("p",[e._v("После удачной сборки появятся две папки: папка "),r("em",[e._v("build")]),e._v(", внутри которой будет уже знакомая нам папка "),r("em",[e._v("exe.win32-3.6")]),e._v(" (мы ведь удалили параметр "),r("em",[e._v("build_exe")]),e._v("), и папка "),r("em",[e._v("dist")]),e._v(", внутри которой будет лежать файл "),r("em",[e._v("hello_world-0.0.15-win32.msi")]),e._v(". МЫ сделали очень простой инсталятор, если его запустить, то единственное, что он спросит пользователя, это папка, куда устанавливать программу:")]),e._v(" "),r("p",[r("img",{attrs:{src:"https://jenyay.net/uploads/Programming/Cxfreeze/example_14_installer.png",alt:""}})]),e._v(" "),r("p",[e._v('Сейчас инсталятор даже не создает иконку в меню "Пуск", давайте ее добавим ('),r("a",{attrs:{href:"https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2014-1",target:"_blank",rel:"noopener noreferrer"}},[e._v("Example 14-1"),r("OutboundLink")],1),e._v("). В исправленном файле "),r("em",[e._v("setup.py")]),e._v(" мы передадим два новых параметра в конструктор класса "),r("em",[e._v("Executable")]),e._v(" - "),r("em",[e._v("shortcutName")]),e._v(" и "),r("em",[e._v("shortcutDir")]),e._v(". Параметр "),r("em",[e._v("shortcutName")]),e._v(' задает имя, которое будет отображаться в меню "Пуск", а '),r("em",[e._v("shortcutDir")]),e._v(" должно быть строкой из "),r("a",{attrs:{href:"https://msdn.microsoft.com/en-us/library/aa370905v=vs.85.aspx#System_Folder_Properties",target:"_blank",rel:"noopener noreferrer"}},[e._v("этой таблицы"),r("OutboundLink")],1),e._v(", указывающей, в какую системную папку следует поместить ярлык. В нашем случае мы поместим ярлык в C:\\ProgramData\\Microsoft\\Windows\\Start Menu\\Programs, что задается параметром shortcutDir='ProgramMenuFolder'.")]),e._v(" "),r("h1",{attrs:{id:"coding-utf-8-24"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#coding-utf-8-24"}},[e._v("#")]),e._v(" coding: utf-8")]),e._v(" "),r("p",[e._v("from cx_Freeze import setup, Executable")]),e._v(" "),r("p",[e._v("executables = [Executable('example.py',"),r("br"),e._v("\n                          targetName='hello_wx.exe',"),r("br"),e._v("\n                          base='Win32GUI',"),r("br"),e._v("\n                          icon='example.ico',"),r("br"),e._v("\n                          shortcutName='Hello wxPython Application',"),r("br"),e._v("\n                          shortcutDir='ProgramMenuFolder')]")]),e._v(" "),r("p",[e._v("excludes = ['logging', 'unittest', 'email', 'html', 'http', 'urllib', 'xml',"),r("br"),e._v("\n            'unicodedata', 'bz2', 'select']")]),e._v(" "),r("p",[e._v("zip_include_packages = ['collections', 'encodings', 'importlib', 'wx']")]),e._v(" "),r("p",[e._v("options = {"),r("br"),e._v("\n    'build_exe': {"),r("br"),e._v("\n        'include_msvcr': True,"),r("br"),e._v("\n        'excludes': excludes,"),r("br"),e._v("\n        'zip_include_packages': zip_include_packages,"),r("br"),e._v("\n    }"),r("br"),e._v("\n}")]),e._v(" "),r("p",[e._v("setup(name='hello_world',"),r("br"),e._v("\n      version='0.0.14',"),r("br"),e._v("\n      description='My Hello World App!',"),r("br"),e._v("\n      executables=executables,"),r("br"),e._v("\n      options=options)")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=40",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("Если теперь выполнить команду "),r("em",[e._v("python setup.py bdist_msi")]),e._v(', после чего запустить инсталятор и выполнить установку программы, то в меню "Пуск" появится иконка нашей программы:')]),e._v(" "),r("p",[r("img",{attrs:{src:"https://jenyay.net/uploads/Programming/Cxfreeze/example_14-1_menu.png",alt:""}})]),e._v(" "),r("p",[e._v("Создание MSI - это большая тема, достойная отдельной статьи, поэтому здесь мы ограничимся совсем коротким примером. К сожалению, в документации по cx_Freeze эта тема очень плохо описана, если вы хотите гибко настраивать параметры создаваемого инсталятора, то можете начать с этих двух ссылок - "),r("a",{attrs:{href:"https://bitbucket.org/anthony_tuininga/cx_freeze/issues/48/documentation-of-how-to-create-desktop-or",target:"_blank",rel:"noopener noreferrer"}},[e._v("раз"),r("OutboundLink")],1),e._v(" и "),r("a",{attrs:{href:"https://stackoverflow.com/questions/15734703/use-cx-freeze-to-create-an-msi-that-adds-a-shortcut-to-the-desktop",target:"_blank",rel:"noopener noreferrer"}},[e._v("два"),r("OutboundLink")],1),e._v(", но готовьтесь к тому, что вам придется разобраться с тем, как устроен формат MSI по MSDN. Хотя в документации к cx_Freeze говорится, что для создания сложных инсталяторов лучше использовать сторонние приложения, например "),r("a",{attrs:{href:"http://www.jrsoftware.org/isinfo.php",target:"_blank",rel:"noopener noreferrer"}},[e._v("Inno Setup"),r("OutboundLink")],1),e._v(".")]),e._v(" "),r("h3",{attrs:{id:"_13-скрипт-cxfreeze-quickstart-для-создания-фаила-setup-py"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_13-скрипт-cxfreeze-quickstart-для-создания-фаила-setup-py"}},[e._v("#")]),e._v(" 13. Скрипт cxfreeze-quickstart для создания файла setup.py")]),e._v(" "),r("p",[e._v("До сих пор мы предполагали, что файл "),r("em",[e._v("setup.py")]),e._v(" мы создавали сами с чистого листа. В этом нет ничего сложного, но для облегчения создания этого файла к библиотеке cx_Freeze прилагается скрипт "),r("em",[e._v("cxfreeze-quickstart")]),e._v(". После запуска этого скрипта он предложит ответить на несколько вопросов и создаст заготовку с уже частично настроенным файлом "),r("em",[e._v("setup.py")]),e._v(".")]),e._v(" "),r("p",[e._v("Но прежде, чем демонстрировать работу этого скрипта, надо сказать пару слов о запуске его под Windows. Дело в том, что скрипт "),r("em",[e._v("cxfreeze-quickstart")]),e._v(" поставляется в виде python-скрипта в формате, принятом в Linux - в виде файла с именем "),r("em",[e._v("cxfreeze-quickstart")]),e._v(" без расширения. Под Windows этот файл расположен в папке "),r("em",[e._v("Scripts")]),e._v(" внутри папки с Python. Например, если вы устанавливали cx_Freeze без использования virtualenv в папку пользователя (без использования прав администратора), то это будет папка _C:\\Users\\USERNAME\\AppData\\Roaming\\Python\\Scripts_ .")]),e._v(" "),r("p",[e._v("Содержимое файла "),r("em",[e._v("cxfreeze-quickstart")]),e._v(" очень короткое:")]),e._v(" "),r("p",[e._v("#!c:\\python27\\python.exe"),r("br"),e._v("\nfrom cx_Freeze.setupwriter import main")]),e._v(" "),r("p",[e._v("main()")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=41",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("Под Windows, если вы хотите использовать скрипт "),r("em",[e._v("cxfreeze-quickstart")]),e._v(" проще всего скопировать его из указанной выше папки в папку с вашим проектом, переименовать его в "),r("em",[e._v("cxfreeze-quickstart.py")]),e._v(" и запустить с помощью команды")]),e._v(" "),r("p",[e._v("python cxfreeze-quickstart.py")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=42",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("Давайте запустим его и введем некоторые параметры ("),r("a",{attrs:{href:"https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2015",target:"_blank",rel:"noopener noreferrer"}},[e._v("Example 15"),r("OutboundLink")],1),e._v("):")]),e._v(" "),r("p",[e._v("$ python cxfreeze-quickstart.py")]),e._v(" "),r("p",[r("strong",[e._v("Project name:")]),e._v(" My project"),r("br"),e._v(" "),r("strong",[e._v("Version [1.0]:")]),e._v(" 0.0.14"),r("br"),e._v(" "),r("strong",[e._v("Description:")]),e._v(" Example for article."),r("br"),e._v(" "),r("strong",[e._v("Python file to make executable from:")]),e._v(" example_15.py"),r("br"),e._v(" "),r("strong",[e._v("Executable file name [example_15]:")]),e._v(" hello.exe"),r("br"),e._v(" "),r("strong",[e._v("(C)onsole application, (G)UI application, or (S)ervice [C]:")]),e._v(" G"),r("br"),e._v(" "),r("strong",[e._v("Save setup script to [setup.py]:")])]),e._v(" "),r("p",[e._v("'''Setup script written to setup.py; run it as:")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[e._v("python setup.py build\n")])])]),r("p",[e._v("Run this now [n]?''' n")]),e._v(" "),r("p",[e._v("Для наглядности строки, которые выводит скрипт "),r("em",[e._v("cxfreeze-quickstart")]),e._v(", выделены полужирным шрифтом.")]),e._v(" "),r("p",[e._v("После того, как мы ответим на все вопросы, будет создан файл "),r("em",[e._v("setup.py")]),e._v(" со следующим содержимым:")]),e._v(" "),r("p",[e._v("from cx_Freeze import setup, Executable")]),e._v(" "),r("h1",{attrs:{id:"dependencies-are-automatically-detected-but-it-might-need"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#dependencies-are-automatically-detected-but-it-might-need"}},[e._v("#")]),e._v(" Dependencies are automatically detected, but it might need")]),e._v(" "),r("h1",{attrs:{id:"fine-tuning"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#fine-tuning"}},[e._v("#")]),e._v(" fine tuning.")]),e._v(" "),r("p",[e._v("buildOptions = dict(packages = [], excludes = [])")]),e._v(" "),r("p",[e._v("import sys"),r("br"),e._v("\nbase = 'Win32GUI' if sys.platform=='win32' else None")]),e._v(" "),r("p",[e._v("executables = ["),r("br"),e._v("\n    Executable('example_15.py', base=base, targetName = 'hello.exe')"),r("br"),e._v("\n]")]),e._v(" "),r("p",[e._v("setup(name='My project',"),r("br"),e._v("\n      version = '0.0.15',"),r("br"),e._v("\n      description = 'Example for article.',"),r("br"),e._v("\n      options = dict(build_exe = buildOptions),"),r("br"),e._v("\n      executables = executables)")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://jenyay.net/Programming/Cxfreeze?action=sourceblock&num=43",target:"_blank",rel:"noopener noreferrer"}},[e._v("Исходник"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("А дальше мы можем заполнять недостающие параметры самостоятельно.")]),e._v(" "),r("h3",{attrs:{id:"_14-заключение"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_14-заключение"}},[e._v("#")]),e._v(" 14. Заключение")]),e._v(" "),r("p",[e._v("Мы рассмотрели основы использования библиотеки cx_Freeze для создания запускаемых файлов из python-скриптов. Мы научились создавать файл с параметрами сборки, который обычно называется "),r("em",[e._v("setup.py")]),e._v(" , как с нуля, так и с помощью скрипта "),r("em",[e._v("cxfreeze-quickstart")]),e._v(". Разобрались с некоторыми параметрами, которые влияют на создание запускаемых файлов, а именно: как исключать лишние модули из сборки, как добавлять необходимые модули вручную, как менять папку для сборки. Мы рассмотрели особенности создания запускаемых файлов из скриптов, создающих графический интерфейс на примере wxPython, рассмотрели основы для создания инсталятора MSI под Windows.")]),e._v(" "),r("p",[e._v("Но библиотека cx_Freeze предлагает еще больше возможностей, которые остались за рамками статьи. Например, мы ничего не сказали о задании параметров сборки через командную строку (эти параметры могут заменять параметры, указанные в файле "),r("em",[e._v("setup.py")]),e._v("). Мы ничего не сказали о сборке запускаемых файлов и инсталяторов под другие операционные системы (Linux и Mac OS). Также за рамками статьи остались некоторые параметры, которые можно использовать в скрипте сборки "),r("em",[e._v("setup.py")]),e._v(". Обо всем этом вы можете прочитать в "),r("a",{attrs:{href:"http://cx-freeze.readthedocs.io/en/latest",target:"_blank",rel:"noopener noreferrer"}},[e._v("официальной документации"),r("OutboundLink")],1),e._v(" библиотеки cx_Freeze.")]),e._v(" "),r("p",[e._v("И в завершение надо сказать, что cx_Freeze "),r("strong",[e._v("не")]),e._v(" позволяет делать. Во-первых, с помощью cx_Freeze вы можете делать сборки только под ту операционную систему, в которой вы работаете в данный момент, т.е. cx_Freeze - не инструмент для кросскомпиляции. И, во-вторых, в отличие от других подобных инструментов (например, "),r("a",{attrs:{href:"http://www.pyinstaller.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("pyInstaller"),r("OutboundLink")],1),e._v("), cx_Freeze не позволяет упаковать все необходимые файлы в один exe-шник.")]),e._v(" "),r("p",[e._v("На этом мы закончим статью, надеюсь, что она будет вам полезна. Еще раз напомню ссылку на github, где вы можете скачать все примеры, используемые в статье - "),r("a",{attrs:{href:"https://github.com/Jenyay/cx_freeze_examples",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/Jenyay/cx_freeze_examples"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("Возможно, вас также заинтересуют другие "),r("a",{attrs:{href:"http://jenyay.net/Programming/Python",target:"_blank",rel:"noopener noreferrer"}},[e._v("статьи по программированию на Python"),r("OutboundLink")],1),e._v(".")])])}),[],!1,null,null,null);r.default=_.exports}}]);
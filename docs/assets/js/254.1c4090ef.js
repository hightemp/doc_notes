(window.webpackJsonp=window.webpackJsonp||[]).push([[254],{525:function(t,s,r){"use strict";r.r(s);var _=r(14),v=Object(_.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("https://www.coderdoc.ru/start/18_yii2/step_23_relation/23_1_one_many.php")]),t._v(" "),s("h2",{attrs:{id:"связь-один-ко-многим-метод-hasmany"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#связь-один-ко-многим-метод-hasmany"}},[t._v("#")]),t._v(" Связь один ко многим — метод hasMany()")]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("Связь один ко многим, с помощью метода hasMany() (например, для одной категории может быть несколько товаров)")])]),t._v(" "),s("p",[s("strong",[t._v("Метод для связи с моделями")]),t._v(", обзательно должен начинаться с "),s("strong",[t._v("префикса")]),t._v(" get")]),t._v(" "),s("p",[t._v("Например: getProducts()")]),t._v(" "),s("p",[t._v("У "),s("strong",[t._v("метода для связи с моделями")]),t._v(" hasMany()")]),t._v(" "),s("ul",[s("li",[t._v("— "),s("strong",[t._v("1-м параметром")]),t._v(" это "),s("strong",[t._v("класс(название модели)")]),t._v(", с которым мы связываем данную "),s("strong",[t._v("модель")])]),t._v(" "),s("li",[t._v("— "),s("strong",[t._v("2-м параметром массив полей")]),t._v(", по которым указываем связь:\n"),s("ul",[s("li",[t._v("а) "),s("strong",[t._v("ключом")]),t._v(" будет "),s("strong",[t._v("столбец текущей модели")])]),t._v(" "),s("li",[t._v("б) "),s("strong",[t._v("значением")]),t._v(" будет "),s("strong",[t._v("столбец модели, с которой связываем")])])])])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("hasMany(Product::class, ['category_id' => 'id'])\n")])])]),s("p",[s("img",{attrs:{src:"https://www.coderdoc.ru/start/img/content-image/387.jpg",alt:"Контроллеры"}})])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("Создание объектов модели для связных моделей в контроллере")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://www.coderdoc.ru/start/img/content-image/388.jpg",alt:"Контроллеры"}})]),t._v(" "),s("p",[s("img",{attrs:{src:"https://www.coderdoc.ru/start/img/content-image/389.jpg",alt:"Контроллеры"}})])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("Вывод связанных данных")])]),t._v(" "),s("p",[t._v("Обращаемся по "),s("strong",[t._v("названию метода связи")]),t._v(", т.е "),s("strong",[t._v("метод связи")]),t._v(" называется getProducts, значит обращаться нужно к products")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://www.coderdoc.ru/start/img/content-image/390.jpg",alt:"Контроллеры"}})])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("Получение одной категории со свзными товарами, где id категории в GET-параметре")])]),t._v(" "),s("p",[t._v("В "),s("strong",[t._v("контроллере")]),t._v(" создаем "),s("strong",[t._v("метод для получения одной категории из аргументов метода")]),t._v(", значение которого будет браться из "),s("strong",[t._v("GET-параметра")]),t._v(":")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://www.coderdoc.ru/start/img/content-image/391.jpg",alt:"Контроллеры"}})]),t._v(" "),s("p",[t._v("Выводим "),s("strong",[t._v("категорию")]),t._v(", обращаясь по "),s("strong",[t._v("названию метода связи из модели")]),t._v(":")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://www.coderdoc.ru/start/img/content-image/392.jpg",alt:"Контроллеры"}})]),t._v(" "),s("p",[t._v("Ссылка для примера:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("yii2.test/web/index.php?r=category/view&id=1\n")])])])])])])}),[],!1,null,null,null);s.default=v.exports}}]);
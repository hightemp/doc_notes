<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>VuePress</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.e8e4f3a3.css" as="style"><link rel="preload" href="/assets/js/app.dec9f71a.js" as="script"><link rel="preload" href="/assets/js/2.733019b2.js" as="script"><link rel="preload" href="/assets/js/283.0b2d1fb1.js" as="script"><link rel="prefetch" href="/assets/js/10.3c45a7ae.js"><link rel="prefetch" href="/assets/js/100.945d3075.js"><link rel="prefetch" href="/assets/js/101.c304dc04.js"><link rel="prefetch" href="/assets/js/102.c4ea246f.js"><link rel="prefetch" href="/assets/js/103.3fa17de4.js"><link rel="prefetch" href="/assets/js/104.10b346d7.js"><link rel="prefetch" href="/assets/js/105.37af8494.js"><link rel="prefetch" href="/assets/js/106.580b656c.js"><link rel="prefetch" href="/assets/js/107.bbf35ca8.js"><link rel="prefetch" href="/assets/js/108.ef31db2d.js"><link rel="prefetch" href="/assets/js/109.e0b67167.js"><link rel="prefetch" href="/assets/js/11.2369400d.js"><link rel="prefetch" href="/assets/js/110.f5f9eacf.js"><link rel="prefetch" href="/assets/js/111.a566b9a5.js"><link rel="prefetch" href="/assets/js/112.9872e360.js"><link rel="prefetch" href="/assets/js/113.55c7a352.js"><link rel="prefetch" href="/assets/js/114.12ee164e.js"><link rel="prefetch" href="/assets/js/115.1fb2093f.js"><link rel="prefetch" href="/assets/js/116.d46141e0.js"><link rel="prefetch" href="/assets/js/117.d60c7d89.js"><link rel="prefetch" href="/assets/js/118.c3b7612c.js"><link rel="prefetch" href="/assets/js/119.10367318.js"><link rel="prefetch" href="/assets/js/12.286d27d6.js"><link rel="prefetch" href="/assets/js/120.be792f55.js"><link rel="prefetch" href="/assets/js/121.9b95acc0.js"><link rel="prefetch" href="/assets/js/122.eaab2843.js"><link rel="prefetch" href="/assets/js/123.cc552dc6.js"><link rel="prefetch" href="/assets/js/124.cce7d459.js"><link rel="prefetch" href="/assets/js/125.c5c5f203.js"><link rel="prefetch" href="/assets/js/126.9fb20891.js"><link rel="prefetch" href="/assets/js/127.06235e8b.js"><link rel="prefetch" href="/assets/js/128.a7d21829.js"><link rel="prefetch" href="/assets/js/129.cf5cb2cd.js"><link rel="prefetch" href="/assets/js/13.47981763.js"><link rel="prefetch" href="/assets/js/130.53cfb33f.js"><link rel="prefetch" href="/assets/js/131.3a8b27b3.js"><link rel="prefetch" href="/assets/js/132.872dde3d.js"><link rel="prefetch" href="/assets/js/133.82865bbc.js"><link rel="prefetch" href="/assets/js/134.f3b5d42f.js"><link rel="prefetch" href="/assets/js/135.4c91805f.js"><link rel="prefetch" href="/assets/js/136.dcb8f9e2.js"><link rel="prefetch" href="/assets/js/137.07d2bab8.js"><link rel="prefetch" href="/assets/js/138.ea94033d.js"><link rel="prefetch" href="/assets/js/139.79ad652e.js"><link rel="prefetch" href="/assets/js/14.2f49c0ab.js"><link rel="prefetch" href="/assets/js/140.d6518035.js"><link rel="prefetch" href="/assets/js/141.6b166b92.js"><link rel="prefetch" href="/assets/js/142.c4466c2b.js"><link rel="prefetch" href="/assets/js/143.141061b6.js"><link rel="prefetch" href="/assets/js/144.5cee20dc.js"><link rel="prefetch" href="/assets/js/145.97956c27.js"><link rel="prefetch" href="/assets/js/146.23cb4066.js"><link rel="prefetch" href="/assets/js/147.bb1e6c1a.js"><link rel="prefetch" href="/assets/js/148.a5bd7077.js"><link rel="prefetch" href="/assets/js/149.57694ad8.js"><link rel="prefetch" href="/assets/js/15.0cb65b1e.js"><link rel="prefetch" href="/assets/js/150.faf7fa9f.js"><link rel="prefetch" href="/assets/js/151.2ee47c84.js"><link rel="prefetch" href="/assets/js/152.9a82c536.js"><link rel="prefetch" href="/assets/js/153.5bd8c4a5.js"><link rel="prefetch" href="/assets/js/154.7cdc00ab.js"><link rel="prefetch" href="/assets/js/155.a2a1c88e.js"><link rel="prefetch" href="/assets/js/156.92796b90.js"><link rel="prefetch" href="/assets/js/157.f247bf22.js"><link rel="prefetch" href="/assets/js/158.eaeb08c7.js"><link rel="prefetch" href="/assets/js/159.555a6593.js"><link rel="prefetch" href="/assets/js/16.6fd62cc7.js"><link rel="prefetch" href="/assets/js/160.bf19eb80.js"><link rel="prefetch" href="/assets/js/161.7ce1d12b.js"><link rel="prefetch" href="/assets/js/162.f6dc5f4b.js"><link rel="prefetch" href="/assets/js/163.16df5c09.js"><link rel="prefetch" href="/assets/js/164.bdd3ee47.js"><link rel="prefetch" href="/assets/js/165.ba85290c.js"><link rel="prefetch" href="/assets/js/166.6b1a560c.js"><link rel="prefetch" href="/assets/js/167.59b9445e.js"><link rel="prefetch" href="/assets/js/168.69cc230d.js"><link rel="prefetch" href="/assets/js/169.55882eed.js"><link rel="prefetch" href="/assets/js/17.94447945.js"><link rel="prefetch" href="/assets/js/170.129124fc.js"><link rel="prefetch" href="/assets/js/171.cf1a85f9.js"><link rel="prefetch" href="/assets/js/172.36f3cdfc.js"><link rel="prefetch" href="/assets/js/173.cddbfa1b.js"><link rel="prefetch" href="/assets/js/174.a32fe0ad.js"><link rel="prefetch" href="/assets/js/175.c1414217.js"><link rel="prefetch" href="/assets/js/176.a678371f.js"><link rel="prefetch" href="/assets/js/177.583b2ac2.js"><link rel="prefetch" href="/assets/js/178.6dd3c8d6.js"><link rel="prefetch" href="/assets/js/179.dac91cd2.js"><link rel="prefetch" href="/assets/js/18.75e97365.js"><link rel="prefetch" href="/assets/js/180.9dfd9728.js"><link rel="prefetch" href="/assets/js/181.9afd854f.js"><link rel="prefetch" href="/assets/js/182.d0dbacf1.js"><link rel="prefetch" href="/assets/js/183.1dbeb096.js"><link rel="prefetch" href="/assets/js/184.27b34aeb.js"><link rel="prefetch" href="/assets/js/185.13641773.js"><link rel="prefetch" href="/assets/js/186.d79c8675.js"><link rel="prefetch" href="/assets/js/187.484bb501.js"><link rel="prefetch" href="/assets/js/188.f73564d2.js"><link rel="prefetch" href="/assets/js/189.25f0971d.js"><link rel="prefetch" href="/assets/js/19.9abedc68.js"><link rel="prefetch" href="/assets/js/190.00b862d0.js"><link rel="prefetch" href="/assets/js/191.a255f76b.js"><link rel="prefetch" href="/assets/js/192.6b6a1c68.js"><link rel="prefetch" href="/assets/js/193.916ffb26.js"><link rel="prefetch" href="/assets/js/194.2c928fb3.js"><link rel="prefetch" href="/assets/js/195.20a9fc51.js"><link rel="prefetch" href="/assets/js/196.f2abf901.js"><link rel="prefetch" href="/assets/js/197.871f3d6a.js"><link rel="prefetch" href="/assets/js/198.3ea5cf81.js"><link rel="prefetch" href="/assets/js/199.3f37d030.js"><link rel="prefetch" href="/assets/js/20.1c33d690.js"><link rel="prefetch" href="/assets/js/200.7e20b89c.js"><link rel="prefetch" href="/assets/js/201.ae9ed05e.js"><link rel="prefetch" href="/assets/js/202.d686563a.js"><link rel="prefetch" href="/assets/js/203.5a9ac59e.js"><link rel="prefetch" href="/assets/js/204.4abf0169.js"><link rel="prefetch" href="/assets/js/205.94fe861e.js"><link rel="prefetch" href="/assets/js/206.76e93465.js"><link rel="prefetch" href="/assets/js/207.92c5e562.js"><link rel="prefetch" href="/assets/js/208.79f31d54.js"><link rel="prefetch" href="/assets/js/209.eb534898.js"><link rel="prefetch" href="/assets/js/21.de3ad1f7.js"><link rel="prefetch" href="/assets/js/210.38242c09.js"><link rel="prefetch" href="/assets/js/211.ca8aa9a4.js"><link rel="prefetch" href="/assets/js/212.189fa4e2.js"><link rel="prefetch" href="/assets/js/213.239f2bd6.js"><link rel="prefetch" href="/assets/js/214.b1a9ece6.js"><link rel="prefetch" href="/assets/js/215.823222d2.js"><link rel="prefetch" href="/assets/js/216.6c3fbaad.js"><link rel="prefetch" href="/assets/js/217.c2bd084b.js"><link rel="prefetch" href="/assets/js/218.7ad57fcc.js"><link rel="prefetch" href="/assets/js/219.4ef0266b.js"><link rel="prefetch" href="/assets/js/22.a45331de.js"><link rel="prefetch" href="/assets/js/220.e9fd4c5f.js"><link rel="prefetch" href="/assets/js/221.0b0f609a.js"><link rel="prefetch" href="/assets/js/222.ff25599e.js"><link rel="prefetch" href="/assets/js/223.8319d2d0.js"><link rel="prefetch" href="/assets/js/224.da5c4d3e.js"><link rel="prefetch" href="/assets/js/225.9378291a.js"><link rel="prefetch" href="/assets/js/226.0d8b2ef5.js"><link rel="prefetch" href="/assets/js/227.82cd2e2d.js"><link rel="prefetch" href="/assets/js/228.db49009d.js"><link rel="prefetch" href="/assets/js/229.e735fec4.js"><link rel="prefetch" href="/assets/js/23.de5de683.js"><link rel="prefetch" href="/assets/js/230.47e7011d.js"><link rel="prefetch" href="/assets/js/231.7f0e5905.js"><link rel="prefetch" href="/assets/js/232.a6cb0759.js"><link rel="prefetch" href="/assets/js/233.09bbd53b.js"><link rel="prefetch" href="/assets/js/234.b9341514.js"><link rel="prefetch" href="/assets/js/235.3563b4bf.js"><link rel="prefetch" href="/assets/js/236.7d5da9ca.js"><link rel="prefetch" href="/assets/js/237.c7a693f3.js"><link rel="prefetch" href="/assets/js/238.803df100.js"><link rel="prefetch" href="/assets/js/239.ef64fcf2.js"><link rel="prefetch" href="/assets/js/24.b363b117.js"><link rel="prefetch" href="/assets/js/240.2befed40.js"><link rel="prefetch" href="/assets/js/241.10a01506.js"><link rel="prefetch" href="/assets/js/242.3b369ac8.js"><link rel="prefetch" href="/assets/js/243.31958eb9.js"><link rel="prefetch" href="/assets/js/244.b9489a7d.js"><link rel="prefetch" href="/assets/js/245.b9b191e5.js"><link rel="prefetch" href="/assets/js/246.18aeb9f6.js"><link rel="prefetch" href="/assets/js/247.39cc492f.js"><link rel="prefetch" href="/assets/js/248.b08e232c.js"><link rel="prefetch" href="/assets/js/249.6d660682.js"><link rel="prefetch" href="/assets/js/25.5e2fe982.js"><link rel="prefetch" href="/assets/js/250.235cee85.js"><link rel="prefetch" href="/assets/js/251.66edac43.js"><link rel="prefetch" href="/assets/js/252.28ec4821.js"><link rel="prefetch" href="/assets/js/253.828cd3b6.js"><link rel="prefetch" href="/assets/js/254.6b19e7b7.js"><link rel="prefetch" href="/assets/js/255.7808e23e.js"><link rel="prefetch" href="/assets/js/256.33572d7d.js"><link rel="prefetch" href="/assets/js/257.8044242f.js"><link rel="prefetch" href="/assets/js/258.2eb93b76.js"><link rel="prefetch" href="/assets/js/259.6d222e72.js"><link rel="prefetch" href="/assets/js/26.b3336cf9.js"><link rel="prefetch" href="/assets/js/260.b3345d12.js"><link rel="prefetch" href="/assets/js/261.6f64a148.js"><link rel="prefetch" href="/assets/js/262.283e9e13.js"><link rel="prefetch" href="/assets/js/263.10934b95.js"><link rel="prefetch" href="/assets/js/264.52a220d8.js"><link rel="prefetch" href="/assets/js/265.3099a02f.js"><link rel="prefetch" href="/assets/js/266.d093c25c.js"><link rel="prefetch" href="/assets/js/267.ffd0ea6c.js"><link rel="prefetch" href="/assets/js/268.71a5b2a5.js"><link rel="prefetch" href="/assets/js/269.e02d0a12.js"><link rel="prefetch" href="/assets/js/27.bacb7462.js"><link rel="prefetch" href="/assets/js/270.717bdd21.js"><link rel="prefetch" href="/assets/js/271.ceef3037.js"><link rel="prefetch" href="/assets/js/272.b040f2d8.js"><link rel="prefetch" href="/assets/js/273.e06cd101.js"><link rel="prefetch" href="/assets/js/274.9c206962.js"><link rel="prefetch" href="/assets/js/275.46ae609d.js"><link rel="prefetch" href="/assets/js/276.16e277a9.js"><link rel="prefetch" href="/assets/js/277.fcb15734.js"><link rel="prefetch" href="/assets/js/278.0cc37dab.js"><link rel="prefetch" href="/assets/js/279.55e66e78.js"><link rel="prefetch" href="/assets/js/28.f9359f93.js"><link rel="prefetch" href="/assets/js/280.e4809dbc.js"><link rel="prefetch" href="/assets/js/281.0889dba5.js"><link rel="prefetch" href="/assets/js/282.459e1cec.js"><link rel="prefetch" href="/assets/js/284.ffe54aa9.js"><link rel="prefetch" href="/assets/js/285.d9ed13ce.js"><link rel="prefetch" href="/assets/js/286.5574e754.js"><link rel="prefetch" href="/assets/js/287.f9187311.js"><link rel="prefetch" href="/assets/js/288.cd2b56c3.js"><link rel="prefetch" href="/assets/js/289.8552c742.js"><link rel="prefetch" href="/assets/js/29.9a6765b0.js"><link rel="prefetch" href="/assets/js/290.7d0673a7.js"><link rel="prefetch" href="/assets/js/291.5c185731.js"><link rel="prefetch" href="/assets/js/292.fab6d535.js"><link rel="prefetch" href="/assets/js/293.457fd94a.js"><link rel="prefetch" href="/assets/js/294.748e6f29.js"><link rel="prefetch" href="/assets/js/295.99a4bc36.js"><link rel="prefetch" href="/assets/js/296.f02a6f54.js"><link rel="prefetch" href="/assets/js/297.a2899d72.js"><link rel="prefetch" href="/assets/js/298.8e5a5ef7.js"><link rel="prefetch" href="/assets/js/299.eff3af7f.js"><link rel="prefetch" href="/assets/js/3.e54eedac.js"><link rel="prefetch" href="/assets/js/30.8899ae33.js"><link rel="prefetch" href="/assets/js/300.ea47d06a.js"><link rel="prefetch" href="/assets/js/301.0f51c16c.js"><link rel="prefetch" href="/assets/js/302.0672bd76.js"><link rel="prefetch" href="/assets/js/303.99557654.js"><link rel="prefetch" href="/assets/js/304.069ee3f6.js"><link rel="prefetch" href="/assets/js/305.bbbcb69f.js"><link rel="prefetch" href="/assets/js/306.458f04ac.js"><link rel="prefetch" href="/assets/js/307.d8a121f6.js"><link rel="prefetch" href="/assets/js/308.4e353bdf.js"><link rel="prefetch" href="/assets/js/309.41135b53.js"><link rel="prefetch" href="/assets/js/31.907a86ff.js"><link rel="prefetch" href="/assets/js/310.d9900cca.js"><link rel="prefetch" href="/assets/js/311.4c8d1049.js"><link rel="prefetch" href="/assets/js/312.e461412c.js"><link rel="prefetch" href="/assets/js/313.b481fec8.js"><link rel="prefetch" href="/assets/js/314.7c9d7531.js"><link rel="prefetch" href="/assets/js/315.493dd60b.js"><link rel="prefetch" href="/assets/js/316.b892fdb3.js"><link rel="prefetch" href="/assets/js/317.0488dbc0.js"><link rel="prefetch" href="/assets/js/318.e3024dfc.js"><link rel="prefetch" href="/assets/js/319.cbeb3017.js"><link rel="prefetch" href="/assets/js/32.566fa885.js"><link rel="prefetch" href="/assets/js/320.6bbdcb6f.js"><link rel="prefetch" href="/assets/js/321.393ba5b9.js"><link rel="prefetch" href="/assets/js/322.e1ac37db.js"><link rel="prefetch" href="/assets/js/323.ecada34d.js"><link rel="prefetch" href="/assets/js/324.b5a78957.js"><link rel="prefetch" href="/assets/js/325.78a07f6c.js"><link rel="prefetch" href="/assets/js/326.18acb16b.js"><link rel="prefetch" href="/assets/js/327.f1fdf85e.js"><link rel="prefetch" href="/assets/js/328.cb4e6a88.js"><link rel="prefetch" href="/assets/js/329.7064a56d.js"><link rel="prefetch" href="/assets/js/33.089e8d27.js"><link rel="prefetch" href="/assets/js/330.eb5d365c.js"><link rel="prefetch" href="/assets/js/331.7413cc1f.js"><link rel="prefetch" href="/assets/js/332.268810a7.js"><link rel="prefetch" href="/assets/js/333.14b9f266.js"><link rel="prefetch" href="/assets/js/334.79f3c205.js"><link rel="prefetch" href="/assets/js/335.4c1fa2f4.js"><link rel="prefetch" href="/assets/js/336.2a555b98.js"><link rel="prefetch" href="/assets/js/337.c8d1a7eb.js"><link rel="prefetch" href="/assets/js/338.027e65ab.js"><link rel="prefetch" href="/assets/js/339.e913eb02.js"><link rel="prefetch" href="/assets/js/34.5cbcf358.js"><link rel="prefetch" href="/assets/js/340.ccfb0701.js"><link rel="prefetch" href="/assets/js/341.2bf59012.js"><link rel="prefetch" href="/assets/js/342.43214bf6.js"><link rel="prefetch" href="/assets/js/343.860e5acc.js"><link rel="prefetch" href="/assets/js/344.af2b1413.js"><link rel="prefetch" href="/assets/js/345.6dfaf1a7.js"><link rel="prefetch" href="/assets/js/346.4bccf6c8.js"><link rel="prefetch" href="/assets/js/347.c42d14ab.js"><link rel="prefetch" href="/assets/js/348.f00c8f2c.js"><link rel="prefetch" href="/assets/js/349.47f740a6.js"><link rel="prefetch" href="/assets/js/35.e9eab731.js"><link rel="prefetch" href="/assets/js/350.30d3e969.js"><link rel="prefetch" href="/assets/js/351.1295792b.js"><link rel="prefetch" href="/assets/js/352.363b9177.js"><link rel="prefetch" href="/assets/js/353.601c5370.js"><link rel="prefetch" href="/assets/js/354.047a1d22.js"><link rel="prefetch" href="/assets/js/355.3f32b1c2.js"><link rel="prefetch" href="/assets/js/356.1816f3c9.js"><link rel="prefetch" href="/assets/js/357.c81f86b9.js"><link rel="prefetch" href="/assets/js/358.a2fdfdd3.js"><link rel="prefetch" href="/assets/js/359.a5e1fa6a.js"><link rel="prefetch" href="/assets/js/36.a655d7e3.js"><link rel="prefetch" href="/assets/js/360.cecc875b.js"><link rel="prefetch" href="/assets/js/361.c8915051.js"><link rel="prefetch" href="/assets/js/362.5c07a421.js"><link rel="prefetch" href="/assets/js/363.adc2e062.js"><link rel="prefetch" href="/assets/js/364.f0f96ce6.js"><link rel="prefetch" href="/assets/js/365.a4a5cc32.js"><link rel="prefetch" href="/assets/js/366.4dbc70ea.js"><link rel="prefetch" href="/assets/js/367.626ad073.js"><link rel="prefetch" href="/assets/js/368.033096e1.js"><link rel="prefetch" href="/assets/js/369.ba1ab9e8.js"><link rel="prefetch" href="/assets/js/37.46464e89.js"><link rel="prefetch" href="/assets/js/370.5a4de7d9.js"><link rel="prefetch" href="/assets/js/371.8e19304c.js"><link rel="prefetch" href="/assets/js/372.00d24aa5.js"><link rel="prefetch" href="/assets/js/373.5d43f401.js"><link rel="prefetch" href="/assets/js/374.eeea88f6.js"><link rel="prefetch" href="/assets/js/38.5710d281.js"><link rel="prefetch" href="/assets/js/39.22cd4ce1.js"><link rel="prefetch" href="/assets/js/4.d12742be.js"><link rel="prefetch" href="/assets/js/40.ac785c50.js"><link rel="prefetch" href="/assets/js/41.e52206b8.js"><link rel="prefetch" href="/assets/js/42.fbd0e0ce.js"><link rel="prefetch" href="/assets/js/43.e0830f9d.js"><link rel="prefetch" href="/assets/js/44.23c6ba45.js"><link rel="prefetch" href="/assets/js/45.b9a24221.js"><link rel="prefetch" href="/assets/js/46.83cf1192.js"><link rel="prefetch" href="/assets/js/47.220fb3ae.js"><link rel="prefetch" href="/assets/js/48.130760fa.js"><link rel="prefetch" href="/assets/js/49.d6f4ded1.js"><link rel="prefetch" href="/assets/js/5.216cae74.js"><link rel="prefetch" href="/assets/js/50.9cbfe92f.js"><link rel="prefetch" href="/assets/js/51.3446f694.js"><link rel="prefetch" href="/assets/js/52.72649f7e.js"><link rel="prefetch" href="/assets/js/53.6f0f60f7.js"><link rel="prefetch" href="/assets/js/54.a1d865f2.js"><link rel="prefetch" href="/assets/js/55.474dea5b.js"><link rel="prefetch" href="/assets/js/56.34577514.js"><link rel="prefetch" href="/assets/js/57.f6fc2205.js"><link rel="prefetch" href="/assets/js/58.a47a439e.js"><link rel="prefetch" href="/assets/js/59.06b99b85.js"><link rel="prefetch" href="/assets/js/6.2d0a63f8.js"><link rel="prefetch" href="/assets/js/60.20e5a404.js"><link rel="prefetch" href="/assets/js/61.06eb00d3.js"><link rel="prefetch" href="/assets/js/62.ef43b805.js"><link rel="prefetch" href="/assets/js/63.96d7abec.js"><link rel="prefetch" href="/assets/js/64.828a623b.js"><link rel="prefetch" href="/assets/js/65.8270a1b7.js"><link rel="prefetch" href="/assets/js/66.3da895e0.js"><link rel="prefetch" href="/assets/js/67.30e83906.js"><link rel="prefetch" href="/assets/js/68.c5db27df.js"><link rel="prefetch" href="/assets/js/69.561fe0b5.js"><link rel="prefetch" href="/assets/js/7.929bde26.js"><link rel="prefetch" href="/assets/js/70.0b3415d2.js"><link rel="prefetch" href="/assets/js/71.4351b7f3.js"><link rel="prefetch" href="/assets/js/72.ce1be2c6.js"><link rel="prefetch" href="/assets/js/73.d9f4c187.js"><link rel="prefetch" href="/assets/js/74.b8e2035e.js"><link rel="prefetch" href="/assets/js/75.f721109d.js"><link rel="prefetch" href="/assets/js/76.1fffa028.js"><link rel="prefetch" href="/assets/js/77.392e6f02.js"><link rel="prefetch" href="/assets/js/78.788b59e8.js"><link rel="prefetch" href="/assets/js/79.0118ba12.js"><link rel="prefetch" href="/assets/js/8.81ac42c3.js"><link rel="prefetch" href="/assets/js/80.41299197.js"><link rel="prefetch" href="/assets/js/81.d5c7efcc.js"><link rel="prefetch" href="/assets/js/82.0686785a.js"><link rel="prefetch" href="/assets/js/83.1c3c9afc.js"><link rel="prefetch" href="/assets/js/84.77cbfea0.js"><link rel="prefetch" href="/assets/js/85.a72511bb.js"><link rel="prefetch" href="/assets/js/86.ee7de8e7.js"><link rel="prefetch" href="/assets/js/87.6725a162.js"><link rel="prefetch" href="/assets/js/88.de798e46.js"><link rel="prefetch" href="/assets/js/89.e3b19fd4.js"><link rel="prefetch" href="/assets/js/9.0286aa6e.js"><link rel="prefetch" href="/assets/js/90.15a0b0a1.js"><link rel="prefetch" href="/assets/js/91.9c080a3d.js"><link rel="prefetch" href="/assets/js/92.2d7e99de.js"><link rel="prefetch" href="/assets/js/93.3a7c19cd.js"><link rel="prefetch" href="/assets/js/94.da299190.js"><link rel="prefetch" href="/assets/js/95.54d70fa0.js"><link rel="prefetch" href="/assets/js/96.68967f40.js"><link rel="prefetch" href="/assets/js/97.6ec5cb5a.js"><link rel="prefetch" href="/assets/js/98.4ce5bd4a.js"><link rel="prefetch" href="/assets/js/99.de11b345.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e8e4f3a3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><p>https://jenyay.net/Programming/Cxfreeze</p> <h1 id="создание-запускаемых-фаилов-из-скриптов-на-языке-python-с-помощью-cx-freeze"><a href="#создание-запускаемых-фаилов-из-скриптов-на-языке-python-с-помощью-cx-freeze" class="header-anchor">#</a> Создание запускаемых файлов из скриптов на языке Python с помощью cx_Freeze</h1> <p><img src="https://jenyay.net/uploads/Programming/Cxfreeze/cx_freeze_cover_site.png" alt=""></p> <h3 id="содержание"><a href="#содержание" class="header-anchor">#</a> Содержание</h3> <ol><li><a href="https://jenyay.net/Programming/Cxfreeze#intro" target="_blank" rel="noopener noreferrer">Введение<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://jenyay.net/Programming/Cxfreeze#install" target="_blank" rel="noopener noreferrer">Установка<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://jenyay.net/Programming/Cxfreeze#example_01" target="_blank" rel="noopener noreferrer">Первый пример<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://jenyay.net/Programming/Cxfreeze#msvc" target="_blank" rel="noopener noreferrer">Добавление файлов Microsoft Visual C++ Redistributable<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://jenyay.net/Programming/Cxfreeze#clean" target="_blank" rel="noopener noreferrer">Избавляемся от лишних модулей<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://jenyay.net/Programming/Cxfreeze#renames" target="_blank" rel="noopener noreferrer">Наводим красоту в сборке<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://jenyay.net/Programming/Cxfreeze#add" target="_blank" rel="noopener noreferrer">Добавление модулей в сборку<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://jenyay.net/Programming/Cxfreeze#several" target="_blank" rel="noopener noreferrer">Сборка нескольких запускаемых файлов<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://jenyay.net/Programming/Cxfreeze#add_files" target="_blank" rel="noopener noreferrer">Добавление дополнительных файлов в сборку<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://jenyay.net/Programming/Cxfreeze#gui" target="_blank" rel="noopener noreferrer">Создание приложений с графическим интерфейсом<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://jenyay.net/Programming/Cxfreeze#icon" target="_blank" rel="noopener noreferrer">Установка иконки приложения<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://jenyay.net/Programming/Cxfreeze#msi" target="_blank" rel="noopener noreferrer">Создание инсталятора MSI<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://jenyay.net/Programming/Cxfreeze#cxfreeze_quickstart" target="_blank" rel="noopener noreferrer">Скрипт cxfreeze-quickstart для создания файла setup.py<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://jenyay.net/Programming/Cxfreeze#outro" target="_blank" rel="noopener noreferrer">Заключение<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ol> <h3 id="_1-введение"><a href="#_1-введение" class="header-anchor">#</a> 1. Введение</h3> <p>Python - отличный язык программирования для широкого круга задач, начиная от автоматизации рутинных действий до создания web- или настольных приложений с графическим интерфейсом. Но Python - интерпретируемый язык, а это значит, что если вы хотите распространять ваше приложение, то у пользователя должен быть установлен интерпретатор, на вход которого он должен подать исходные коды вашей программы. Если вы разрабатываете приложение под Linux или основная масса пользователей вашей программы - айтишники (программисты, админы и им сочувствующие), то требование установить интерпретатор Python скорее всего их не испугает. А вот заставлять устанавливать Python, а, возможно, еще и дополнительные библиотеки обычных пользователей - сомнительная идея.</p> <p>Однако, Python хорош еще тем, что ядро интерпретатора достаточно компактное, оно умещается в единственную dll-ку размером 3.5 МБ + дополнительные модули. Это позволяет сделать такой хак: скопируем в отдельную папку файл PythonXX.dll (где XX - номер версии интерпретатора Python) и также скомпилированные файлы *.pyc, созданные из исходных файлов вашего приложения и используемых модулей, а затем рядом с этими файлами создадим запускаемый файл .exe, который будет подменять и перенаправлять вызовы интерпретатора в скопированную dll-ку (это очень грубое представление работы создаваемого файла .exe, но для простоты оставим так). Набор этих файлов можно передавать конечному пользователю, он запустит запускаемый файл и даже не будет догадываться, что &quot;под капотом&quot; работает интерпретатор Python.</p> <p>Именно это и делает библиотека <a href="https://anthony-tuininga.github.io/cx_Freeze/" target="_blank" rel="noopener noreferrer">cx_Freeze<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, причем такой прием эта библиотека умеет применять для Windows, Linux и Mac OS. Эта статья будет посвящена использованию данной библиотеки. На простейших примерах мы рассмотрим основы работы с этой библиотекой cx_Freeze и различные сценарии ее использования.</p> <p>Все примеры в этой статье тестировались на Python 3.6 и cx_Freeze 5.0.2. cx_Freeze пока еще умеет работать с Python 2.7, но судя по коммитам на <a href="https://github.com/anthony-tuininga/cx_Freeze" target="_blank" rel="noopener noreferrer">github<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, следующая версия cx_Freeze 6 будет работать только с Python 3.5 и выше.</p> <h3 id="_2-установка"><a href="#_2-установка" class="header-anchor">#</a> 2. Установка</h3> <p>Устанавливается cx_Freeze стандартно через pip. Если вы хотите установить cx_Freeze глобально для всех пользователей системы, то нужно выполнить в консоли команду</p> <p>pip install cx_freeze</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=1" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Разумеется, для этого у вас должны быть права администратора, и консоль должна быть запущена от администратора.</p> <p>Или вы можете установить cx_Freeze только для вашего пользователя, тогда админские права не понадобятся:</p> <p>pip install cx_freeze --user</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=2" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>В реальном проекте идеологически более верно установить cx_Freeze внутри virtualenv, но в этом случае могут быть некоторые проблемы (<a href="https://github.com/anthony-tuininga/cx_Freeze/issues/275" target="_blank" rel="noopener noreferrer">например<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>).</p> <h3 id="_3-первыи-пример"><a href="#_3-первыи-пример" class="header-anchor">#</a> 3. Первый пример</h3> <p>Теперь, когда cx_Freeze установлен, можно приступать к изучению возможностей этой библиотеки. Все примеры из статьи вы можете найти на <a href="https://github.com/Jenyay/cx_freeze_examples" target="_blank" rel="noopener noreferrer">github<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Примеры последовательно пронумерованы в том порядке, как они описаны в статье. Приложение, которое мы будем упаковывать в запускаемые файлы, будет называться <em>example.py</em>.</p> <p>Для начала создадим простейший python-скрипт с именем <em>example.py</em>, который не импортирует никакие модули (<a href="https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2001" target="_blank" rel="noopener noreferrer">Example 01<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> на github):</p> <h1 id="example-py"><a href="#example-py" class="header-anchor">#</a> example.py</h1> <h1 id="coding-utf-8"><a href="#coding-utf-8" class="header-anchor">#</a> coding: utf-8</h1> <p>if <strong>name</strong> == '<strong>main</strong>':<br>
    print('Hello world!')</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=3" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Скорее всего нет смысла описывать, что делает данный скрипт. 😃 Желающие убедиться, что скрипт работает, могут выполнить команду:</p> <p>python example.py</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=4" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Если у вас установлено несколько версий Python, то под Windows можно воспользоваться утилитой <em>py</em> и явно указать номер версии интерпретатора:</p> <p>py -3.6 example.py</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=5" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>или</p> <p>py -3 example.py</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=6" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Давайте упакуем наш очень полезный скрипт в запускаемый файл, который можно будет передать пользователю. Для этого создадим файл <em>setup.py</em> со следующим содержимым:</p> <h1 id="coding-utf-8-2"><a href="#coding-utf-8-2" class="header-anchor">#</a> coding: utf-8</h1> <p>from cx_Freeze import setup, Executable</p> <p>executables = [Executable('example.py')]</p> <p>setup(name='hello_world',<br>
      version='0.0.1',<br>
      description='My Hello World App!',<br>
      executables=executables)</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=7" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Имя скрипта для сборки может быть произвольным, но обычно принято называть его <em>setup.py</em>, и мы будем придерживаться этого правила. Те, кто создавал Python-пакеты с помощью утилит <a href="https://docs.python.org/2/library/distutils.html" target="_blank" rel="noopener noreferrer">distutils<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> или <a href="https://pypi.python.org/pypi/setuptools" target="_blank" rel="noopener noreferrer">setuptools<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, увидят в работе с cx_Freeze что-то знакомое.</p> <p>Итак, в файле <em>setup.py</em> мы импортируем из модуля cx_Freeze функцию <em>setup</em> и класс <em>Executable</em>. Самое главное здесь - это функция <em>setup</em>, в нее передаются все параметры, которые описывают сборку. В параметрах функции <em>setup</em> мы указываем имя приложения (параметр <em>name</em>), номер версии (параметр <em>version</em>), краткое описание приложения (параметр <em>description</em>), а также параметр <em>executables</em>, который должен быть <strong>списком</strong> экземпляров класса <em>Executable</em>. Почему тут должен быть именно список, и не достаточно одного экземпляра класса <em>Executable</em> будет описано чуть позже в разделе <a href="https://jenyay.net/Programming/Cxfreeze#several" target="_blank" rel="noopener noreferrer">Сборка нескольких запускаемых файлов<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>Конструктор класса <em>Executable</em> может принимать достаточно большое количество параметров. Обязательным параметром является только имя запускаемого python-файла. Если ваша программа состоит из большого количества скриптов, то указывать нужно на тот файл, который запускал бы пользователь, если бы он запускал приложение из исходников. Полностью конструктор класса <em>Executable</em> выглядит следующим образом (класс описан в файле <a href="https://github.com/anthony-tuininga/cx_Freeze/blob/master/cx_Freeze/freezer.py" target="_blank" rel="noopener noreferrer">freezer.py<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> исходников cx_Freeze):</p> <p>class Executable(object):<br>
    def <strong>init</strong>(self, script, initScript = None, base = None,<br>
            targetName = None, icon = None, shortcutName = None,<br>
            shortcutDir = None, copyright = None, trademarks = None):</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=8" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Некоторыми из этих параметров мы еще воспользуемся, а некоторые останутся за рамками статьи, назначение многих из них понятно из названия переменных.</p> <p>Чтобы создать запускаемый файл, запустим консоль и перейдем в папку, где лежит файл <em>setup.py</em>. Затем нужно выполнить команду</p> <p>python setup.py build</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=9" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>На экран будет выведено достаточно много теста:</p> <p>running build
running build_exe
copying C:\Users\jenyay\AppData\Roaming\Python\Python36\site-packages\cx_Freeze\bases\Console.exe -&gt; build\exe.win32-3.6\example_01.exe
copying C:\Program Files (x86)\Python36-32\python36.dll -&gt; build\exe.win32-3.6\python36.dll
*** WARNING *** unable to create version resource
install pywin32 extensions first
writing zip file build\exe.win32-3.6\python36.zip</p> <p>Name                      File</p> <hr> <p>m BUILD_CONSTANTS
m <strong>future</strong>                C:\Program Files (x86)\Python36-32\lib_<em>future</em>_.py
m <strong>startup</strong>               C:\Users\jenyay\AppData\Roaming\Python\Python36\site-packages\cx_Freeze\initscripts_<em>startup</em>_.py
m _ast</p> <p>...</p> <p>m xml.parsers.expat         C:\Program Files (x86)\Python36-32\lib\xml\parsers\expat.py
m zipfile                   C:\Program Files (x86)\Python36-32\lib\zipfile.py
m zipimport
m zlib</p> <p>Missing modules:
? <strong>main</strong> imported from bdb, pdb
? _dummy_threading imported from dummy_threading
? _frozen_importlib imported from importlib, importlib.abc
? _frozen_importlib_external imported from importlib, importlib._bootstrap, importlib.abc
? _posixsubprocess imported from subprocess
? _winreg imported from platform
? grp imported from shutil, tarfile
? java.lang imported from platform
? org.python.core imported from copy, pickle
? os.path imported from os, pkgutil, py_compile, tracemalloc, unittest, unittest.util
? posix imported from os
? pwd imported from http.server, posixpath, shutil, tarfile, webbrowser
? termios imported from tty
? vms_lib imported from platform
This is not necessarily a problem - the modules may not be needed on this platform.</p> <p>copying C:\Program Files (x86)\Python36-32\DLLs_bz2.pyd -&gt; build\exe.win32-3.6_bz2.pyd
copying C:\Program Files (x86)\Python36-32\DLLs_hashlib.pyd -&gt; build\exe.win32-3.6_hashlib.pyd
copying C:\Program Files (x86)\Python36-32\DLLs_lzma.pyd -&gt; build\exe.win32-3.6_lzma.pyd
copying C:\Program Files (x86)\Python36-32\DLLs_socket.pyd -&gt; build\exe.win32-3.6_socket.pyd
copying C:\Program Files (x86)\Python36-32\DLLs_ssl.pyd -&gt; build\exe.win32-3.6_ssl.pyd
copying C:\Program Files (x86)\Python36-32\DLLs\pyexpat.pyd -&gt; build\exe.win32-3.6\pyexpat.pyd
copying C:\Program Files (x86)\Python36-32\DLLs\select.pyd -&gt; build\exe.win32-3.6\select.pyd
copying C:\Program Files (x86)\Python36-32\DLLs\unicodedata.pyd -&gt; build\exe.win32-3.6\unicodedata.pyd</p> <p>В довольно большом логе работы можно увидеть, какие модули Python попали в сборку, а каких по мнению cx_Freeze не хватает. Чаще всего на этот вывод можно не обращать внимания, если нет каких-либо ошибок.</p> <p>После запуска скрипта сборки, если все прошло успешно (если нет сообщений об ошибках), рядом с файлами <em>example.py</em> и <em>setup.py</em> должна появиться папка <em>build</em>, а в ней папка, имя которой зависит от версии Python. Например, если сборка запускалась с помощью 32-битной версии интерпретатора Python 3.6, то будет создана папка <em>exe.win32-3.6</em>, а в ней огромное количество файлов и папок.</p> <p><img src="https://jenyay.net/uploads/Programming/Cxfreeze/example_01.png" alt=""></p> <p>Среди файлов можно увидеть файл <em>example.exe</em> - файл, который будут запускать пользователи. Попробуйте его запустить - откроется консольное окно, в котором промелькнет фраза &quot;Hello world!&quot;</p> <p>Рядом с запускаемым файлом расположился файл с ядром интерпретатора Python - <em>python36.dll</em>, а также файл <em>python36.zip</em> - архив, в котором хранятся модули Python, скомпилированные в файлы *.pyc. Также в корне находятся динамические загружаемые библиотеки *.pyd и папки с пакетами, которые не попали в файл <em>python36.zip</em>. Если открыть этот архив, то можно увидеть, что он содержит файлы *.pyc.</p> <p><img src="https://jenyay.net/uploads/Programming/Cxfreeze/example_01_zip.png" alt=""></p> <p>По умолчанию cx_Freeze в архив помещает одиночные модули, а пакеты помещает в корень папки сборки. В данный момент в сборку попало очень много лишних модулей, который на самом деле не используются в программе. Например, среди модулей можно увидеть unittest, logging, xml, urllib и другие, которые явно не используются в нашей простой программе. Скоро мы научимся удалять лишние модули из сборки и вручную добавлять необходимые.</p> <h3 id="_4-добавление-фаилов-microsoft-visual-c-redistributable"><a href="#_4-добавление-фаилов-microsoft-visual-c-redistributable" class="header-anchor">#</a> 4. Добавление файлов Microsoft Visual C++ Redistributable</h3> <p>Интерпретатор Python компилируется под Windows с помощью Microsoft Visual C++, поэтому для того, чтобы пользователи могли запускать собранное вами приложение, у них должен установлен Microsoft Visual C++ Redistributable Package, который они должны скачать с сайта Microsoft. Это не очень удобно. Ситуация усугубляется тем, что разные версии Python компилируются с помощью разных версий компилятора.</p> <p>Чтобы решить эту проблему вы можете поставлять с вашим дистрибутивом необходимые файлы *.dll. Например, для Python 3.6 достаточно скопировать файл <em>vcruntime140.dll</em> из папки с установленным Python. Для того, чтобы не делать эту вручную, cx_Freeze может делать это за вас, для этого надо добавить новый для нас параметр в функцию <em>setup</em> скрипта сборки <em>setup.py</em>. Исправленный скрипт сборки теперь будет выглядеть следующим образом (<a href="https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2002" target="_blank" rel="noopener noreferrer">Example 02<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>):</p> <h1 id="coding-utf-8-3"><a href="#coding-utf-8-3" class="header-anchor">#</a> coding: utf-8</h1> <p>from cx_Freeze import setup, Executable</p> <p>executables = [Executable('example.py')]</p> <p>options = {<br>
    'build_exe': {<br>
        'include_msvcr': True,<br>
    }<br>
}</p> <p>setup(name='hello_world',<br>
      version='0.0.2',<br>
      description='My Hello World App!',<br>
      executables=executables,<br>
      options=options)</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=10" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>В функцию <em>setup</em> был добавлен новый параметр <em>options</em>, который должен быть словарем. Этот словарь содержит вложенные словари, описывающие особенности сборки для разных операционных систем и типов сборки (cx_Freeze кроме запускаемых файлов может создавать инсталяторы). Все возможные параметры можно найти <a href="http://cx-freeze.readthedocs.io/en/latest/distutils.html" target="_blank" rel="noopener noreferrer">в документации<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, некоторые из этих параметров мы еще будем использовать в дальнейшем.</p> <p>Пока мы добавили единственный параметр в словарь <em>build_exe</em> - 'include_msvcr': True. Этот параметр говорит cx_Freeze, что нужно скопировать необходимые файлы *.dll из Microsoft Visual C++ Redistributable.</p> <p>Но в последних версиях cx_Freeze есть некоторые непонятные моменты, связанные с этим параметром. По идее после запуска нового скрипта сборки с помощью команды</p> <p>python setup.py build</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=11" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>должна создаться та же самая сборка, что и в предыдущем примере, но только в папке с программой должен появиться файл <em>vcruntime140.dll</em> (для Python 3.6). Во время написания этой статьи (напомню, что для тестирования примеров использовался cx_Freeze 5.0.2) этот файл не копировался. На github есть несколько обсуждений (<a href="https://github.com/anthony-tuininga/cx_Freeze/issues/275" target="_blank" rel="noopener noreferrer">#275<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>), где говорится, что этот файл не копируется при использовании virtualenv. Я пробовал запускать эти примеры и без virtualenv, файл <em>vcruntime140.dll</em> все равно не копировался. В одном из следующих примеров, когда мы будем собирать скрипт, создающий графический интерфейс с помощью библиотеки wxPython, этот файл появится. С чем связано такое поведение - пока загадка. Но при создании своих сборок имейте это в виду, может быть нужно будет копировать файлы Microsoft Visual C++ Redistributable вручную. В дальнейших примерах для общности везде будет добавлен параметр <em>include_msvcr</em>.</p> <h3 id="_5-избавляемся-от-лишних-модулеи"><a href="#_5-избавляемся-от-лишних-модулеи" class="header-anchor">#</a> 5. Избавляемся от лишних модулей</h3> <p>Как мы видим, несмотря на то, что наш исходный скрипт Hello World явно не импортирует никакие модули, в сборку попало достаточно много файлов *.pyc и *.pyd. Некоторые из них нам явно не нужны (например, unittest, logging и другие). Полный размер сборки сейчас составляет 9.05 МБ, что для простого Hello World кажется излишним, хотя при современных размерах жестких дисков скорее всего не будет проблемой.</p> <p>cx_Freeze позволяет указать, какие модули не надо включать в создаваемую сборку. Сразу скажу, что этой возможностью надо пользоваться осторожно, особенно для больших программах. Python - язык с динамической типизацией и заранее нельзя сказать, какие модули понадобятся, а какие нет. Тут нужно все тестировать. Некоторые модули исключить не удастся, и cx_Freeze во время сборки напишет ошибку, другие модули можно не включить в сборку, но на самом деле они окажутся нужными (например, они могут использоваться другими модулями, которые вы используете), и в этом случае вы получите ошибку во время выполнения программы. Это особенно неприятно для больших программ. Таким образом вы можете исключить модуль, который используется в редком случае, и из-за этого не сразу обнаружить ошибку. Поэтому лучше убирать из сборки только те модули, в которых вы 100% уверены, что они не используются (модуль unittest обычно таким является).</p> <p>Чтобы исключить какие-либо модули из сборки, в словарь параметров <em>build_exe</em> нужно добавить ключ <em>excludes</em>, значением которого должен быть список строк с именами модулей, которые нужно исключить. Давайте для начала исключим модули, которые нам явно не нужны. Добавим параметр <em>excludes</em> с небольшим списком модулей (<a href="https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2003" target="_blank" rel="noopener noreferrer">Example 03<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>):</p> <h1 id="coding-utf-8-4"><a href="#coding-utf-8-4" class="header-anchor">#</a> coding: utf-8</h1> <p>from cx_Freeze import setup, Executable</p> <p>executables = [Executable('example.py')]</p> <p>excludes = ['unicodedata', 'logging', 'unittest', 'email', 'html', 'http', 'urllib',<br>
            'xml', 'bz2']</p> <p>options = {<br>
    'build_exe': {<br>
        'include_msvcr': True,<br>
        'excludes': excludes,<br>
    }<br>
}</p> <p>setup(name='hello_world',<br>
      version='0.0.3',<br>
      description='My Hello World App!',<br>
      executables=executables,<br>
      options=options)</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=12" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>После сборки заходим в папку _build\exe.win32-3.6_ или аналогичную ей и видим, что количество файлов и папок заметно уменьшилось:</p> <p><img src="https://jenyay.net/uploads/Programming/Cxfreeze/example_03.png" alt=""></p> <p>В архиве <em>python36.zip</em> количество файлов тоже немного уменьшилось:</p> <p><img src="https://jenyay.net/uploads/Programming/Cxfreeze/example_03_zip.png" alt=""></p> <p>Общий размер сборки теперь составляет 5.93 МБ - размер уже уменьшился на треть. Обязательно надо убедиться, что программа работает.</p> <p>В реальном проекте, возможно, стоит на этом остановиться и не рисковать сломать программу, удаляя более мелкие модули. Но поскольку у нас очень простая программа, мы можем пойти дальше и путем перебора попробовать удалить как можно больше ненужных модулей. Через несколько (десятков?) итераций удаления и восстановления модулей получился следующий скрипт сборки (<a href="https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2004" target="_blank" rel="noopener noreferrer">Example 04<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>):</p> <h1 id="coding-utf-8-5"><a href="#coding-utf-8-5" class="header-anchor">#</a> coding: utf-8</h1> <p>from cx_Freeze import setup, Executable</p> <p>executables = [Executable('example.py')]</p> <p>excludes = ['unicodedata', 'logging', 'unittest', 'email', 'html', 'http', 'urllib',<br>
            'xml', 'pydoc', 'doctest', 'argparse', 'datetime', 'zipfile',<br>
            'subprocess', 'pickle', 'threading', 'locale', 'calendar', 'functools',<br>
            'weakref', 'tokenize', 'base64', 'gettext', 'heapq', 're', 'operator',<br>
            'bz2', 'fnmatch', 'getopt', 'reprlib', 'string', 'stringprep',<br>
            'contextlib', 'quopri', 'copy', 'imp', 'keyword', 'linecache']</p> <p>options = {<br>
    'build_exe': {<br>
        'include_msvcr': True,<br>
        'excludes': excludes,<br>
    }<br>
}</p> <p>setup(name='hello_world',<br>
      version='0.0.4',<br>
      description='My Hello World App!',<br>
      executables=executables,<br>
      options=options)</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=13" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>После его запуска с помощью команды <em>python setup.py build</em> сборка будет выглядеть следующим образом:</p> <p><img src="https://jenyay.net/uploads/Programming/Cxfreeze/example_04.png" alt=""></p> <p>А в архиве <em>python36.zip</em> остались лишь следующие модули:</p> <p><img src="https://jenyay.net/uploads/Programming/Cxfreeze/example_04_zip.png" alt=""></p> <p>В архиве осталось всего 19 файлов из 100 первоначальных. Теперь сборка занимает 3.7 МБ. По-моему, неплохо. Но это еще не все.</p> <p>Мы видим, что часть модулей находится в архиве <em>python36.zip</em> , а часть в отдельных папках в папке сборки. Это может быть неприятно из эстетических соображений, если вы не хотите видеть лишние служебные файлы и папки в сборке. На этот случай у cx_Freeze есть еще один параметр, который указывает, какие модули он должен обязательно помещать в архив. Но имейте в виду, что распаковка архива при работе программы тоже будет занимать время, поэтому запуск программы с заархивированными модулями будет медленнее. Насколько медленнее - надо измерять, возможно, скорость будет не заметна для пользователей (скорее всего так и будет).</p> <p>Чтобы указать, какие модули нужно обязательно поместить в архив, используется элемент с именем <em>zip_include_packages</em> словаря параметров <em>build_exe</em> . Этот элемент словаря должен содержать <strong>список строк</strong> с именами модулей (пакетов), которые нужно поместить в архив. В нашем случае скрипт сборки преобразуется к следующему виду (<a href="https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2005" target="_blank" rel="noopener noreferrer">Example 05<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>):</p> <h1 id="coding-utf-8-6"><a href="#coding-utf-8-6" class="header-anchor">#</a> coding: utf-8</h1> <p>from cx_Freeze import setup, Executable</p> <p>executables = [Executable('example.py')]</p> <p>excludes = ['unicodedata', 'logging', 'unittest', 'email', 'html', 'http', 'urllib',<br>
            'xml', 'pydoc', 'doctest', 'argparse', 'datetime', 'zipfile',<br>
            'subprocess', 'pickle', 'threading', 'locale', 'calendar', 'functools',<br>
            'weakref', 'tokenize', 'base64', 'gettext', 'heapq', 're', 'operator',<br>
            'bz2', 'fnmatch', 'getopt', 'reprlib', 'string', 'stringprep',<br>
            'contextlib', 'quopri', 'copy', 'imp', 'keyword', 'linecache']</p> <p>zip_include_packages = ['collections', 'encodings', 'importlib']</p> <p>options = {<br>
    'build_exe': {<br>
        'include_msvcr': True,<br>
        'excludes': excludes,<br>
        'zip_include_packages': zip_include_packages,<br>
    }<br>
}</p> <p>setup(name='hello_world',<br>
      version='0.0.5',<br>
      description='My Hello World App!',<br>
      executables=executables,<br>
      options=options)</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=14" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Запускаем сборку и смотрим на ее результат:</p> <p><img src="https://jenyay.net/uploads/Programming/Cxfreeze/example_05.png" alt=""></p> <p>Осталось всего лишь три файла!</p> <p>Указанные в скрипте сборки модули переместились в файл <em>python36.zip</em>:</p> <p><img src="https://jenyay.net/uploads/Programming/Cxfreeze/example_05_zip.png" alt=""></p> <p>Теперь сборка занимает всего лишь 3.45 МБ - по сравнению с исходными 9 МБ размер сократился почти в 3 раза. Еще раз напомню, что в сборку еще не были включены файлы из Microsoft Visual C++ Redistributable, которые почему-то не были помещены автоматически библиотекой cx_Freeze. Ну и, конечно, в этом примере было применено очень агрессивное исключение модулей, которые могут использоваться во многих других модулях. Обычно этого делать не стоит, чтобы не получить неожиданную ошибку. К тому же многие файлы *.pyc занимают всего лишь десятки кБ, из-за которых нет смысла рисковать.</p> <h3 id="_6-наводим-красоту-в-сборке"><a href="#_6-наводим-красоту-в-сборке" class="header-anchor">#</a> 6. Наводим красоту в сборке</h3> <p>Мы создали запускаемую сборку нашей программы. По умолчанию она помещается в папку с именем вроде _build\exe.win32-3.6_ , имя которой зависит от версии Python, для которой происходила сборка. Во многих случаях можно на этом остановиться, но в больших проектах создание такой сборки - это лишь один промежуточный этап автоматического создания дистрибутива. После этого полученную сборку, возможно, нужно будет отправить на сервер для тестирования, может быть нужно будет запустить локальные тесты или создать из сборки инсталятор. Поэтому может оказаться, что такое имя папки неудобно или нужно сохранить сборку на другом диске. Все это, конечно, можно сделать сторонними скриптами, но cx_Freeze позволяет настраивать, куда будет помещена полученная сборка.</p> <p>Давайте изменим файл <em>setup.py</em>, таким образом, чтобы создаваемая сборка помещалась, например, в папку <em>build_windows</em> рядом со скриптами. Для этого снова нужно добавить новый параметр в словарь <em>build_exe</em>. Этот параметр тоже должен называться <em>build_exe</em> и хранить строку с папкой, куда должна помещаться сборка (<a href="https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2006" target="_blank" rel="noopener noreferrer">Example 06<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>):</p> <h1 id="coding-utf-8-7"><a href="#coding-utf-8-7" class="header-anchor">#</a> coding: utf-8</h1> <p>from cx_Freeze import setup, Executable</p> <p>executables = [Executable('example.py')]</p> <p>excludes = ['unicodedata', 'logging', 'unittest', 'email', 'html', 'http', 'urllib',<br>
            'xml', 'pydoc', 'doctest', 'argparse', 'datetime', 'zipfile',<br>
            'subprocess', 'pickle', 'threading', 'locale', 'calendar', 'functools',<br>
            'weakref', 'tokenize', 'base64', 'gettext', 'heapq', 're', 'operator',<br>
            'bz2', 'fnmatch', 'getopt', 'reprlib', 'string', 'stringprep',<br>
            'contextlib', 'quopri', 'copy', 'imp', 'keyword', 'linecache']</p> <p>zip_include_packages = ['collections', 'encodings', 'importlib']</p> <p>options = {<br>
    'build_exe': {<br>
        'include_msvcr': True,<br>
        'excludes': excludes,<br>
        'zip_include_packages': zip_include_packages,<br>
        'build_exe': 'build_windows',<br>
    }<br>
}</p> <p>setup(name='hello_world',<br>
      version='0.0.6',<br>
      description='My Hello World App!',<br>
      executables=executables,<br>
      options=options)</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=15" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Теперь после создания сборки рядом с файлами <em>example.py</em> и <em>setup.py</em> появится папка <em>build_windows</em>, где будет находиться созданная сборка, ничем не отличающаяся от предыдущего примера.</p> <p><img src="https://jenyay.net/uploads/Programming/Cxfreeze/example_06.png" alt=""></p> <p>По умолчанию cx_Freeze создает запускаемый файл, имя которого (без расширения) совпадает с именем запускаемого скрипта. То есть в нашем случае - <em>example.exe</em>, поскольку наш запускаемый сприпт называется <em>example.py</em>. Часто нужно дать запускаемому файлу другое имя. Сделать это тоже очень просто, достаточно добавить еще один параметр, но на этот раз в конструктор класса <em>Executable</em>. Имя нужного нам параметра - <em>targetName</em>. Это должна быть строка, которая содержит имя создаваемого запускаемого файла. Поэтому, если мы хотим, чтобы cx_Freeze создал запускаемый файл <em>hello_world.exe</em>, то предыдущий файл <em>setup.py</em> нужно изменить следующим образом (<a href="https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2007" target="_blank" rel="noopener noreferrer">Example 07<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>):</p> <h1 id="coding-utf-8-8"><a href="#coding-utf-8-8" class="header-anchor">#</a> coding: utf-8</h1> <p>from cx_Freeze import setup, Executable</p> <p>executables = [Executable('example.py', targetName='hello_world.exe')]</p> <p>excludes = ['unicodedata', 'logging', 'unittest', 'email', 'html', 'http', 'urllib',<br>
            'xml', 'pydoc', 'doctest', 'argparse', 'datetime', 'zipfile',<br>
            'subprocess', 'pickle', 'threading', 'locale', 'calendar', 'functools',<br>
            'weakref', 'tokenize', 'base64', 'gettext', 'heapq', 're', 'operator',<br>
            'bz2', 'fnmatch', 'getopt', 'reprlib', 'string', 'stringprep',<br>
            'contextlib', 'quopri', 'copy', 'imp', 'keyword', 'linecache']</p> <p>zip_include_packages = ['collections', 'encodings', 'importlib']</p> <p>options = {<br>
    'build_exe': {<br>
        'include_msvcr': True,<br>
        'excludes': excludes,<br>
        'zip_include_packages': zip_include_packages,<br>
        'build_exe': 'build_windows',<br>
    }<br>
}</p> <p>setup(name='hello_world',<br>
      version='0.0.7',<br>
      description='My Hello World App!',<br>
      executables=executables,<br>
      options=options)</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=16" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Запускаем сборку и видим, что в папке <em>build_windows</em> вместо <em>example.exe</em> появился файл <em>hello_world.exe</em>:</p> <p><img src="https://jenyay.net/uploads/Programming/Cxfreeze/example_07.png" alt=""></p> <h3 id="_7-добавление-модулеи-в-сборку"><a href="#_7-добавление-модулеи-в-сборку" class="header-anchor">#</a> 7. Добавление модулей в сборку</h3> <p>До сих пор мы только исключали лишние модули из создаваемой сборки с помощью параметра <em>excludes</em> словаря <em>build_exe</em>. Однако, импорт модулей в Python может происходить не только с помощью оператора <em>import</em>, но и динамически по имени модуля с помощью функции '<em>import</em>', а может быть импорт будет осуществляться с использованием сложной логики, когда cx_Freeze не сможет понять, что нужно добавить какой-то модуль в сборку.</p> <p>Давайте изменим наш пример таким образом, чтобы он импортировал модуль <em>json</em> таким образом, что cx_Freeze об этом не узнает (<a href="https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2008" target="_blank" rel="noopener noreferrer">Example 08<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>):</p> <h1 id="coding-utf-8-9"><a href="#coding-utf-8-9" class="header-anchor">#</a> coding: utf-8</h1> <p>if <strong>name</strong> == '<strong>main</strong>':<br>
    module = <strong>import</strong>('json')<br>
    print('Hello world!')</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=17" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Скрипт сборки <em>setup.py</em> пока останется неизменным. Запустим сборку с помощью команды <em>python setup.py build</em>, ошибок при этом не возникнет, будет создана сборка в папке <em>build_windows</em>.</p> <p>Однако если теперь мы запустим созданный файл <em>hello_world.exe</em>, то в консоль будет выведено информация об исключении:</p> <blockquote><p>hello_world.exe</p></blockquote> <p>Traceback (most recent call last):<br>
  File &quot;C:...\Python36\site-packages\cx_Freeze\initscripts_<em>startup</em>_.py&quot;, line 14, in run<br>
    module.run()<br>
  File &quot;C:...\Python36\site-packages\cx_Freeze\initscripts\Console.py&quot;, line 26, in run<br>
    exec(code, m.<strong>dict</strong>)<br>
  File &quot;example.py&quot;, line 5, in <module><br>
ModuleNotFoundError: No module named 'json'</module></p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=18" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>На указанные пути обращать внимания не будем. Для нас сейчас главное, что мы получили ошибку времени исполнения. Надо ее исправлять, а именно нужно добавить модуль <em>json</em> в сборку.</p> <p>Если для исключения модулей из сборку предназначен параметр <em>excludes</em>, до для включения модуля в сборке используется параметр <em>includes</em>, который тоже должен содержать список модулей, которые нужно добавить в сборку. Параметр <em>includes</em> так же должен входить в словарь <em>build_exe</em>. Добавим модуль <em>json</em> в этот список (<a href="https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2008-1" target="_blank" rel="noopener noreferrer">Example 08-1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>):</p> <h1 id="coding-utf-8-10"><a href="#coding-utf-8-10" class="header-anchor">#</a> coding: utf-8</h1> <p>from cx_Freeze import setup, Executable</p> <p>executables = [Executable('example.py', targetName='hello_world.exe')]</p> <p>excludes = ['unicodedata', 'logging', 'unittest', 'email', 'html', 'http', 'urllib',<br>
            'xml', 'pydoc', 'doctest', 'argparse', 'datetime', 'zipfile',<br>
            'subprocess', 'pickle', 'threading', 'locale', 'calendar', 'functools',<br>
            'weakref', 'tokenize', 'base64', 'gettext', 'heapq', 're', 'operator',<br>
            'bz2', 'fnmatch', 'getopt', 'reprlib', 'string', 'stringprep',<br>
            'contextlib', 'quopri', 'copy', 'imp', 'keyword', 'linecache']</p> <p>includes = ['json']</p> <p>zip_include_packages = ['collections', 'encodings', 'importlib']</p> <p>options = {<br>
    'build_exe': {<br>
        'include_msvcr': True,<br>
        'excludes': excludes,<br>
        'includes': includes,<br>
        'zip_include_packages': zip_include_packages,<br>
        'build_exe': 'build_windows',<br>
    }<br>
}</p> <p>setup(name='hello_world',<br>
      version='0.0.8',<br>
      description='My Hello World App!',<br>
      executables=executables,<br>
      options=options)</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=19" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Создаем сборку, заходим в папку <em>build_windows</em> и видим, что в ней появилась папка с именем <em>json</em>:</p> <p><img src="https://jenyay.net/uploads/Programming/Cxfreeze/example_08.png" alt=""></p> <p>Но не спешим радоваться. При попытке запустить <em>hello_world.exe</em> мы получим новую ошибку:</p> <blockquote><p>hello_world.exe<br>
Traceback (most recent call last):<br>
  File &quot;C:...\Python36\site-packages\cx_Freeze\initscripts_<em>startup</em>_.py&quot;, line 14, in run<br>
    module.run()<br>
  File &quot;C:...\Python36\site-packages\cx_Freeze\initscripts\Console.py&quot;, line 26, in run<br>
    exec(code, m.<strong>dict</strong>)<br>
  File &quot;example.py&quot;, line 5, in <module><br>
  File &quot;C:\Program Files (x86)\Python36-32\lib\json_<em>init</em>_.py&quot;, line 106, in <module><br>
    from .decoder import JSONDecoder, JSONDecodeError<br>
  File &quot;C:\Program Files (x86)\Python36-32\lib\json\decoder.py&quot;, line 3, in <module><br>
    import re<br>
ModuleNotFoundError: No module named 're'</module></module></module></p></blockquote> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=20" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Теперь не хватает модуля для работы с регулярными выражениями <em>re</em>. Если мы посмотрим внимательнее на наш предыдущий файл <em>setup.py</em>, то увидим, что этот модуль мы исключили из сборки с помощью параметра <em>excludes</em>, а этот модуль, оказывается, используется в модуле <em>json</em>. Если мы исключим модуль <em>re</em> из списка <em>excludes</em>, то это тоже не решит проблему, окажется, что еще нужны другие модули, которые вы выкинули из сборки. Я же предупреждал, что не надо увлекаться удалением модулей. Постепенно удаляя имена модулей из списка <em>excludes</em> можно добиться работоспособной сборки. Новый файл <em>setup.py</em> теперь выглядит следующим образом (<a href="https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2008-2" target="_blank" rel="noopener noreferrer">Example 08-2<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>):</p> <h1 id="coding-utf-8-11"><a href="#coding-utf-8-11" class="header-anchor">#</a> coding: utf-8</h1> <p>from cx_Freeze import setup, Executable</p> <p>executables = [Executable('example.py', targetName='hello_world.exe')]</p> <p>excludes = ['unicodedata', 'logging', 'unittest', 'email', 'html', 'http', 'urllib',<br>
            'xml', 'pydoc', 'doctest', 'argparse', 'datetime', 'zipfile',<br>
            'subprocess', 'pickle', 'threading', 'locale', 'calendar',<br>
            'tokenize', 'base64', 'gettext',<br>
            'bz2', 'fnmatch', 'getopt', 'string', 'stringprep',<br>
            'contextlib', 'quopri', 'copy', 'imp', 'linecache']</p> <p>includes = ['json']</p> <p>zip_include_packages = ['collections', 'encodings', 'importlib']</p> <p>options = {<br>
    'build_exe': {<br>
        'include_msvcr': True,<br>
        'excludes': excludes,<br>
        'includes': includes,<br>
        'zip_include_packages': zip_include_packages,<br>
        'build_exe': 'build_windows',<br>
    }<br>
}</p> <p>setup(name='hello_world',<br>
      version='0.0.8',<br>
      description='My Hello World App!',<br>
      executables=executables,<br>
      options=options)</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=21" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Из списка <em>excludes</em> были убраны следующие модули: <em>re</em>, <em>functools</em>, <em>operator</em>, <em>keyword</em>, <em>heapq</em>, <em>reprlib</em>, <em>weakref</em>.</p> <p>Создаем сборку и получаем теперь уже работоспособное приложение. Если мы зайдем в папку <em>build_windows</em>, то увидим, что внешне ничего не изменилось, в ней из перечисленных модулей значится только папка <em>json</em>, остальные модули были помещены в архив <em>python36.zip</em>:</p> <p><img src="https://jenyay.net/uploads/Programming/Cxfreeze/example_08-2_zip.png" alt=""></p> <p>И для аккуратности сделаем так, чтобы модуль <em>json</em> тоже был помещен в архив <em>python36.zip</em>, добавим строку 'json' в параметр <em>zip_include_packages</em> (<a href="https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2008-3" target="_blank" rel="noopener noreferrer">Example 08-3<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>):</p> <h1 id="coding-utf-8-12"><a href="#coding-utf-8-12" class="header-anchor">#</a> coding: utf-8</h1> <p>from cx_Freeze import setup, Executable</p> <p>executables = [Executable('example.py', targetName='hello_world.exe')]</p> <p>excludes = ['unicodedata', 'logging', 'unittest', 'email', 'html', 'http', 'urllib',<br>
            'xml', 'pydoc', 'doctest', 'argparse', 'datetime', 'zipfile',<br>
            'subprocess', 'pickle', 'threading', 'locale', 'calendar',<br>
            'tokenize', 'base64', 'gettext',<br>
            'bz2', 'fnmatch', 'getopt', 'string', 'stringprep',<br>
            'contextlib', 'quopri', 'copy', 'imp', 'linecache']</p> <p>includes = ['json']</p> <p>zip_include_packages = ['collections', 'encodings', 'importlib', 'json']</p> <p>options = {<br>
    'build_exe': {<br>
        'include_msvcr': True,<br>
        'excludes': excludes,<br>
        'includes': includes,<br>
        'zip_include_packages': zip_include_packages,<br>
        'build_exe': 'build_windows',<br>
    }<br>
}</p> <p>setup(name='hello_world',<br>
      version='0.0.8',<br>
      description='My Hello World App!',<br>
      executables=executables,<br>
      options=options)</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=22" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Теперь сборка выглядит аккуратно и состоит всего из трех файлов:</p> <p><img src="https://jenyay.net/uploads/Programming/Cxfreeze/example_08-3.png" alt=""></p> <p>А в архиве <em>python36.zip</em> появился модуль <em>json</em>:</p> <p><img src="https://jenyay.net/uploads/Programming/Cxfreeze/example_08-3_zip.png" alt=""></p> <h3 id="_8-сборка-нескольких-запускаемых-фаилов"><a href="#_8-сборка-нескольких-запускаемых-фаилов" class="header-anchor">#</a> 8. Сборка нескольких запускаемых файлов</h3> <p>Давайте вернемся к вопросу о том, зачем в качестве параметра <em>executables</em> функции <em>setup</em> должен быть передан <strong>список</strong> экземпляров класса <em>Executable</em>, а не единственный экземпляр класса. Это полезно в тех случаях, когда ваше приложение состоит из нескольких запускаемых файлов. Например, это может быть основная программа и дополнительная программа для обновления основной программы, или может быть ваше приложение - это набор небольших утилит, написанных на Python. В этом случае для каждой такой программы надо делать отдельную сборку, но как быть с архивом модулей (<em>python36.zip</em> или аналогичного), ведь у каждой программы будет свой список импортируемых модулей? Именно поэтому cx_Freeze позволяет указывать список создаваемых запускаемых файлов, а в архив модулей будут помещены все необходимые модули для всех приложений.</p> <p>Сделаем два простых скрипта в одной папке (<a href="https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2009" target="_blank" rel="noopener noreferrer">Example 09<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>).</p> <p>hello_01.py:</p> <h1 id="coding-utf-8-13"><a href="#coding-utf-8-13" class="header-anchor">#</a> coding: utf-8</h1> <p>import json</p> <p>if <strong>name</strong> == '<strong>main</strong>':<br>
    print('Hello world 01!')</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=23" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>hello_02.py:</p> <h1 id="coding-utf-8-14"><a href="#coding-utf-8-14" class="header-anchor">#</a> coding: utf-8</h1> <p>if <strong>name</strong> == '<strong>main</strong>':<br>
    print('Hello world 02!')</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=24" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Скрипт <em>hello_01.py</em> явно импортирует модуль <em>json</em>, поэтому в файле <em>setup.py</em> мы не будем использовать параметр <em>includes</em> - cx_Freeze сам найдет все необходимые модули. Для скрипта <em>hello_02.py</em> модуль <em>json</em> не требуется. Для каждого из этих модулей мы должны создать свой экземпляр класса <em>Executable</em> в <em>setup.py</em>, а остальное нам уже знакомо:</p> <h1 id="coding-utf-8-15"><a href="#coding-utf-8-15" class="header-anchor">#</a> coding: utf-8</h1> <p>from cx_Freeze import setup, Executable</p> <p>executables = [Executable('hello_01.py', targetName='hello_world_01.exe'),<br>
               Executable('hello_02.py', targetName='hello_world_02.exe'),<br>
               ]</p> <p>excludes = ['unicodedata', 'logging', 'unittest', 'email', 'html', 'http', 'urllib',<br>
            'xml', 'pydoc', 'doctest', 'argparse', 'datetime', 'zipfile',<br>
            'subprocess', 'pickle', 'threading', 'locale', 'calendar',<br>
            'tokenize', 'base64', 'gettext',<br>
            'bz2', 'fnmatch', 'getopt', 'string', 'stringprep',<br>
            'contextlib', 'quopri', 'copy', 'imp', 'linecache']</p> <p>zip_include_packages = ['collections', 'encodings', 'importlib', 'json']</p> <p>options = {<br>
    'build_exe': {<br>
        'include_msvcr': True,<br>
        'excludes': excludes,<br>
        'zip_include_packages': zip_include_packages,<br>
        'build_exe': 'build_windows',<br>
    }<br>
}</p> <p>setup(name='hello_world',<br>
      version='0.0.9',<br>
      description='My Hello World App!',<br>
      executables=executables,<br>
      options=options)</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=25" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Запускаем сборку и видим, что в папке <em>build_windows</em> появились файлы <em>hello_world_01.exe</em> и <em>hello_world_02.exe</em>:</p> <p><img src="https://jenyay.net/uploads/Programming/Cxfreeze/example_09.png" alt=""></p> <p>А в архиве <em>python36.zip</em> имеется модуль <em>json</em>, который нужен только для <em>hello_world_01.exe</em>:</p> <p><img src="https://jenyay.net/uploads/Programming/Cxfreeze/example_09_zip.png" alt=""></p> <h3 id="_9-добавление-дополнительных-фаилов-в-сборку"><a href="#_9-добавление-дополнительных-фаилов-в-сборку" class="header-anchor">#</a> 9. Добавление дополнительных файлов в сборку</h3> <p>До сих пор у нас приложение состояло только из скриптов Python, но часто к скриптам должны прилагаться какие-нибудь файлы с данными. Давайте дополним один из предыдущих примеров, сделаем так, чтобы в отдельной папке с именем <em>data</em> хранился файл <em>data.json</em> с данными в формате JSON о том, кого программа должна приветствовать (<a href="https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2010" target="_blank" rel="noopener noreferrer">Example 10<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>):</p> <p>{<br>
        &quot;first_name&quot;: &quot;John&quot;,<br>
        &quot;last_name&quot;: &quot;Zoidberg&quot;<br>
}</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=26" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Т.е. общая структура файлов будет такой:</p> <p>.<br>
│--example.py<br>
│--setup.py<br>
│<br>
└───data<br>
        data.json</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=27" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Скрипт <em>example.py</em> теперь выглядит так:</p> <h1 id="coding-utf-8-16"><a href="#coding-utf-8-16" class="header-anchor">#</a> coding: utf-8</h1> <p>import json</p> <p>if <strong>name</strong> == '<strong>main</strong>':<br>
    fname = 'data/data.json'<br>
    with open(fname) as fp:<br>
        obj = json.load(fp)</p> <p>print('Hello {} {}!'.format(obj['first_name'], obj['last_name']))</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=28" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Если мы воспользуемся одним из предыдущих скриптов <em>setup.py</em> и запустим полученный файл .exe, то мы получим ошибку из-за того, что папка <em>data</em> не будет скопирована в папку со сборкой. На этот случай у cx_Freeze есть еще один параметр <em>include_files</em>, который тоже должен входить в словарь <em>build_exe</em> и содержать либо список, в который могут входить либо строковые элементы с именами файлов или папок, которые нужно добавить к сборке, либо кортежи, показывающие, как исходные файлы должны быть переименованы (об этом мы поговорим чуть позже).</p> <p>Пока сделаем, чтобы папка <em>data</em> была добавлена к сборке.</p> <h1 id="coding-utf-8-17"><a href="#coding-utf-8-17" class="header-anchor">#</a> coding: utf-8</h1> <p>from cx_Freeze import setup, Executable</p> <p>executables = [Executable('example.py', targetName='hello_world.exe')]</p> <p>excludes = ['unicodedata', 'logging', 'unittest', 'email', 'html', 'http', 'urllib',<br>
            'xml', 'pydoc', 'doctest', 'argparse', 'datetime', 'zipfile',<br>
            'subprocess', 'pickle', 'threading', 'locale', 'calendar',<br>
            'tokenize', 'base64', 'gettext',<br>
            'bz2', 'fnmatch', 'getopt', 'string', 'stringprep',<br>
            'contextlib', 'quopri', 'copy', 'imp', 'linecache']</p> <p>zip_include_packages = ['collections', 'encodings', 'importlib', 'json']</p> <p>include_files = ['data']</p> <p>options = {<br>
    'build_exe': {<br>
        'include_msvcr': True,<br>
        'excludes': excludes,<br>
        'zip_include_packages': zip_include_packages,<br>
        'build_exe': 'build_windows',<br>
        'include_files': include_files,<br>
    }<br>
}</p> <p>setup(name='hello_world',<br>
      version='0.0.10',<br>
      description='My Hello World App!',<br>
      executables=executables,<br>
      options=options)</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=29" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>После удачной сборки папка <em>build_windows</em> будет выглядеть следующим образом:</p> <p><img src="https://jenyay.net/uploads/Programming/Cxfreeze/example_10.png" alt=""></p> <p>И приложение <em>hello_world.exe</em> при запуске поприветствует доктора Зойдберга (пока не залез в Википедию, не знал, что его зовут Джон).</p> <p>Давайте немного усложним задачу. Пусть исходники у нас включают в себя файлы <em>readme.txt</em> и <em>documentation.txt</em>, которые не используются в скрипте (он останется прежним), но эти файлы хотелось бы добавить в сборку, при этом файл <em>documentation.txt</em> нужно поместить в отдельную папку <em>doc</em> и переименовать в <em>doc.txt</em> (<a href="https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2011" target="_blank" rel="noopener noreferrer">Example 11<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>).</p> <p><img src="https://jenyay.net/uploads/Programming/Cxfreeze/example_11_src.png" alt=""></p> <p>Для этого воспользуемся тем, что в список <em>include_files</em> можно включать не только строки, но и кортежи из двух элементов. Первый элемент кортежа должен быть строкой с именем исходного файла, а второй элемент - именем этого файла в папке сборки, при этом исходный файл можно помещать в поддиректории.</p> <p>Наш новый файл <em>setup.py</em> теерь выглядит так:</p> <h1 id="coding-utf-8-18"><a href="#coding-utf-8-18" class="header-anchor">#</a> coding: utf-8</h1> <p>from cx_Freeze import setup, Executable</p> <p>executables = [Executable('example.py', targetName='hello_world.exe')]</p> <p>excludes = ['unicodedata', 'logging', 'unittest', 'email', 'html', 'http', 'urllib',<br>
            'xml', 'pydoc', 'doctest', 'argparse', 'datetime', 'zipfile',<br>
            'subprocess', 'pickle', 'threading', 'locale', 'calendar',<br>
            'tokenize', 'base64', 'gettext',<br>
            'bz2', 'fnmatch', 'getopt', 'string', 'stringprep',<br>
            'contextlib', 'quopri', 'copy', 'imp', 'linecache']</p> <p>includes = ['json']</p> <p>zip_include_packages = ['collections', 'encodings', 'importlib', 'json']</p> <p>include_files = ['data',<br>
                 'readme.txt',<br>
                 ('documentation.txt', 'doc/doc.txt'),<br>
                 ]</p> <p>options = {<br>
    'build_exe': {<br>
        'include_msvcr': True,<br>
        'excludes': excludes,<br>
        'includes': includes,<br>
        'zip_include_packages': zip_include_packages,<br>
        'build_exe': 'build_windows',<br>
        'include_files': include_files,<br>
    }<br>
}</p> <p>setup(name='hello_world',<br>
      version='0.0.11',<br>
      description='My Hello World App!',<br>
      executables=executables,<br>
      options=options)</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=30" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Запускаем сборку и убеждаемся, что новые файлы были скопированы в папку сборки:</p> <p><img src="https://jenyay.net/uploads/Programming/Cxfreeze/example_11.png" alt=""></p> <p><img src="https://jenyay.net/uploads/Programming/Cxfreeze/example_11-2.png" alt=""></p> <p>Это очень полезная возможность при создании сборок.</p> <h3 id="_10-создание-приложении-с-графическим-интерфеисом"><a href="#_10-создание-приложении-с-графическим-интерфеисом" class="header-anchor">#</a> 10. Создание приложений с графическим интерфейсом</h3> <p>До сих пор мы создавали запускаемые файлы для консольных приложений, но если вы разрабатываете программу для обычных пользователей, то им нужен графический интерфейс (GUI). Для создания графического интерфейса на Python существует много библиотек, которые в основном являются оболочками над библиотеками, написанными на C или C++. Наиболее известные из них - Tkinter (входит в стандартную библиотеку Python), PyQt, PySide, wxPython и др. В этой статье для примера рассмотрим использование библиотеки <a href="https://wxpython.org/" target="_blank" rel="noopener noreferrer">wxPython<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, которая является оболочкой поверх библиотеки <a href="https://www.wxwidgets.org/" target="_blank" rel="noopener noreferrer">wxWidgets<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. В примерах будет использоваться wxPython 4.0, которая на момент написания статьи имеет статус пока еще альфа-версии, зато в отличие от предыдущих версий может устанавливаться из PyPi с помощью pip.</p> <p>Устанавливается wxPython 4.0 обычным способом:</p> <p>pip install wxpython</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=31" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>или, если вы хотите установить wxPython только для своего пользователя (в этом случае не требуются права администратора):</p> <p>pip install wxpython --user</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=32" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Сделаем простейшее приложение, которое создает пустое окно с заголовком &quot;Hello wxPython&quot;. Поскольку данная статья не является учебником по wxPython, то не будем подробно останавливаться на использовании этой библиотеки, хотя я думаю, что код такого простого приложения достаточно понятен (<a href="https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2012" target="_blank" rel="noopener noreferrer">Example 12<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>).</p> <h1 id="example-py-2"><a href="#example-py-2" class="header-anchor">#</a> example.py</h1> <h1 id="coding-utf-8-19"><a href="#coding-utf-8-19" class="header-anchor">#</a> coding: utf-8</h1> <p>import wx</p> <p>class MyApp(wx.App):<br>
    def OnInit(self):<br>
        self.mainWnd = wx.Frame(None, -1, &quot;&quot;)<br>
        self.SetTopWindow(self.mainWnd)<br>
        self.mainWnd.SetTitle('Hello wxPython')<br>
        self.mainWnd.Show()<br>
        return True</p> <p>if <strong>name</strong> == &quot;<strong>main</strong>&quot;:<br>
    app = MyApp(False)<br>
    app.MainLoop()</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=33" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Создадим скрипт сборки <em>setup.py</em>, в котором пока тоже нет ничего необычного:</p> <h1 id="coding-utf-8-20"><a href="#coding-utf-8-20" class="header-anchor">#</a> coding: utf-8</h1> <p>from cx_Freeze import setup, Executable</p> <p>executables = [Executable('example.py', targetName='hello_wx.exe')]</p> <p>excludes = ['logging', 'unittest', 'email', 'html', 'http', 'urllib', 'xml',<br>
            'unicodedata', 'bz2', 'select']</p> <p>zip_include_packages = ['collections', 'encodings', 'importlib', 'wx']</p> <p>options = {<br>
    'build_exe': {<br>
        'include_msvcr': True,<br>
        'excludes': excludes,<br>
        'zip_include_packages': zip_include_packages,<br>
        'build_exe': 'build_windows',<br>
    }<br>
}</p> <p>setup(name='hello_world',<br>
      version='0.0.12',<br>
      description='My Hello World App!',<br>
      executables=executables,<br>
      options=options)</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=34" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Единственное отличие от предыдущих примеров заключается в том, что в список исключаемых модулей (параметр <em>excludes</em> в <em>build_exe</em>) включены только некоторые модули, которые нам явно не нужны, а модуль <em>wx</em> добавлен в список <em>zip_include_packages</em>, чтобы файлы *pyc из библиотеки wxPython попали в архив <em>python36.zip</em>.</p> <p>Запускаем сборку с помощью команды</p> <p>python setup.py build</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=35" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Теперь содержимое папки <em>build_windows</em> выглядит следующим образом:</p> <p><img src="https://jenyay.net/uploads/Programming/Cxfreeze/example_12.png" alt=""></p> <p>Появились новые файлы *.dll и *.pyd, относящиеся в wxPython. С ними ничего не поделаешь, их трогать нельзя. Обратите внимание, что появились файлы <em>MSVCP140.dll</em> и <em>VCRUNTIME140.dll</em>, относящиеся к Microsoft Visual C++ Redistributable. Если мы посмотрим на лог работы cx_Freeze, то увидим, что эти файлы были скопированы не из папки, где находится запускаемый файл интерпретатора Python, а из папки библиотеки wxPython:</p> <p>Copying data from package pydoc_data...<br>
copying C:\Program Files (x86)\Python36-32\DLLs_hashlib.pyd -&gt; build_windows_hashlib.pyd<br>
copying C:\Program Files (x86)\Python36-32\DLLs_lzma.pyd -&gt; build_windows_lzma.pyd<br>
copying C:\Program Files (x86)\Python36-32\DLLs_socket.pyd -&gt; build_windows_socket.pyd<br>
copying C:\Users\jenyay\AppData\Roaming\Python\Python36\site-packages\wx_core.cp36-win32.pyd -&gt; build_windows\wx._core.pyd<br>
copying C:\Users\jenyay\AppData\Roaming\Python\Python36\site-packages\wx\wxbase30u_vc140.dll -&gt; build_windows\wxbase30u_vc140.dll<br> <strong>copying C:\Users\jenyay\AppData\Roaming\Python\Python36\site-packages\wx\MSVCP140.dll -&gt; build_windows\MSVCP140.dll</strong><br> <strong>copying C:\Users\jenyay\AppData\Roaming\Python\Python36\site-packages\wx\VCRUNTIME140.dll -&gt; build_windows\VCRUNTIME140.dll</strong><br>
copying C:\Users\jenyay\AppData\Roaming\Python\Python36\site-packages\wx\wxbase30u_net_vc140.dll -&gt; build_windows\wxbase30u_net_vc140.dll<br>
copying C:\Users\jenyay\AppData\Roaming\Python\Python36\site-packages\wx\wxmsw30u_core_vc140.dll -&gt; build_windows\wxmsw30u_core_vc140.dll<br>
copying C:\Users\jenyay\AppData\Roaming\Python\Python36\site-packages\wx\siplib.cp36-win32.pyd -&gt; build_windows\wx.siplib.pyd</p> <p>Поэтому появление этих файлов не связано с параметром <em>include_msvcr</em>, который мы всегда устанавливаем в <em>True</em>. Если мы уберем этот параметр или присвоим ему значение <em>False</em>, файлы <em>MSVCP140.dll</em> и <em>VCRUNTIME140.dll</em> не пропадут из сборки. Это еще раз доказывает, что появлению этих файлов мы обязаны библиотеки wxPython, а не cx_Freeze.</p> <p>Если заглянуть в архив <em>python36.zip</em>, то внутри мы увидим следующие файлы:</p> <p><img src="https://jenyay.net/uploads/Programming/Cxfreeze/example_12_zip.png" alt=""></p> <p>Здесь может быть достаточно трудно понять, какие модули нужны, а какие лишние, поэтому лучше все оставить как есть.</p> <p>Если мы теперь запустим созданный файл <em>hello_wx.exe</em>, то увидим одну особенность - появилось графическое окно, но кроме него на заднем фоне открылось также консольное окно.</p> <p><img src="https://jenyay.net/uploads/Programming/Cxfreeze/example_12_wnd.png" alt=""></p> <p>В этом нет ничего удивительного, ведь для запуска скриптов используется интерпретатор Python <em>python.exe</em>, который является консольным приложением. Но понятно, что обычному пользователю программу в таком виде отдавать нельзя, консольное окно нужно убрать.</p> <p>Для этого в cx_Freeze предусмотрен специальный параметр конструктора класса <em>Executable</em>, который называется <em>base</em>. До сих пор мы не использовали этот параметр, что равносильно использованию значения &quot;Console&quot;, что означает, что мы создаем консольное приложение. Другие возможные значения параметра <em>base</em> это &quot;Win32GUI&quot; и &quot;Win32Service&quot;.</p> <p>Для того, чтобы избавиться от фонового консольного окна, достаточно в конструктор класса <em>Executable</em> передать параметр <em>base=&quot;Win32GUI&quot;</em>. Сделаем это ((<a href="https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2012-1" target="_blank" rel="noopener noreferrer">Example 12-1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>)):</p> <h1 id="coding-utf-8-21"><a href="#coding-utf-8-21" class="header-anchor">#</a> coding: utf-8</h1> <p>from cx_Freeze import setup, Executable</p> <p>executables = [Executable('example.py',<br>
                          targetName='hello_wx.exe',<br>
                          base='Win32GUI')]</p> <p>excludes = ['logging', 'unittest', 'email', 'html', 'http', 'urllib', 'xml',<br>
            'unicodedata', 'bz2', 'select']</p> <p>zip_include_packages = ['collections', 'encodings', 'importlib', 'wx']</p> <p>options = {<br>
    'build_exe': {<br>
        'include_msvcr': True,<br>
        'excludes': excludes,<br>
        'zip_include_packages': zip_include_packages,<br>
        'build_exe': 'build_windows',<br>
    }<br>
}</p> <p>setup(name='hello_world',<br>
      version='0.0.12',<br>
      description='My Hello World App!',<br>
      executables=executables,<br>
      options=options)</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=36" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Если теперь выполнить сборку и запустить приложение <em>hello_wx.exe</em>, то появится графическое окно без фонового консольного окна:</p> <p><img src="https://jenyay.net/uploads/Programming/Cxfreeze/example_12-1_wnd.png" alt=""></p> <p>Как видите, никаких проблем с созданием графических приложений с использованием библиотеки wxPython нет.</p> <h3 id="_11-установка-иконки-приложения"><a href="#_11-установка-иконки-приложения" class="header-anchor">#</a> 11. Установка иконки приложения</h3> <p>Библиотека cx_Freeze позволяет устанавливать иконку для создаваемых запускаемых файлов. До сих пор мы не устанавливали иконку, поэтому в Windows использовалась картинка по умолчанию для запускаемых файлов:</p> <p><img src="https://jenyay.net/uploads/Programming/Cxfreeze/example_12-1_icon.png" alt=""></p> <p>Чтобы поменять иконку запускаемого файла, достаточно в конструктор класса <em>Executable</em> передать параметр <em>icon</em>, который должен содержать строку с именем файла иконки. К нашему следующему примеру (<a href="https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2013" target="_blank" rel="noopener noreferrer">Example 13<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>) прилагается высокохудожественная иконка, которая будет установлена для файла <em>hello_wx.exe</em>. Чтобы ее установить, добавим в конструктор класса <em>Executable</em> параметр <em>icon</em>, который принимает строку с именем иконки для приложения:</p> <h1 id="coding-utf-8-22"><a href="#coding-utf-8-22" class="header-anchor">#</a> coding: utf-8</h1> <p>from cx_Freeze import setup, Executable</p> <p>executables = [Executable('example.py',<br>
                          targetName='hello_wx.exe',<br>
                          base='Win32GUI',<br>
                          icon='example.ico')]</p> <p>excludes = ['logging', 'unittest', 'email', 'html', 'http', 'urllib', 'xml',<br>
            'unicodedata', 'bz2', 'select']</p> <p>zip_include_packages = ['collections', 'encodings', 'importlib', 'wx']</p> <p>options = {<br>
    'build_exe': {<br>
        'include_msvcr': True,<br>
        'excludes': excludes,<br>
        'zip_include_packages': zip_include_packages,<br>
        'build_exe': 'build_windows',<br>
    }<br>
}</p> <p>setup(name='hello_world',<br>
      version='0.0.13',<br>
      description='My Hello World App!',<br>
      executables=executables,<br>
      options=options)</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=37" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>В результате сборки запускаемый файл в проводнике Windows будет выглядеть следующим образом:</p> <p><img src="https://jenyay.net/uploads/Programming/Cxfreeze/example_13.png" alt=""></p> <h3 id="_12-создание-инсталятора-msi"><a href="#_12-создание-инсталятора-msi" class="header-anchor">#</a> 12. Создание инсталятора MSI</h3> <p>Кроме создания запускаемых файлов cx_Freeze позволяет создавать то, что под Windows называется инсталятором, а под Linux - пакетами. Под Windows cx_Freeze умеет создавать инсталятор в формате MSI, под Linux - пакеты в формате RPM, а под Mac OS X - пакеты .app и .dmg. В этой статье мы рассмотрим только создание инсталятора под Windows.</p> <p>Давайте сделаем инсталятор на основе предыдущего примера. Единственное, что нам нужно будет сделать - убрать из словаря <em>build_exe</em> параметр <em>build_exe</em>, изменяющий папку для сборки. Как это ни странно, но если он установлен, то создатель инсталятора все равно ищет созданные файлы в папке, подразумеваемой по умолчанию. Возможно, это ошибка в cx_Freeze.</p> <p>Новый скрипт для создания инсталятора ничем не примечателен по сравнению со скриптом для создания запускаемого файла (<a href="https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2014" target="_blank" rel="noopener noreferrer">Example 14<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>):</p> <h1 id="coding-utf-8-23"><a href="#coding-utf-8-23" class="header-anchor">#</a> coding: utf-8</h1> <p>from cx_Freeze import setup, Executable</p> <p>executables = [Executable('example.py',<br>
                          targetName='hello_wx.exe',<br>
                          base='Win32GUI',<br>
                          icon='example.ico')]</p> <p>excludes = ['logging', 'unittest', 'email', 'html', 'http', 'urllib', 'xml',<br>
            'unicodedata', 'bz2', 'select']</p> <p>zip_include_packages = ['collections', 'encodings', 'importlib', 'wx']</p> <p>options = {<br>
    'build_exe': {<br>
        'include_msvcr': True,<br>
        'excludes': excludes,<br>
        'zip_include_packages': zip_include_packages,<br>
    }<br>
}</p> <p>setup(name='hello_world',<br>
      version='0.0.14',<br>
      description='My Hello World App!',<br>
      executables=executables,<br>
      options=options)</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=38" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Для того, чтобы создать инсталятор под Windows, вместо команды <em>build</em> мы должны использовать команду <em>bdist_msi</em>:</p> <p>python setup.py bdist_msi</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=39" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>Внимание!</strong> Для того, чтобы инсталятор успешно создался, путь до скрипта сборки <em>setup.py</em> не должен содержать русские или другие не латинские буквы, иначе вы получите исключение:</p> <p>Traceback (most recent call last):</p> <p>File &quot;setup.py&quot;, line 27, in <module>
options=options)
File &quot;C:\Users\jenyay\AppData\Roaming\Python\Python36\site-packages\cx_Freeze\dist.py&quot;, line 349, in setup
distutils.core.setup(**attrs)
File &quot;C:\Program Files (x86)\Python36-32\lib\distutils\core.py&quot;, line 148, in setup
dist.run_commands()
File &quot;C:\Program Files (x86)\Python36-32\lib\distutils\dist.py&quot;, line 955, in run_commands
self.run_command(cmd)
File &quot;C:\Program Files (x86)\Python36-32\lib\distutils\dist.py&quot;, line 974, in run_command
cmd_obj.run()
File &quot;C:\Users\jenyay\AppData\Roaming\Python\Python36\site-packages\cx_Freeze\windist.py&quot;, line 392, in run
self.add_files()
File &quot;C:\Users\jenyay\AppData\Roaming\Python\Python36\site-packages\cx_Freeze\windist.py&quot;, line 133, in add_files
cab.commit(db)
File &quot;C:\Program Files (x86)\Python36-32\lib\msilib_<em>init</em>_.py&quot;, line 217, in commit
FCICreate(filename, self.files)</module></p> <p>ValueError: FCI error 1</p> <p>После удачной сборки появятся две папки: папка <em>build</em>, внутри которой будет уже знакомая нам папка <em>exe.win32-3.6</em> (мы ведь удалили параметр <em>build_exe</em>), и папка <em>dist</em>, внутри которой будет лежать файл <em>hello_world-0.0.15-win32.msi</em>. МЫ сделали очень простой инсталятор, если его запустить, то единственное, что он спросит пользователя, это папка, куда устанавливать программу:</p> <p><img src="https://jenyay.net/uploads/Programming/Cxfreeze/example_14_installer.png" alt=""></p> <p>Сейчас инсталятор даже не создает иконку в меню &quot;Пуск&quot;, давайте ее добавим (<a href="https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2014-1" target="_blank" rel="noopener noreferrer">Example 14-1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>). В исправленном файле <em>setup.py</em> мы передадим два новых параметра в конструктор класса <em>Executable</em> - <em>shortcutName</em> и <em>shortcutDir</em>. Параметр <em>shortcutName</em> задает имя, которое будет отображаться в меню &quot;Пуск&quot;, а <em>shortcutDir</em> должно быть строкой из <a href="https://msdn.microsoft.com/en-us/library/aa370905v=vs.85.aspx#System_Folder_Properties" target="_blank" rel="noopener noreferrer">этой таблицы<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, указывающей, в какую системную папку следует поместить ярлык. В нашем случае мы поместим ярлык в C:\ProgramData\Microsoft\Windows\Start Menu\Programs, что задается параметром shortcutDir='ProgramMenuFolder'.</p> <h1 id="coding-utf-8-24"><a href="#coding-utf-8-24" class="header-anchor">#</a> coding: utf-8</h1> <p>from cx_Freeze import setup, Executable</p> <p>executables = [Executable('example.py',<br>
                          targetName='hello_wx.exe',<br>
                          base='Win32GUI',<br>
                          icon='example.ico',<br>
                          shortcutName='Hello wxPython Application',<br>
                          shortcutDir='ProgramMenuFolder')]</p> <p>excludes = ['logging', 'unittest', 'email', 'html', 'http', 'urllib', 'xml',<br>
            'unicodedata', 'bz2', 'select']</p> <p>zip_include_packages = ['collections', 'encodings', 'importlib', 'wx']</p> <p>options = {<br>
    'build_exe': {<br>
        'include_msvcr': True,<br>
        'excludes': excludes,<br>
        'zip_include_packages': zip_include_packages,<br>
    }<br>
}</p> <p>setup(name='hello_world',<br>
      version='0.0.14',<br>
      description='My Hello World App!',<br>
      executables=executables,<br>
      options=options)</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=40" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Если теперь выполнить команду <em>python setup.py bdist_msi</em>, после чего запустить инсталятор и выполнить установку программы, то в меню &quot;Пуск&quot; появится иконка нашей программы:</p> <p><img src="https://jenyay.net/uploads/Programming/Cxfreeze/example_14-1_menu.png" alt=""></p> <p>Создание MSI - это большая тема, достойная отдельной статьи, поэтому здесь мы ограничимся совсем коротким примером. К сожалению, в документации по cx_Freeze эта тема очень плохо описана, если вы хотите гибко настраивать параметры создаваемого инсталятора, то можете начать с этих двух ссылок - <a href="https://bitbucket.org/anthony_tuininga/cx_freeze/issues/48/documentation-of-how-to-create-desktop-or" target="_blank" rel="noopener noreferrer">раз<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> и <a href="https://stackoverflow.com/questions/15734703/use-cx-freeze-to-create-an-msi-that-adds-a-shortcut-to-the-desktop" target="_blank" rel="noopener noreferrer">два<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, но готовьтесь к тому, что вам придется разобраться с тем, как устроен формат MSI по MSDN. Хотя в документации к cx_Freeze говорится, что для создания сложных инсталяторов лучше использовать сторонние приложения, например <a href="http://www.jrsoftware.org/isinfo.php" target="_blank" rel="noopener noreferrer">Inno Setup<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h3 id="_13-скрипт-cxfreeze-quickstart-для-создания-фаила-setup-py"><a href="#_13-скрипт-cxfreeze-quickstart-для-создания-фаила-setup-py" class="header-anchor">#</a> 13. Скрипт cxfreeze-quickstart для создания файла setup.py</h3> <p>До сих пор мы предполагали, что файл <em>setup.py</em> мы создавали сами с чистого листа. В этом нет ничего сложного, но для облегчения создания этого файла к библиотеке cx_Freeze прилагается скрипт <em>cxfreeze-quickstart</em>. После запуска этого скрипта он предложит ответить на несколько вопросов и создаст заготовку с уже частично настроенным файлом <em>setup.py</em>.</p> <p>Но прежде, чем демонстрировать работу этого скрипта, надо сказать пару слов о запуске его под Windows. Дело в том, что скрипт <em>cxfreeze-quickstart</em> поставляется в виде python-скрипта в формате, принятом в Linux - в виде файла с именем <em>cxfreeze-quickstart</em> без расширения. Под Windows этот файл расположен в папке <em>Scripts</em> внутри папки с Python. Например, если вы устанавливали cx_Freeze без использования virtualenv в папку пользователя (без использования прав администратора), то это будет папка _C:\Users\USERNAME\AppData\Roaming\Python\Scripts_ .</p> <p>Содержимое файла <em>cxfreeze-quickstart</em> очень короткое:</p> <p>#!c:\python27\python.exe<br>
from cx_Freeze.setupwriter import main</p> <p>main()</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=41" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Под Windows, если вы хотите использовать скрипт <em>cxfreeze-quickstart</em> проще всего скопировать его из указанной выше папки в папку с вашим проектом, переименовать его в <em>cxfreeze-quickstart.py</em> и запустить с помощью команды</p> <p>python cxfreeze-quickstart.py</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=42" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Давайте запустим его и введем некоторые параметры (<a href="https://github.com/Jenyay/cx_freeze_examples/tree/master/example%2015" target="_blank" rel="noopener noreferrer">Example 15<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>):</p> <p>$ python cxfreeze-quickstart.py</p> <p><strong>Project name:</strong> My project<br> <strong>Version [1.0]:</strong> 0.0.14<br> <strong>Description:</strong> Example for article.<br> <strong>Python file to make executable from:</strong> example_15.py<br> <strong>Executable file name [example_15]:</strong> hello.exe<br> <strong>(C)onsole application, (G)UI application, or (S)ervice [C]:</strong> G<br> <strong>Save setup script to [setup.py]:</strong></p> <p>'''Setup script written to setup.py; run it as:</p> <div class="language- extra-class"><pre><code>python setup.py build
</code></pre></div><p>Run this now [n]?''' n</p> <p>Для наглядности строки, которые выводит скрипт <em>cxfreeze-quickstart</em>, выделены полужирным шрифтом.</p> <p>После того, как мы ответим на все вопросы, будет создан файл <em>setup.py</em> со следующим содержимым:</p> <p>from cx_Freeze import setup, Executable</p> <h1 id="dependencies-are-automatically-detected-but-it-might-need"><a href="#dependencies-are-automatically-detected-but-it-might-need" class="header-anchor">#</a> Dependencies are automatically detected, but it might need</h1> <h1 id="fine-tuning"><a href="#fine-tuning" class="header-anchor">#</a> fine tuning.</h1> <p>buildOptions = dict(packages = [], excludes = [])</p> <p>import sys<br>
base = 'Win32GUI' if sys.platform=='win32' else None</p> <p>executables = [<br>
    Executable('example_15.py', base=base, targetName = 'hello.exe')<br>
]</p> <p>setup(name='My project',<br>
      version = '0.0.15',<br>
      description = 'Example for article.',<br>
      options = dict(build_exe = buildOptions),<br>
      executables = executables)</p> <p><a href="https://jenyay.net/Programming/Cxfreeze?action=sourceblock&amp;num=43" target="_blank" rel="noopener noreferrer">Исходник<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>А дальше мы можем заполнять недостающие параметры самостоятельно.</p> <h3 id="_14-заключение"><a href="#_14-заключение" class="header-anchor">#</a> 14. Заключение</h3> <p>Мы рассмотрели основы использования библиотеки cx_Freeze для создания запускаемых файлов из python-скриптов. Мы научились создавать файл с параметрами сборки, который обычно называется <em>setup.py</em> , как с нуля, так и с помощью скрипта <em>cxfreeze-quickstart</em>. Разобрались с некоторыми параметрами, которые влияют на создание запускаемых файлов, а именно: как исключать лишние модули из сборки, как добавлять необходимые модули вручную, как менять папку для сборки. Мы рассмотрели особенности создания запускаемых файлов из скриптов, создающих графический интерфейс на примере wxPython, рассмотрели основы для создания инсталятора MSI под Windows.</p> <p>Но библиотека cx_Freeze предлагает еще больше возможностей, которые остались за рамками статьи. Например, мы ничего не сказали о задании параметров сборки через командную строку (эти параметры могут заменять параметры, указанные в файле <em>setup.py</em>). Мы ничего не сказали о сборке запускаемых файлов и инсталяторов под другие операционные системы (Linux и Mac OS). Также за рамками статьи остались некоторые параметры, которые можно использовать в скрипте сборки <em>setup.py</em>. Обо всем этом вы можете прочитать в <a href="http://cx-freeze.readthedocs.io/en/latest" target="_blank" rel="noopener noreferrer">официальной документации<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> библиотеки cx_Freeze.</p> <p>И в завершение надо сказать, что cx_Freeze <strong>не</strong> позволяет делать. Во-первых, с помощью cx_Freeze вы можете делать сборки только под ту операционную систему, в которой вы работаете в данный момент, т.е. cx_Freeze - не инструмент для кросскомпиляции. И, во-вторых, в отличие от других подобных инструментов (например, <a href="http://www.pyinstaller.org/" target="_blank" rel="noopener noreferrer">pyInstaller<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>), cx_Freeze не позволяет упаковать все необходимые файлы в один exe-шник.</p> <p>На этом мы закончим статью, надеюсь, что она будет вам полезна. Еще раз напомню ссылку на github, где вы можете скачать все примеры, используемые в статье - <a href="https://github.com/Jenyay/cx_freeze_examples" target="_blank" rel="noopener noreferrer">https://github.com/Jenyay/cx_freeze_examples<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Возможно, вас также заинтересуют другие <a href="http://jenyay.net/Programming/Python" target="_blank" rel="noopener noreferrer">статьи по программированию на Python<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.dec9f71a.js" defer></script><script src="/assets/js/2.733019b2.js" defer></script><script src="/assets/js/283.0b2d1fb1.js" defer></script>
  </body>
</html>
